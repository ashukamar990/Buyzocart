<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Buyzo Cart — Modern Shop</title>
  <meta name="description" content="Buyzo Cart — clean, mobile‑first shop template with product cards, step checkout, and policy modals."/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://images.unsplash.com"/>
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth-compat.js"></script>
  <!-- EmailJS SDK -->
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  <style>
    :root {
      --bg: #ffffff;
      --card: #ffffff;
      --accent: #2563eb;
      --accent-hover: #1d4ed8;
      --muted: #64748b;
      --muted-light: #94a3b8;
      --success: #22c55e;
      --error: #ef4444;
      --shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      --shadow-hover: 0 6px 16px rgba(0, 0, 0, 0.08);
      --ring: #dbeafe;
      --ink: #0f172a;
      --ink-2: #334155;
      --border: #e2e8f0;
      --radius: 12px;
      --transition: all 0.3s ease;
    }

    [data-theme="dark"] {
      --bg: #0f172a;
      --card: #1e293b;
      --accent: #3b82f6;
      --accent-hover: #2563eb;
      --muted: #94a3b8;
      --muted-light: #64748b;
      --success: #22c55e;
      --error: #ef4444;
      --shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      --shadow-hover: 0 6px 16px rgba(0, 0, 0, 0.3);
      --ring: #1e3a8a;
      --ink: #f1f5f9;
      --ink-2: #cbd5e1;
      --border: #334155;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg);
      color: var(--ink);
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      transition: var(--transition);
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    /* Header */
    header {
      background: var(--card);
      box-shadow: var(--shadow);
      padding: 16px 24px;
      position: sticky;
      top: 0;
      z-index: 50;
      border-bottom: 1px solid var(--border);
      transition: var(--transition);
    }

    .header-inner {
      max-width: 1100px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      gap: 16px;
      justify-content: space-between;
    }

    .brand {
      font-weight: 800;
      color: var(--ink);
      font-size: 20px;
      white-space: nowrap;
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
    }

    .brand .chip {
      background: var(--accent);
      color: #fff;
      font-weight: 700;
      padding: 6px 10px;
      border-radius: 8px;
      font-size: 14px;
    }

    .search-wrap {
      flex: 1;
      display: flex;
      max-width: 500px;
      margin: 16px 0;
    }

    .search-wrap input {
      flex: 1;
      padding: 12px 16px;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      font-family: inherit;
      font-size: 14px;
      transition: all 0.2s ease;
      background: var(--card);
      color: var(--ink);
    }

    .search-wrap input:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px var(--ring);
    }

    .cta {
      display: flex;
      gap: 10px;
      position: relative;
      align-items: center;
    }

    .btn {
      background: var(--accent);
      color: #fff;
      border: 0;
      padding: 10px 16px;
      border-radius: var(--radius);
      cursor: pointer;
      font-weight: 600;
      font-size: 14px;
      transition: all 0.2s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    .btn:hover {
      background: var(--accent-hover);
      transform: translateY(-1px);
    }

    .btn.secondary {
      background: #f1f5f9;
      color: var(--ink-2);
    }

    .btn.secondary:hover {
      background: #e2e8f0;
      transform: translateY(-1px);
    }

    .btn.error {
      background: var(--error);
    }

    .btn.error:hover {
      background: #dc2626;
    }

    .btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    /* Theme Toggle Button */
    .theme-toggle {
      background: none;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 8px;
      border-radius: 50%;
      transition: all 0.2s ease;
      color: var(--ink);
    }

    .theme-toggle:hover {
      background: var(--border);
    }

    .theme-toggle svg {
      width: 20px;
      height: 20px;
    }

    .theme-toggle .moon-icon {
      display: none;
    }

    [data-theme="dark"] .theme-toggle .sun-icon {
      display: none;
    }

    [data-theme="dark"] .theme-toggle .moon-icon {
      display: block;
    }

    /* Notification Badge */
    .notification-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background-color: var(--error);
      color: white;
      border-radius: 50%;
      width: 18px;
      height: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: bold;
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }

    /* Container */
    .container {
      max-width: 1100px;
      margin: 28px auto;
      padding: 0 20px;
      min-height: 70vh;
    }

    /* Hero */
    .hero {
      background: linear-gradient(135deg, #f0f9ff 0%, #ffffff 100%);
      border: 1px solid var(--border);
      box-shadow: var(--shadow);
      border-radius: var(--radius);
      padding: 24px;
      margin-bottom: 24px;
      transition: var(--transition);
    }

    [data-theme="dark"] .hero {
      background: linear-gradient(135deg, #1e3a8a 0%, #0f172a 100%);
    }

    .hero h1 {
      margin: 0 0 8px 0;
      font-size: 24px;
      font-weight: 700;
    }

    .hero p {
      margin: 0;
      color: var(--muted);
      font-size: 16px;
    }

    /* Steps */
    .steps {
      display: flex;
      gap: 8px;
      justify-content: center;
      margin: 24px 0;
      flex-wrap: wrap;
    }

    .step-pill {
      background: #fff;
      padding: 10px 16px;
      border-radius: 999px;
      border: 1px solid var(--border);
      font-weight: 600;
      color: var(--ink-2);
      cursor: pointer;
      user-select: none;
      transition: all 0.2s ease;
      font-size: 14px;
    }

    .step-pill:hover {
      border-color: var(--accent);
    }

    .step-pill.disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .step-pill.disabled:hover {
      border-color: var(--border);
    }

    /* NEW: Enhanced Product Grid */
    .product-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
    }

    .product-card {
      background: var(--card);
      border-radius: var(--radius);
      overflow: hidden;
      box-shadow: var(--shadow);
      display: flex;
      flex-direction: column;
      border: 1px solid var(--border);
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
    }

    .product-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-hover);
    }

    .product-card-image {
      height: 180px;
      background-position: center;
      background-size: cover;
      position: relative;
      cursor: pointer;
    }

    .product-card-badge {
      position: absolute;
      top: 10px;
      left: 10px;
      background: #ff4444;
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: 700;
      z-index: 2;
    }

    .product-card-body {
      padding: 16px;
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .product-card-title {
      font-weight: 600;
      margin-bottom: 6px;
      font-size: 16px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .product-card-rating {
      display: flex;
      align-items: center;
      margin-bottom: 8px;
      font-size: 14px;
    }

    .product-card-stars {
      color: #ffc107;
      margin-right: 4px;
    }

    .product-card-review-count {
      color: var(--muted);
    }

    .product-card-price {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
    }

    .product-card-current-price {
      font-weight: 700;
      color: var(--ink);
      font-size: 18px;
    }

    .product-card-original-price {
      text-decoration: line-through;
      color: var(--muted);
      font-size: 14px;
    }

    .product-card-actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 12px;
    }

    .action-btn {
      background: none;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 8px;
      border-radius: 50%;
      transition: all 0.2s ease;
    }

    .action-btn:hover {
      background: #f1f5f9;
    }

    .wishlist-btn {
      color: var(--muted);
    }

    .wishlist-btn.active {
      color: var(--error);
    }

    .share-btn {
      color: var(--muted);
    }

    /* Pages */
    .page {
      display: none;
    }

    .page.active {
      display: block;
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .card-panel {
      background: var(--card);
      border-radius: var(--radius);
      padding: 20px;
      box-shadow: var(--shadow);
      margin-bottom: 16px;
      border: 1px solid var(--border);
      transition: var(--transition);
    }

    .card-panel h3 {
      margin-top: 0;
      margin-bottom: 12px;
      font-size: 18px;
      font-weight: 600;
    }

    label {
      display: block;
      font-size: 14px;
      color: var(--muted);
      margin-bottom: 6px;
      font-weight: 500;
    }

    input, select, textarea {
      width: 100%;
      padding: 12px;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      background: var(--card);
      outline: none;
      font-family: inherit;
      font-size: 14px;
      transition: all 0.2s ease;
      color: var(--ink);
    }

    input:focus, select:focus, textarea:focus {
      box-shadow: 0 0 0 3px var(--ring);
      border-color: var(--accent);
    }

    .row {
      display: flex;
      gap: 16px;
    }

    .col {
      flex: 1;
    }

    .summary {
      background: #f8fafc;
      padding: 16px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
    }

    [data-theme="dark"] .summary {
      background: #1e293b;
    }

    .center {
      text-align: center;
    }

    footer {
      margin-top: 48px;
      text-align: center;
      color: var(--muted);
      padding: 28px 0;
      border-top: 1px solid var(--border);
      transition: var(--transition);
    }

    /* Thumbnails */
    .thumbs {
      display: flex;
      gap: 10px;
      margin-top: 12px;
      flex-wrap: wrap;
    }

    .thumb {
      width: 60px;
      height: 60px;
      border-radius: 8px;
      background-size: cover;
      background-position: center;
      border: 2px solid transparent;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .thumb:hover {
      transform: scale(1.05);
    }

    .thumb.selected {
      border-color: var(--accent);
    }

    /* FIX FOR PROBLEM 1: Remove blue background from order page slider */
    #orderPage .gallery-main {
      background-color: transparent !important;
    }

    .gallery-main {
      height: 340px;
      background-size: contain;
      background-position: center;
      background-repeat: no-repeat;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      position: relative;
      overflow: hidden;
    }

    /* Product Detail Page */
    .product-detail-page {
      padding: 20px;
    }
    
    .product-detail-container {
      display: flex;
      gap: 30px;
      flex-wrap: wrap;
    }
    
    .product-detail-gallery {
      flex: 1;
      min-width: 300px;
      position: relative;
    }
    
    .product-detail-info {
      flex: 1;
      min-width: 300px;
    }
    
    .product-detail-main-image {
      width: 100%;
      height: 400px;
      background-size: contain;
      background-position: center;
      background-repeat: no-repeat;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      margin-bottom: 16px;
      position: relative;
      overflow: hidden;
      cursor: zoom-in;
    }
    
    .product-detail-thumbnails {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    
    .product-detail-thumbnail {
      width: 80px;
      height: 80px;
      border-radius: 8px;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      border: 2px solid var(--border);
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .product-detail-thumbnail:hover,
    .product-detail-thumbnail.active {
      border-color: var(--accent);
      transform: scale(1.05);
    }
    
    .product-detail-title {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 8px;
    }
    
    .product-detail-price {
      font-size: 28px;
      font-weight: 700;
      color: var(--accent);
      margin-bottom: 12px;
    }
    
    .product-detail-desc {
      color: var(--muted);
      margin-bottom: 20px;
      font-size: 16px;
    }
    
    .product-detail-full-desc {
      margin-bottom: 24px;
      line-height: 1.6;
      color: var(--ink-2);
    }
    
    .product-detail-meta {
      background: #f8fafc;
      padding: 16px;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      margin-bottom: 24px;
    }

    [data-theme="dark"] .product-detail-meta {
      background: #1e293b;
    }
    
    .product-detail-meta h4 {
      margin: 0 0 12px 0;
      color: var(--accent);
      font-size: 16px;
    }
    
    .back-to-products {
      display: inline-flex;
      align-items: center;
      margin-bottom: 20px;
      color: var(--accent);
      font-weight: 600;
      cursor: pointer;
      padding: 8px 16px;
      border-radius: var(--radius);
      background: #f1f5f9;
      transition: all 0.2s ease;
    }

    [data-theme="dark"] .back-to-products {
      background: #1e293b;
    }
    
    .back-to-products:hover {
      background: #e2e8f0;
      color: var(--accent-hover);
    }

    /* Similar Products Section */
    .similar-products {
      margin-top: 40px;
      padding-top: 24px;
      border-top: 1px solid var(--border);
    }
    
    .similar-title {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 16px;
      color: var(--ink);
    }

    /* Carousel Controls for Product Detail */
    .detail-carousel-control {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.8);
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 18px;
      color: var(--ink);
      transition: all 0.2s ease;
      z-index: 10;
    }

    .detail-carousel-control:hover {
      background: rgba(255, 255, 255, 1);
    }

    .detail-carousel-control.prev {
      left: 10px;
    }

    .detail-carousel-control.next {
      right: 10px;
    }

    .detail-carousel-dots {
      position: absolute;
      bottom: 15px;
      left: 0;
      right: 0;
      display: flex;
      justify-content: center;
      gap: 8px;
      z-index: 10;
    }

    .detail-carousel-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.5);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .detail-carousel-dot.active {
      background: rgba(255, 255, 255, 1);
      transform: scale(1.2);
    }

    /* Policy Pages */
    .policy-page {
      padding: 20px;
      max-width: 800px;
      margin: 0 auto;
    }
    
    .policy-content {
      background: var(--card);
      border-radius: var(--radius);
      padding: 24px;
      box-shadow: var(--shadow);
      margin-bottom: 24px;
      border: 1px solid var(--border);
    }
    
    .policy-content h2 {
      margin-top: 0;
      color: var(--accent);
      border-bottom: 2px solid var(--border);
      padding-bottom: 12px;
      margin-bottom: 20px;
    }
    
    .policy-content h3 {
      margin: 24px 0 12px;
      color: var(--ink);
    }
    
    .policy-content p {
      margin-bottom: 16px;
      line-height: 1.6;
    }
    
    .policy-content ul, .policy-content ol {
      margin: 16px 0;
      padding-left: 24px;
    }
    
    .policy-content li {
      margin-bottom: 8px;
    }
    
    .back-button {
      display: inline-flex;
      align-items: center;
      margin-bottom: 20px;
      color: var(--accent);
      font-weight: 600;
      cursor: pointer;
    }
    
    .back-button:hover {
      color: var(--accent-hover);
    }

    /* Category Navigation */
    .categories {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin: 16px 0 24px;
      justify-content: center;
    }
    
    .category-pill {
      background: #fff;
      padding: 8px 16px;
      border-radius: 20px;
      border: 1px solid var(--border);
      font-weight: 500;
      color: var(--ink-2);
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 14px;
      white-space: nowrap;
    }
    
    .category-pill:hover, .category-pill.active {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
    }
    
    .category-pill.active {
      font-weight: 600;
    }

    /* Carousel Controls */
    .carousel-control {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.8);
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 18px;
      color: var(--ink);
      transition: all 0.2s ease;
      z-index: 10;
    }

    .carousel-control:hover {
      background: rgba(255, 255, 255, 1);
    }

    .carousel-control.prev {
      left: 10px;
    }

    .carousel-control.next {
      right: 10px;
    }

    .carousel-dots {
      position: absolute;
      bottom: 15px;
      left: 0;
      right: 0;
      display: flex;
      justify-content: center;
      gap: 8px;
      z-index: 10;
    }

    .carousel-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.5);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .carousel-dot.active {
      background: rgba(255, 255, 255, 1);
      transform: scale(1.2);
    }

    /* About Us Section */
    .about-us {
      margin-top: 40px;
      padding: 20px;
      background: #f8fafc;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      text-align: center;
    }

    [data-theme="dark"] .about-us {
      background: #1e293b;
    }

    .about-us h3 {
      margin-bottom: 12px;
      color: var(--accent);
    }

    .about-us p {
      color: var(--ink-2);
      max-width: 600px;
      margin: 0 auto;
    }

    /* My Orders Page */
    .orders-container {
      max-width: 800px;
      margin: 0 auto;
    }
    
    .order-card {
      background: var(--card);
      border-radius: var(--radius);
      padding: 20px;
      box-shadow: var(--shadow);
      margin-bottom: 20px;
      border: 1px solid var(--border);
      cursor: pointer;
      transition: all 0.3s ease;
      user-select: none;
    }
    
    .order-card:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-hover);
    }
    
    .order-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
      padding-bottom: 12px;
      border-bottom: 1px solid var(--border);
    }
    
    .order-id {
      font-weight: 600;
      color: var(--accent);
    }
    
    .order-date {
      color: var(--muted);
      font-size: 14px;
    }
    
    .order-estimated {
      color: var(--success);
      font-size: 14px;
      font-weight: 500;
      margin-top: 4px;
    }
    
    .order-status {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
    }
    
    .status-confirmed {
      background: #dcfce7;
      color: #166534;
    }
    
    .status-shipped {
      background: #dbeafe;
      color: #1e40af;
    }
    
    .status-delivered {
      background: #dcfce7;
      color: #166534;
    }
    
    .status-cancelled {
      background: #fee2e2;
      color: #991b1b;
    }
    
    .order-details {
      display: flex;
      gap: 16px;
      margin-bottom: 16px;
    }
    
    .order-product-image {
      width: 80px;
      height: 80px;
      border-radius: 8px;
      background-size: contain;
      background-position: center;
      background-repeat: no-repeat;
      border: 1px solid var(--border);
    }
    
    .order-product-info {
      flex: 1;
    }
    
    .order-product-title {
      font-weight: 600;
      margin-bottom: 6px;
    }
    
    .order-product-price {
      color: var(--accent);
      font-weight: 700;
      margin-bottom: 6px;
    }
    
    .order-product-meta {
      color: var(--muted);
      font-size: 14px;
    }
    
    .order-actions {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
    }

    /* Order Detail Page */
    .order-detail-page {
      background: var(--card);
      border-radius: var(--radius);
      padding: 24px;
      box-shadow: var(--shadow);
      margin-bottom: 24px;
    }
    
    .order-detail-section {
      margin-bottom: 20px;
      padding-bottom: 20px;
      border-bottom: 1px solid var(--border);
    }
    
    .order-detail-section:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
    }
    
    .order-detail-label {
      font-weight: 600;
      color: var(--muted);
      margin-bottom: 6px;
      font-size: 14px;
    }
    
    .order-detail-value {
      font-size: 16px;
      color: var(--ink);
    }
    
    .order-detail-image {
      width: 120px;
      height: 120px;
      border-radius: 8px;
      background-size: contain;
      background-position: center;
      background-repeat: no-repeat;
      border: 1px solid var(--border);
      margin-right: 16px;
    }
    
    .order-detail-product {
      display: flex;
      align-items: center;
      margin-bottom: 16px;
    }
    
    .order-detail-product-info {
      flex: 1;
    }

    /* Horizontal Product Slider */
    .product-slider {
      margin: 30px 0;
      position: relative;
    }
    
    .slider-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }
    
    .slider-title {
      font-size: 20px;
      font-weight: 700;
    }
    
    .slider-controls {
      display: flex;
      gap: 8px;
    }
    
    .slider-btn {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: var(--card);
      border: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .slider-btn:hover {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
    }
    
    .slider-container {
      overflow-x: auto;
      scroll-behavior: smooth;
      scrollbar-width: none; /* Firefox */
      -ms-overflow-style: none; /* IE and Edge */
      user-select: none;
    }
    
    .slider-container::-webkit-scrollbar {
      display: none; /* Chrome, Safari and Opera */
    }
    
    .slider-track {
      display: flex;
      gap: 16px;
      padding: 4px;
      user-select: none;
    }
    
    .slider-item {
      flex: 0 0 auto;
      width: 200px;
      background: var(--card);
      border-radius: var(--radius);
      overflow: hidden;
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
      transition: all 0.3s ease;
      cursor: pointer;
      user-select: none;
    }
    
    .slider-item:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-hover);
    }
    
    .slider-item-img {
      height: 150px;
      background-size: contain;
      background-position: center;
      background-repeat: no-repeat;
    }
    
    .slider-item-body {
      padding: 12px;
    }
    
    .slider-item-title {
      font-weight: 600;
      font-size: 14px;
      margin-bottom: 6px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .slider-item-price {
      font-weight: 700;
      color: var(--accent);
      font-size: 16px;
    }

    /* Toast Notification */
    .toast {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--card);
      color: var(--ink);
      padding: 16px 20px;
      border-radius: var(--radius);
      box-shadow: var(--shadow-hover);
      display: flex;
      align-items: center;
      gap: 10px;
      z-index: 1000;
      transform: translateX(-50%) translateY(-100px);
      opacity: 0;
      transition: all 0.3s ease;
      max-width: 90%;
      text-align: center;
    }
    
    .toast.show {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }
    
    .toast.success {
      border-left: 4px solid var(--success);
    }
    
    .toast.error {
      border-left: 4px solid var(--error);
    }
    
    .toast-icon {
      font-size: 20px;
    }
    
    .toast.success .toast-icon {
      color: var(--success);
    }
    
    .toast.error .toast-icon {
      color: var(--error);
    }

    /* Cancellation Modal */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 2000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    
    .modal-overlay.active {
      opacity: 1;
      visibility: visible;
    }
    
    .cancellation-modal {
      background: var(--card);
      border-radius: var(--radius);
      padding: 24px;
      box-shadow: var(--shadow-hover);
      max-width: 500px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
    }
    
    .cancellation-modal h3 {
      margin-top: 0;
      margin-bottom: 16px;
      color: var(--ink);
    }
    
    .cancellation-reason {
      margin-bottom: 12px;
      padding: 12px;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .cancellation-reason:hover {
      border-color: var(--accent);
      background: #f8fafc;
    }
    
    .cancellation-reason.selected {
      border-color: var(--accent);
      background: var(--ring);
    }
    
    .cancellation-reason input {
      margin-right: 8px;
      width: auto;
    }
    
    .cancellation-actions {
      display: flex;
      gap: 12px;
      margin-top: 20px;
      justify-content: flex-end;
    }

    /* Alert Modal - Updated with Cancel and Yes buttons */
    .alert-modal {
      background: var(--card);
      border-radius: var(--radius);
      padding: 24px;
      box-shadow: var(--shadow-hover);
      max-width: 500px;
      width: 90%;
      text-align: center;
    }
    
    .alert-modal h3 {
      margin-top: 0;
      margin-bottom: 16px;
      color: var(--ink);
    }
    
    .alert-modal p {
      margin-bottom: 20px;
      line-height: 1.6;
    }
    
    .alert-modal .alert-icon {
      font-size: 48px;
      color: var(--error);
      margin-bottom: 16px;
    }
    
    /* New styles for alert modal buttons */
    .alert-modal-buttons {
      display: flex;
      gap: 12px;
      justify-content: center;
      margin-top: 20px;
    }

    /* Quantity Input Controls */
    .quantity-control {
      display: flex;
      align-items: center;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      overflow: hidden;
      width: 100%;
    }
    
    .quantity-control button {
      background: #f1f5f9;
      border: none;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 16px;
      transition: all 0.2s ease;
    }
    
    .quantity-control button:hover {
      background: #e2e8f0;
    }
    
    .quantity-control input {
      flex: 1;
      text-align: center;
      border: none;
      border-left: 1px solid var(--border);
      border-right: 1px solid var(--border);
      border-radius: 0;
      padding: 10px;
      margin: 0;
      background: var(--card);
      color: var(--ink);
    }

    /* Delivery Congratulations */
    .delivery-congrats {
      background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
      border: 1px solid #22c55e;
      border-radius: var(--radius);
      padding: 16px;
      margin-top: 16px;
      text-align: center;
      color: #166534;
      font-weight: 600;
    }
    
    .delivery-congrats-icon {
      font-size: 24px;
      margin-bottom: 8px;
    }

    /* Refund Request Section */
    .refund-section {
      background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
      border: 1px solid #f59e0b;
      border-radius: var(--radius);
      padding: 16px;
      margin-top: 16px;
    }
    
    .refund-title {
      font-size: 16px;
      font-weight: 600;
      color: #92400e;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .refund-note {
      color: #92400e;
      font-size: 14px;
      margin-bottom: 12px;
    }
    
    .refund-time-left {
      background: #fef3c7;
      border: 1px solid #f59e0b;
      border-radius: 20px;
      padding: 6px 12px;
      font-size: 12px;
      font-weight: 600;
      color: #92400e;
      display: inline-block;
      margin-bottom: 12px;
    }

    /* Mobile Menu Icon */
    .menu-icon {
      display: none;
      flex-direction: column;
      justify-content: space-between;
      width: 24px;
      height: 18px;
      cursor: pointer;
    }
    
    .menu-icon span {
      height: 2px;
      width: 100%;
      background-color: var(--ink);
      border-radius: 2px;
      transition: all 0.3s ease;
    }
    
    /* Mobile Menu */
    .mobile-menu {
      position: fixed;
      top: 0;
      left: -280px;
      width: 280px;
      height: 100vh;
      background: var(--card);
      box-shadow: var(--shadow-hover);
      z-index: 1000;
      transition: left 0.3s ease;
      overflow-y: auto;
    }
    
    .mobile-menu.active {
      left: 0;
    }
    
    .menu-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px 20px;
      border-bottom: 1px solid var(--border);
    }
    
    .menu-close {
      font-size: 24px;
      cursor: pointer;
      color: var(--muted);
    }
    
    .menu-items {
      padding: 16px 0;
    }
    
    .menu-item {
      display: flex;
      align-items: center;
      padding: 12px 20px;
      color: var(--ink);
      transition: all 0.2s ease;
      cursor: pointer;
    }
    
    .menu-item:hover {
      background: #f1f5f9;
      color: var(--accent);
    }
    
    .menu-item svg {
      margin-right: 12px;
      width: 18px;
      height: 18px;
    }
    
    .menu-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: 999;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    
    .menu-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    /* NEW FEATURES STYLES */

    /* Recently Viewed Products */
    .recently-viewed {
      margin: 40px 0;
      padding-top: 24px;
      border-top: 1px solid var(--border);
    }

    .recently-viewed-title {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 16px;
      color: var(--ink);
    }

    /* Newsletter Section */
    .newsletter-section {
      background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
      border-radius: var(--radius);
      padding: 32px 24px;
      text-align: center;
      margin: 40px 0;
      border: 1px solid var(--border);
    }

    [data-theme="dark"] .newsletter-section {
      background: linear-gradient(135deg, #1e3a8a 0%, #0f172a 100%);
    }

    .newsletter-title {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 8px;
      color: var(--ink);
    }

    .newsletter-desc {
      color: var(--muted);
      margin-bottom: 20px;
      max-width: 500px;
      margin-left: auto;
      margin-right: auto;
    }

    .newsletter-form {
      display: flex;
      max-width: 400px;
      margin: 0 auto;
      gap: 10px;
    }

    .newsletter-input {
      flex: 1;
      padding: 12px 16px;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      font-family: inherit;
      font-size: 14px;
      background: var(--card);
      color: var(--ink);
    }

    .newsletter-btn {
      background: var(--accent);
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: var(--radius);
      cursor: pointer;
      font-weight: 600;
      transition: all 0.2s ease;
    }

    .newsletter-btn:hover {
      background: var(--accent-hover);
    }

    /* Social Sharing */
    .social-sharing {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }

    .share-btn {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 8px 12px;
      border-radius: var(--radius);
      background: #f1f5f9;
      color: var(--ink);
      font-size: 14px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .share-btn:hover {
      background: #e2e8f0;
      transform: translateY(-1px);
    }

    .share-btn.facebook { background: #f0f7ff; color: #1877f2; }
    .share-btn.twitter { background: #f0f9ff; color: #1da1f2; }
    .share-btn.whatsapp { background: #f0fff4; color: #25d366; }

    /* Stock Status */
    .stock-status {
      display: inline-block;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: 600;
      margin-bottom: 12px;
    }

    .in-stock {
      background: #dcfce7;
      color: #166534;
    }

    .low-stock {
      background: #fef3c7;
      color: #92400e;
    }

    .out-of-stock {
      background: #fee2e2;
      color: #991b1b;
    }

    /* Product SKU */
    .product-sku {
      color: var(--muted);
      font-size: 14px;
      margin-bottom: 8px;
    }

    /* Breadcrumb Navigation */
    .breadcrumb {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 20px;
      font-size: 14px;
      color: var(--muted);
    }

    .breadcrumb a {
      color: var(--accent);
    }

    .breadcrumb span {
      color: var(--muted-light);
    }

    /* Loading Spinner */
    .loading-spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 2px solid #f3f3f3;
      border-top: 2px solid var(--accent);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Price Filter */
    .price-filter {
      background: var(--card);
      border-radius: var(--radius);
      padding: 16px;
      margin-bottom: 20px;
      border: 1px solid var(--border);
    }

    .price-filter-title {
      font-weight: 600;
      margin-bottom: 12px;
      font-size: 16px;
    }

    .price-range {
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .price-input {
      flex: 1;
      background: var(--card);
      color: var(--ink);
    }

    /* Wishlist Button Active State - UPDATED TO RED */
    .wishlist-btn.active {
      color: var(--error) !important;
      background: #fee2e2 !important;
      border-color: var(--error) !important;
    }

    .wishlist-btn.active:hover {
      background: #fecaca !important;
    }

    /* Product Detail Page Wishlist Button - UPDATED TO RED */
    #detailWishlistBtn.active {
      background: var(--error) !important;
      color: white !important;
      border-color: var(--error) !important;
    }

    #detailWishlistBtn.active:hover {
      background: #dc2626 !important;
    }

    /* Size and Color Selection */
    .size-color-options {
      display: flex;
      gap: 12px;
      margin-bottom: 16px;
    }

    .size-option, .color-option {
      padding: 8px 12px;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      cursor: pointer;
      transition: all 0.2s ease;
      background: var(--card);
      color: var(--ink);
    }

    .size-option:hover, .color-option:hover {
      border-color: var(--accent);
    }

    .size-option.selected, .color-option.selected {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
    }

    /* Simple Price Range Slider */
    .price-range-slider {
      margin: 16px 0;
    }

    .price-slider {
      width: 100%;
      height: 5px;
      border-radius: 5px;
      background: #ddd;
      outline: none;
      -webkit-appearance: none;
    }

    .price-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: var(--accent);
      cursor: pointer;
    }

    .price-slider::-moz-range-thumb {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: var(--accent);
      cursor: pointer;
      border: none;
    }

    .price-range-values {
      display: flex;
      justify-content: space-between;
      margin-top: 8px;
      font-size: 14px;
      color: var(--muted);
    }

    /* Remove blue overlay from product images */
    .product-img-slider:focus,
    .product-detail-main-image:focus,
    .gallery-main:focus {
      outline: none;
      box-shadow: none;
    }

    /* Product image container fixes */
    .product-img-slider-container,
    .product-detail-gallery,
    .gallery-main {
      background-color: transparent !important;
    }

    /* NEW: Remove blue highlight from product and order pages */
    .card,
    .card-body,
    .product-img-slider-container,
    .gallery-main,
    .product-detail-main-image,
    .product-detail-thumbnail,
    .slider-item,
    .order-card,
    .order-detail-page {
      -webkit-tap-highlight-color: transparent;
      outline: none;
    }

    /* Keep blue highlight only for menu items */
    .menu-item {
      -webkit-tap-highlight-color: rgba(37, 99, 235, 0.1);
    }

    /* Size validation error styling */
    .size-validation-error {
      color: var(--error);
      font-size: 14px;
      margin-top: 8px;
      display: none;
    }

    .size-validation-error.show {
      display: block;
    }

    /* Cancel Order Flow Modal */
    .cancel-confirm-modal {
      background: var(--card);
      border-radius: var(--radius);
      padding: 24px;
      box-shadow: var(--shadow-hover);
      max-width: 500px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
    }

    .cancel-confirm-modal h3 {
      margin-top: 0;
      margin-bottom: 16px;
      color: var(--ink);
    }

    .cancel-confirm-modal .payment-charge-note {
      background: #fef3c7;
      border: 1px solid #f59e0b;
      border-radius: var(--radius);
      padding: 16px;
      margin: 16px 0;
      color: #92400e;
    }

    .cancel-confirm-modal .refund-calculation {
      background: #f8fafc;
      border-radius: var(--radius);
      padding: 16px;
      margin: 16px 0;
    }

    [data-theme="dark"] .cancel-confirm-modal .refund-calculation {
      background: #1e293b;
    }

    .cancel-confirm-modal .refund-calculation p {
      margin: 8px 0;
    }

    .cancel-confirm-actions {
      display: flex;
      gap: 12px;
      margin-top: 20px;
      justify-content: flex-end;
    }

    /* NEW: Login/Signup Modal Styles */
    .auth-modal {
      background: var(--card);
      border-radius: var(--radius);
      padding: 32px;
      box-shadow: var(--shadow-hover);
      max-width: 450px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
      position: relative;
    }
    
    .auth-modal h3 {
      margin-top: 0;
      margin-bottom: 24px;
      color: var(--ink);
      text-align: center;
      font-size: 24px;
    }
    
    .auth-tabs {
      display: flex;
      margin-bottom: 24px;
      border-bottom: 1px solid var(--border);
    }
    
    .auth-tab {
      flex: 1;
      padding: 12px;
      text-align: center;
      cursor: pointer;
      font-weight: 600;
      color: var(--muted);
      transition: all 0.2s ease;
      border-bottom: 2px solid transparent;
    }
    
    .auth-tab.active {
      color: var(--accent);
      border-bottom-color: var(--accent);
    }
    
    .auth-form {
      display: none;
    }
    
    .auth-form.active {
      display: block;
    }
    
    .auth-form-group {
      margin-bottom: 16px;
    }
    
    .auth-form-footer {
      margin-top: 24px;
      text-align: center;
      font-size: 14px;
      color: var(--muted);
    }
    
    .auth-form-footer a {
      color: var(--accent);
      cursor: pointer;
    }
    
    .user-profile {
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      position: relative;
    }
    
    .user-avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: var(--accent);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 14px;
    }
    
    .user-name {
      font-weight: 600;
      color: var(--ink);
    }
    
    /* Account Dropdown Menu */
    .account-dropdown {
      position: absolute;
      top: 100%;
      right: 0;
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow-hover);
      min-width: 200px;
      padding: 8px 0;
      margin-top: 8px;
      z-index: 100;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: all 0.2s ease;
    }
    
    .account-dropdown.active {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }
    
    .account-dropdown-item {
      display: flex;
      align-items: center;
      padding: 12px 16px;
      color: var(--ink);
      transition: all 0.2s ease;
      cursor: pointer;
    }
    
    .account-dropdown-item:hover {
      background: #f1f5f9;
    }
    
    .account-dropdown-item svg {
      margin-right: 12px;
      width: 16px;
      height: 16px;
    }
    
    /* NEW: Close button for auth modal */
    .auth-close {
      position: absolute;
      top: 16px;
      right: 16px;
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: var(--muted);
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: all 0.2s ease;
    }
    
    .auth-close:hover {
      background: #f1f5f9;
      color: var(--ink);
    }
    
    /* NEW: Google Sign-In Button */
    .google-signin-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      width: 100%;
      padding: 12px 16px;
      background: white;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      margin-top: 16px;
    }
    
    .google-signin-btn:hover {
      background: #f8fafc;
      border-color: var(--accent);
    }
    
    .google-signin-btn img {
      width: 18px;
      height: 18px;
    }
    
    .divider {
      display: flex;
      align-items: center;
      margin: 20px 0;
      color: var(--muted);
      font-size: 14px;
    }
    
    .divider::before,
    .divider::after {
      content: '';
      flex: 1;
      border-bottom: 1px solid var(--border);
    }
    
    .divider span {
      padding: 0 12px;
    }

    /* NEW: Image Zoom Modal */
    .zoom-modal {
      background: rgba(0, 0, 0, 0.9);
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    .zoom-content {
      position: relative;
      max-width: 90%;
      max-height: 90%;
    }
    
    .zoom-image {
      max-width: 100%;
      max-height: 90vh;
      object-fit: contain;
    }
    
    .zoom-close {
      position: absolute;
      top: 20px;
      right: 20px;
      background: rgba(255, 255, 255, 0.2);
      color: white;
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 20px;
      transition: all 0.2s ease;
    }
    
    .zoom-close:hover {
      background: rgba(255, 255, 255, 0.3);
    }
    
    .zoom-controls {
      position: absolute;
      bottom: 20px;
      left: 0;
      right: 0;
      display: flex;
      justify-content: center;
      gap: 10px;
    }
    
    .zoom-btn {
      background: rgba(255, 255, 255, 0.2);
      color: white;
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 18px;
      transition: all 0.2s ease;
    }
    
    .zoom-btn:hover {
      background: rgba(255, 255, 255, 0.3);
    }

    /* NEW: Enhanced Product Gallery */
    .product-gallery-zoom {
      position: relative;
      cursor: zoom-in;
    }
    
    .zoom-indicator {
      position: absolute;
      bottom: 10px;
      right: 10px;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .product-gallery-zoom:hover .zoom-indicator {
      opacity: 1;
    }

    /* NEW: Forgot Password Form Styles */
    .forgot-password-form {
      display: none;
    }
    
    .forgot-password-form.active {
      display: block;
    }
    
    .back-to-login {
      color: var(--accent);
      cursor: pointer;
      font-weight: 600;
      margin-top: 16px;
      text-align: center;
    }
    
    .back-to-login:hover {
      color: var(--accent-hover);
    }

    /* === Clean Animated Banners CSS === */
    .hero-messages {
      margin-top: 10px;
      font-size: 16px;
      color: var(--muted);
      font-weight: 600;
      display: flex;
      justify-content: center;
      gap: 24px;
      overflow: hidden;
      position: relative;
    }
    .hero-messages span {
      opacity: 0;
      position: absolute;
      transition: opacity 0.6s ease;
    }
    .hero-messages span.active {
      opacity: 1;
      position: relative;
    }

    .highlight-strip {
      margin-top: 16px;
      padding: 10px 16px;
      border-radius: 8px;
      background: linear-gradient(90deg,#2563eb,#1d4ed8);
      color: white;
      font-weight: 600;
      text-align: center;
      animation: pulseStrip 4s infinite;
      cursor: pointer;
    }
    @keyframes pulseStrip {
      0%,100% { box-shadow: 0 0 0 rgba(37,99,235,0); }
      50% { box-shadow: 0 0 16px rgba(37,99,235,0.35); }
    }

    /* Search Results Grid */
    #homeSearchResults {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
      margin-top: 20px;
    }

    /* Trending Now Section */
    .trending-section {
      margin: 30px 0;
    }

    .trending-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .trending-title {
      font-size: 20px;
      font-weight: 700;
    }

    /* NEW: Banner Carousel Styles */
    .banner-carousel {
      position: relative;
      width: 100%;
      height: 200px;
      border-radius: var(--radius);
      overflow: hidden;
      margin-bottom: 24px;
      box-shadow: var(--shadow);
    }

    .banner-track {
      display: flex;
      width: 100%;
      height: 100%;
      transition: transform 0.5s ease;
    }

    .banner-slide {
      min-width: 100%;
      height: 100%;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
    }

    .banner-controls {
      position: absolute;
      bottom: 15px;
      left: 0;
      right: 0;
      display: flex;
      justify-content: center;
      gap: 8px;
      z-index: 10;
    }

    .banner-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.5);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .banner-dot.active {
      background: rgba(255, 255, 255, 1);
      transform: scale(1.2);
    }

    /* NEW: Category Circles Styles */
    .category-circles {
      margin: 30px 0;
    }

    .category-circles-title {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 16px;
      text-align: center;
    }

    .category-circles-container {
      display: flex;
      gap: 20px;
      overflow-x: auto;
      padding: 10px 0;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }

    .category-circles-container::-webkit-scrollbar {
      display: none;
    }

    .category-circle {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      min-width: 80px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .category-circle:hover {
      transform: translateY(-5px);
    }

    .category-circle-image {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      border: 2px solid var(--border);
      transition: all 0.2s ease;
    }

    .category-circle:hover .category-circle-image {
      border-color: var(--accent);
    }

    .category-circle-name {
      font-size: 12px;
      font-weight: 600;
      text-align: center;
      color: var(--ink);
    }

    /* NEW: Contact WhatsApp Button */
    .whatsapp-contact-button {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: #25D366;
      color: white;
      padding: 12px 20px;
      border-radius: var(--radius);
      font-weight: 600;
      margin-top: 12px;
      transition: all 0.2s ease;
      cursor: pointer;
    }

    .whatsapp-contact-button:hover {
      background: #128C7E;
      transform: translateY(-2px);
    }

    /* NEW: Enhanced Product Image for Mobile */
    .product-detail-main-image.mobile-optimized {
      height: 60vh;
      max-height: 500px;
    }

    /* NEW: Professional Enhancements */
    .professional-badge {
      position: absolute;
      top: 10px;
      right: 10px;
      background: var(--accent);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 10px;
      font-weight: 700;
      z-index: 2;
    }

    .professional-tag {
      display: inline-block;
      background: var(--accent);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 10px;
      font-weight: 600;
      margin-left: 8px;
    }

    .professional-header {
      background: linear-gradient(135deg, var(--accent), var(--accent-hover));
      color: white;
      padding: 16px;
      border-radius: var(--radius);
      margin-bottom: 20px;
      text-align: center;
    }

    /* NEW: Account Page Styles */
    .account-page {
      padding: 20px;
    }

    .account-header {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 24px;
      padding-bottom: 16px;
      border-bottom: 1px solid var(--border);
    }

    .account-avatar {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: var(--accent);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 32px;
      font-weight: 700;
    }

    .account-info h2 {
      margin: 0 0 4px 0;
      font-size: 24px;
    }

    .account-info p {
      margin: 0;
      color: var(--muted);
    }

    .account-menu {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
      margin-bottom: 24px;
    }

    .account-menu-item {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
      cursor: pointer;
      transition: all 0.2s ease;
      text-align: center;
    }

    .account-menu-item:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-hover);
      border-color: var(--accent);
    }

    .account-menu-item svg {
      width: 24px;
      height: 24px;
      color: var(--accent);
    }

    .account-menu-item span {
      font-weight: 600;
      font-size: 14px;
    }

    .account-section {
      background: var(--card);
      border-radius: var(--radius);
      padding: 24px;
      box-shadow: var(--shadow);
      margin-bottom: 24px;
      border: 1px solid var(--border);
    }

    .account-section h3 {
      margin-top: 0;
      margin-bottom: 16px;
      color: var(--accent);
      font-size: 18px;
    }

    .profile-form {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .address-card {
      background: #f8fafc;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 16px;
      margin-bottom: 12px;
      transition: all 0.2s ease;
    }

    [data-theme="dark"] .address-card {
      background: #1e293b;
    }

    .address-card:hover {
      border-color: var(--accent);
    }

    .address-card.selected {
      border-color: var(--accent);
      background: var(--ring);
    }

    .address-actions {
      display: flex;
      gap: 8px;
      margin-top: 12px;
    }

    .coupon-card {
      background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 16px;
      margin-bottom: 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    [data-theme="dark"] .coupon-card {
      background: linear-gradient(135deg, #1e3a8a 0%, #0f172a 100%);
    }

    .coupon-code {
      font-weight: 700;
      color: var(--accent);
      font-size: 16px;
    }

    .coupon-desc {
      color: var(--muted);
      font-size: 14px;
    }

    .notification-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 0;
      border-bottom: 1px solid var(--border);
    }

    .notification-item:last-child {
      border-bottom: none;
    }

    .notification-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: #f1f5f9;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--accent);
    }

    .notification-content {
      flex: 1;
    }

    .notification-title {
      font-weight: 600;
      margin-bottom: 4px;
    }

    .notification-desc {
      color: var(--muted);
      font-size: 14px;
    }

    .notification-time {
      color: var(--muted-light);
      font-size: 12px;
    }

    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 50px;
      height: 24px;
    }

    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: .4s;
      border-radius: 24px;
    }

    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 16px;
      width: 16px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }

    input:checked + .toggle-slider {
      background-color: var(--accent);
    }

    input:checked + .toggle-slider:before {
      transform: translateX(26px);
    }

    .setting-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 0;
      border-bottom: 1px solid var(--border);
    }

    .setting-item:last-child {
      border-bottom: none;
    }

    .setting-info h4 {
      margin: 0 0 4px 0;
      font-size: 14px;
      font-weight: 600;
    }

    .setting-info p {
      margin: 0;
      color: var(--muted);
      font-size: 12px;
    }

    /* NEW: Footer Styles */
    .footer-container {
      max-width: 1100px;
      margin: 0 auto;
      padding: 0 20px;
    }

    .footer-content {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 40px;
      margin-bottom: 30px;
      text-align: left;
    }

    .footer-section h3 {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 16px;
      color: var(--ink);
    }

    .footer-links {
      list-style: none;
    }

    .footer-links li {
      margin-bottom: 10px;
    }

    .footer-links a {
      color: var(--muted);
      transition: color 0.2s ease;
      cursor: pointer;
    }

    .footer-links a:hover {
      color: var(--accent);
    }

    .contact-info {
      color: var(--muted);
    }

    .contact-info p {
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .social-links {
      display: flex;
      gap: 15px;
      margin-top: 20px;
    }

    .social-link {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: var(--card);
      color: var(--ink);
      transition: all 0.2s ease;
      border: 1px solid var(--border);
    }

    .social-link:hover {
      background: var(--accent);
      color: white;
      transform: translateY(-2px);
    }

    .copyright {
      text-align: center;
      padding: 20px 0;
      background-color: var(--card);
      color: var(--muted);
      font-size: 14px;
      border-top: 1px solid var(--border);
      transition: var(--transition);
    }

    /* Social Media Icons in Mobile Menu */
    .social-menu-item {
      display: flex;
      align-items: center;
      padding: 12px 20px;
      color: var(--ink);
      transition: all 0.2s ease;
      cursor: pointer;
      justify-content: center;
    }
    
    .social-menu-item:hover {
      background: #f1f5f9;
    }
    
    .social-menu-item svg {
      width: 24px;
      height: 24px;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .header-inner {
        flex-wrap: wrap;
      }
      
      .search-wrap {
        margin-left: 0;
        order: 3;
        width: 100%;
        max-width: 100%;
      }
      
      .row {
        flex-direction: column;
      }
      
      /* Keep 2 columns on mobile */
      .product-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
      }
      
      .steps {
        gap: 6px;
      }
      
      .step-pill {
        font-size: 12px;
        padding: 8px 12px;
      }
      
      .policy-content {
        padding: 16px;
      }
      
      .categories {
        overflow-x: auto;
        padding-bottom: 8px;
        justify-content: flex-start;
      }

      .carousel-control {
        width: 32px;
        height: 32px;
        font-size: 14px;
      }
      
      .product-detail-container {
        flex-direction: column;
      }
      
      .product-detail-main-image {
        height: 60vh;
        max-height: 500px;
      }
      
      .order-details {
        flex-direction: column;
      }
      
      .order-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
      }
      
      .order-actions {
        justify-content: flex-start;
      }
      
      .cancellation-modal {
        padding: 16px;
      }
      
      .cancellation-actions {
        flex-direction: column;
      }
      
      .alert-modal {
        padding: 16px;
      }
      
      .alert-modal-buttons {
        flex-direction: column;
      }
      
      .quantity-control button {
        width: 36px;
        height: 36px;
      }
      
      /* Show menu icon on mobile */
      .menu-icon {
        display: flex;
      }
      
      /* Hide some CTA buttons on mobile to make space */
      .cta .btn:not(:last-child) {
        display: none;
      }
      
      /* Banner carousel mobile */
      .banner-carousel {
        height: 150px;
      }
      
      /* Category circles mobile */
      .category-circles-container {
        gap: 15px;
      }
      
      .category-circle {
        min-width: 70px;
      }
      
      .category-circle-image {
        width: 60px;
        height: 60px;
      }

      /* Account page mobile */
      .account-menu {
        grid-template-columns: 1fr;
      }

      .account-header {
        flex-direction: column;
        text-align: center;
      }

      /* Footer mobile */
      .footer-content {
        grid-template-columns: 1fr;
        gap: 30px;
      }

      /* Social menu items mobile */
      .social-menu-item {
        padding: 15px 20px;
      }
    }

    @media (max-width: 480px) {
      .container {
        padding: 0 16px;
      }
      
      .hero {
        padding: 20px;
      }
      
      .card-panel {
        padding: 16px;
      }
      
      .product-detail-main-image {
        height: 50vh;
        max-height: 400px;
      }
      
      .product-detail-thumbnail {
        width: 60px;
        height: 60px;
      }
      
      /* Keep 2 columns on very small screens */
      .product-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
      }
      
      /* Banner carousel mobile */
      .banner-carousel {
        height: 120px;
      }
    }
  </style>

</head>
<body>
  <!-- Mobile Menu Overlay -->
  <div class="menu-overlay" id="menuOverlay"></div>
  
  <!-- Mobile Menu -->
  <div class="mobile-menu" id="mobileMenu">
    <div class="menu-header">
      <div class="brand">
        <span class="chip">BUYZO</span>
        <span>Cart</span>
      </div>
      <div class="menu-close" id="menuClose">×</div>
    </div>
    <div class="menu-items">
      <div class="menu-item" onclick="showPage('homePage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
          <polyline points="9 22 9 12 15 12 15 22"></polyline>
        </svg>
        Home
      </div>
      <div class="menu-item" onclick="showPage('productsPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="3" y="3" width="7" height="7"></rect>
          <rect x="14" y="3" width="7" height="7"></rect>
          <rect x="14" y="14" width="7" height="7"></rect>
          <rect x="3" y="14" width="7" height="7"></rect>
        </svg>
        Products
      </div>
      <div class="menu-item" onclick="checkAuthAndShowPage('myOrdersPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="9" cy="21" r="1"></circle>
          <circle cx="20" cy="21" r="1"></circle>
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
        </svg>
        My Orders
      </div>
      <div class="menu-item" onclick="checkAuthAndShowPage('wishlistPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
        </svg>
        Wishlist
      </div>
      <div class="menu-item" onclick="showPage('cancellationPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="15" y1="9" x2="9" y2="15"></line>
          <line x1="9" y1="9" x2="15" y2="15"></line>
        </svg>
        Refund & Cancellation
      </div>
      <div class="menu-item" onclick="showPage('termsPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
          <polyline points="10 9 9 9 8 9"></polyline>
        </svg>
        Terms & Conditions
      </div>
      <div class="menu-item" onclick="showPage('shippingPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 15a5 5 0 0 1 5-5h8a5 5 0 0 1 5 5v0a5 5 0 0 1-5 5H8a5 5 0 0 1-5-5v0z"></path>
          <path d="M3 15V9a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v6"></path>
          <path d="M9 19h6"></path>
        </svg>
        Shipping Policy
      </div>
      <div class="menu-item" onclick="showPage('privacyPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
        </svg>
        Privacy Policy
      </div>
      <div class="menu-item" onclick="showPage('contactPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
          <polyline points="22,6 12,13 2,6"></polyline>
        </svg>
        Contact Us
      </div>
      
      <!-- Additional Menu Items -->
      <div class="menu-item" onclick="showPage('aboutPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10"></circle>
          <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
          <line x1="12" y1="17" x2="12.01" y2="17"></line>
        </svg>
        About Us
      </div>
      
      <!-- Social Media Links in Mobile Menu - Icons Only -->
      <div style="display: flex; justify-content: center; gap: 10px; padding: 15px 20px; border-top: 1px solid var(--border);">
        <div class="social-menu-item" onclick="window.open('https://www.instagram.com/buyzo.cart?igsh=d2Mxc2EwMW45cWwy', '_blank'); closeMenu();">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#E4405F">
            <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
          </svg>
        </div>
        <div class="social-menu-item" onclick="window.open('https://www.youtube.com/@BuyzoCart', '_blank'); closeMenu();">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#FF0000">
            <path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/>
          </svg>
        </div>
        <div class="social-menu-item" onclick="window.open('https://t.me/buyzocartshop', '_blank'); closeMenu();">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#26A5E4">
            <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.894 8.221l-1.97 9.28c-.145.658-.537.818-1.084.508l-3-2.21-1.447 1.394c-.14.141-.259.259-.374.261l.213-3.053 5.56-5.022c.24-.213-.054-.334-.373-.121l-6.869 4.326-2.96-.924c-.64-.203-.658-.64.136-.954l11.566-4.458c.538-.196 1.006.128.832.941z"/>
          </svg>
        </div>
        <div class="social-menu-item" onclick="window.open('https://www.facebook.com/share/17G9Bu9fmH/', '_blank'); closeMenu();">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#1877F2">
            <path d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"/>
          </svg>
        </div>
      </div>
      
      <!-- Login/Signup at the bottom of mobile menu -->
      <div class="menu-item" id="mobileLoginBtn" onclick="showLoginModal(); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
          <circle cx="12" cy="7" r="4"></circle>
        </svg>
        Login / Sign Up
      </div>
      <div class="menu-item" id="mobileUserProfile" style="display:none;" onclick="showPage('accountPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
          <circle cx="12" cy="7" r="4"></circle>
        </svg>
        <span id="mobileUserName">My Account</span>
      </div>
    </div>
  </div>

  <header>
    <div class="header-inner">
      <div class="menu-icon" id="menuIcon">
        <span></span>
        <span></span>
        <span></span>
      </div>
      <div class="brand" aria-label="Buyzo Cart brand" onclick="showPage('homePage')">
        <span class="chip">BUYZO</span>
        <span>Cart</span>
      </div>
      <div class="cta">
        <!-- Theme Toggle Button -->
        <button class="theme-toggle" id="themeToggle" title="Toggle Light/Dark Mode">
          <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
          </svg>
          <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
          </svg>
        </button>
        
        <button class="btn secondary" id="openContactTop" title="Contact">Contact</button>
        <button class="btn secondary" id="openMyOrdersTop" title="My Orders">My Orders
          <span id="ordersNotification" class="notification-badge" style="display:none"></span>
        </button>
        <!-- Login/Signup buttons -->
        <button class="btn secondary" id="openLoginTop" title="Login">Login</button>
        <div class="user-profile" id="userProfile" style="display:none;">
          <div class="user-avatar" id="userAvatar">U</div>
          <div class="user-name" id="userName">User</div>
          <div class="account-dropdown" id="accountDropdown">
            <div class="account-dropdown-item" id="accountEmail">user@example.com</div>
            <div class="account-dropdown-item" onclick="showPage('accountPage')">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
              </svg>
              My Account
            </div>
            <div class="account-dropdown-item" onclick="showPage('myOrdersPage')">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="9" cy="21" r="1"></circle>
                <circle cx="20" cy="21" r="1"></circle>
                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
              </svg>
              My Orders
            </div>
            <div class="account-dropdown-item" onclick="showPage('wishlistPage')">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
              </svg>
              Wishlist
            </div>
            <div class="account-dropdown-item" onclick="logout()">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
              </svg>
              Logout
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- Home Page -->
    <section class="page active" id="homePage">
      
      <section class="hero">
        <h1>Welcome to <span style="color:var(--accent)">Buyzo Cart</span></h1>
        <p>Clean, fast checkout. Hand‑picked products. Fully responsive UI.</p>

        <!-- Rotating subtle messages -->
        <div class="hero-messages" id="heroMessages">
          <span class="active">🔥 Big Sale Today</span>
          <span>🚚 Free Shipping over ₹999</span>
          <span>✨ New Arrivals Just Dropped</span>
        </div>

        <!-- Highlight CTA strip -->
        <div class="highlight-strip" onclick="showPage('productsPage')">
          Limited Time Offer: Flat 40% OFF on all Fashion Items — <u>Shop Now →</u>
        </div>
      </section>

      <!-- NEW: Banner Carousel -->
      <div class="banner-carousel" id="bannerCarousel">
        <div class="banner-track" id="bannerTrack"></div>
        <div class="banner-controls" id="bannerControls"></div>
      </div>

      <!-- TRENDING NOW SECTION -->
      <div class="trending-section">
        <div class="trending-header">
          <h2 class="trending-title">Trending Now</h2>
        </div>
        <div class="slider-container">
          <div class="slider-track" id="productSlider"></div>
        </div>
      </div>

      <!-- NEW: Category Circles Section -->
      <div class="category-circles">
        <h2 class="category-circles-title">Shop by Category</h2>
        <div class="category-circles-container" id="categoryCirclesContainer"></div>
      </div>

      <!-- SEARCH BAR -->
      <div class="search-wrap">
        <input id="homeSearchInput" placeholder="Search products (e.g. 'Sneakers', 'T-shirt', 'Earbuds')" />
      </div>

      <!-- Search Results Grid -->
      <div id="homeSearchResults" style="display:none;"></div>

      <div class="steps center">
        <div class="step-pill" id="pill-products">1 • Products</div>
        <div class="step-pill disabled" id="pill-order">2 • Order Details</div>
        <div class="step-pill disabled" id="pill-user">3 • Your Info</div>
        <div class="step-pill disabled" id="pill-pay">4 • Payment</div>
      </div>

      <div class="card-panel" style="display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap">
        <h2 style="margin:0">Featured Products</h2>
      </div>

      <!-- Featured Products Grid -->
      <div class="product-grid" id="homeProductGrid">
        <!-- Product cards will be loaded here -->
      </div>

      <!-- Recently Viewed Products Section -->
      <div class="recently-viewed" id="recentlyViewedSection" style="display:none;">
        <h2 class="recently-viewed-title">Recently Viewed</h2>
        <div class="slider-container">
          <div class="slider-track" id="recentlyViewedSlider"></div>
        </div>
      </div>

      <!-- Newsletter Subscription Section -->
      <div class="newsletter-section">
        <h2 class="newsletter-title">Stay Updated</h2>
        <p class="newsletter-desc">Subscribe to our newsletter for exclusive deals, new arrivals, and special offers delivered to your inbox.</p>
        <div class="newsletter-form">
          <input type="email" class="newsletter-input" placeholder="Enter your email" id="newsletterEmail" />
          <button class="newsletter-btn" id="subscribeBtn">Subscribe</button>
        </div>
      </div>
    </section>

    <!-- Products Page -->
    <section class="page" id="productsPage">
      <div class="card-panel" style="display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap">
        <h2 style="margin:0">All Products</h2>
      </div>

      <!-- Price Filter - Simplified -->
      <div class="price-filter">
        <div class="price-filter-title">Filter by Price</div>
        <div class="price-range-slider">
          <input type="range" min="0" max="5000" value="0" class="price-slider" id="minPriceSlider">
          <input type="range" min="0" max="5000" value="5000" class="price-slider" id="maxPriceSlider">
          <div class="price-range-values">
            <span id="minPriceValue">₹0</span>
            <span id="maxPriceValue">₹5000</span>
          </div>
        </div>
        <div class="price-range" style="margin-top: 12px;">
          <input type="number" class="price-input" id="minPrice" placeholder="Min" min="0" />
          <span>to</span>
          <input type="number" class="price-input" id="maxPrice" placeholder="Max" min="0" />
          <button class="btn secondary" id="applyPriceFilter">Apply</button>
          <button class="btn secondary" id="resetPriceFilter">Reset</button>
        </div>
      </div>

      <!-- Search bar -->
      <div class="search-wrap">
        <input id="searchInput" placeholder="Search products (e.g. 'Sneakers', 'T-shirt', 'Earbuds')" />
      </div>

      <!-- Category Navigation -->
      <div class="categories" id="categoriesContainer">
        <!-- Categories will be loaded from Firebase by admin -->
      </div>

      <div class="product-grid" id="productGrid">
        <!-- Product cards will be loaded here -->
      </div>
    </section>

    <!-- Product Detail Page -->
    <section class="page" id="productDetailPage">
      <div class="product-detail-page">
        <!-- Breadcrumb Navigation -->
        <div class="breadcrumb">
          <a href="#" onclick="showPage('homePage')">Home</a>
          <span>></span>
          <a href="#" onclick="showPage('productsPage')">Products</a>
          <span>></span>
          <span id="breadcrumbProductName">Product Details</span>
        </div>
        
        <div class="back-to-products" onclick="showPage('productsPage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Products
        </div>
        
        <div class="product-detail-container">
          <div class="product-detail-gallery">
            <!-- Enhanced gallery with zoom -->
            <div class="product-gallery-zoom">
              <div class="product-detail-main-image mobile-optimized" id="detailMainImage" onclick="openImageZoom()">
                <button class="detail-carousel-control prev">&#10094;</button>
                <button class="detail-carousel-control next">&#10095;</button>
                <div class="detail-carousel-dots" id="detailCarouselDots"></div>
                <div class="zoom-indicator">Click to zoom</div>
              </div>
            </div>
            <div class="product-detail-thumbnails" id="detailThumbnails"></div>
          </div>
          
          <div class="product-detail-info">
            <h1 class="product-detail-title" id="detailTitle"></h1>
            <!-- Product SKU -->
            <div class="product-sku" id="detailSku"></div>
            <div class="product-detail-price" id="detailPrice"></div>
            <!-- Stock Status -->
            <div class="stock-status in-stock" id="detailStockStatus">In Stock</div>
            <div class="product-detail-desc" id="detailDesc"></div>
            <div class="product-detail-full-desc" id="detailFullDesc"></div>
            
            <!-- NEW: Share Link Section -->
            <div class="product-detail-meta" style="margin-top: 20px;">
              <h4>Share This Product</h4>
              <div style="display: flex; gap: 10px; margin-top: 10px;">
                <input type="text" id="productShareLink" readonly style="flex: 1; padding: 10px; border: 1px solid var(--border); border-radius: var(--radius); background: #f8fafc;">
                <button class="btn secondary" id="copyShareLink">Copy Link</button>
              </div>
            </div>
            
            <!-- Social Sharing Buttons -->
            <div class="social-sharing">
              <button class="share-btn facebook" data-platform="facebook">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                </svg>
                Share
              </button>
              <button class="share-btn twitter" data-platform="twitter">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
                </svg>
                Tweet
              </button>
              <button class="share-btn whatsapp" data-platform="whatsapp">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
                </svg>
                Share
              </button>
            </div>
            
            <div style="display:flex;gap:12px;flex-wrap:wrap;margin-top:20px;">
              <button class="btn" id="detailOrderBtn">Order Now</button>
              <button class="btn secondary" id="detailWishlistBtn">Add to Wishlist</button>
              <button class="btn secondary" onclick="showPage('productsPage')">Continue Shopping</button>
            </div>
          </div>
        </div>

        <!-- Similar Products Section -->
        <div class="similar-products">
          <h2 class="similar-title">Similar Products</h2>
          <div class="slider-container">
            <div class="slider-track" id="similarProductsSlider"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Order Details Page -->
    <section class="page" id="orderPage">
      <div class="card-panel">
        <h3 style="margin-top:0">Order Details</h3>
        <p style="color:var(--muted)">Choose size/quantity and confirm product before entering contact or payment details.</p>

        <div id="selectedProductCard" class="card" style="margin-bottom:16px">
          <div style="display:flex;gap:16px;flex-direction:column">
            <div id="galleryMain" class="gallery-main">
              <button class="carousel-control prev">&#10094;</button>
              <button class="carousel-control next">&#10095;</button>
              <div class="carousel-dots"></div>
            </div>
          </div>
          <div class="card-body">
            <div class="title" id="spTitle"></div>
            <div class="price" id="spPrice"></div>
            <div class="badge" id="spDesc"></div>
            
            <!-- Product Details Section -->
            <div class="product-details">
              <h4>Product Details</h4>
              <p id="spFullDesc"></p>
            </div>

            <div style="margin-top:auto">
              <!-- Updated: Size/Color Selection -->
              <label>Select size / colour</label>
              <div class="size-color-options">
                <div class="size-option selected" data-value="S">S</div>
                <div class="size-option" data-value="M">M</div>
                <div class="size-option" data-value="L">L</div>
                <div class="size-option" data-value="XL">XL</div>
              </div>
              <div class="size-validation-error" id="sizeValidationError">Please select a size to continue</div>

            <div style="height:12px"></div>
              <label>Quantity</label>
              <!-- Replaced with plus/minus quantity control -->
              <div class="quantity-control">
                <button class="qty-minus">-</button>
                <input type="number" id="qtySelect" min="1" value="1" max="10" readonly>
                <button class="qty-plus">+</button>
              </div>

              <div style="height:16px"></div>
              <div style="display:flex;gap:10px;flex-wrap:wrap">
                <button id="toUserInfo" class="btn" style="flex:1">Continue → Provide Your Info</button>
                <button id="backToProducts" class="btn secondary" style="flex:1">Back to Products</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- User Info Page -->
    <section class="page" id="userPage">
      <div class="card-panel">
        <h3 style="margin-top:0">Your Contact & Delivery Address</h3>
        <p style="color:var(--muted)">We do not use saved addresses. Please provide a fresh delivery address for this order.</p>

        <div style="display:flex;gap:16px;flex-direction:column">
          <div>
            <label>Full Name *</label>
            <input id="fullname" placeholder="Enter full name" />
          </div>
          <div class="row">
            <div class="col"><label>Mobile Number *</label><input id="mobile" placeholder="10-digit mobile number" /></div>
            <div class="col"><label>Pincode *</label><input id="pincode" placeholder="Pincode" /></div>
          </div>
          <div class="row">
            <div class="col"><label>City *</label><input id="city" /></div>
            <div class="col"><label>State *</label><input id="state" /></div>
          </div>
          <div>
            <label>House / Street *</label>
            <input id="house" />
          </div>
          <div style="display:flex;gap:10px;margin-top:16px;flex-wrap:wrap">
            <button id="toPayment" class="btn" style="flex:1">Continue to Payment</button>
            <button id="editOrder" class="btn secondary" style="flex:1">Edit Order Details</button>
            <button id="saveUserInfo" class="btn secondary" style="flex:1">Save Information</button>
          </div>
          <div style="margin-top:16px;color:var(--muted);font-size:14px">
            <strong>Note:</strong> If you prefer to change products, click "Edit Order Details" or use "Products" to go back.
          </div>
        </div>
      </div>
    </section>

    <!-- Payment Page -->
    <section class="page" id="paymentPage">
      <div class="card-panel">
        <h3 style="margin-top:0">Payment Method</h3>
        <div style="display:flex;gap:12px;flex-wrap:wrap;margin-bottom:16px">
          <label style="flex:1;display:flex;align-items:center;gap:8px;padding:12px;border:1px solid var(--border);border-radius:var(--radius);cursor:pointer;">
            <input type="radio" name="pay" value="prepaid" checked /> Prepaid (UPI / Card)
          </label>
          <label style="flex:1;display:flex;align-items:center;gap:8px;padding:12px;border:1px solid var(--border);border-radius:var(--radius);cursor:pointer;">
            <input type="radio" name="pay" value="cod" /> Cash on Delivery (Note: may increase processing time)
          </label>
        </div>
        
        <div class="summary">
          <div style="display:flex;justify-content:space-between;margin-bottom:8px"><div>Product</div><div id="sumProduct">-</div></div>
          <div style="display:flex;justify-content:space-between;margin-bottom:8px"><div>Qty</div><div id="sumQty">-</div></div>
          <div style="display:flex;justify-content:space-between;margin-bottom:8px"><div>Price</div><div id="sumPrice">-</div></div>
          <div style="display:flex;justify-content:space-between;margin-bottom:12px;padding-bottom:8px;border-bottom:1px dashed var(--border)"><div>Delivery</div><div id="sumDel">₹50</div></div>
          <div style="display:flex;justify-content:space-between;font-weight:700;margin-top:8px;font-size:18px"><div>Total</div><div id="sumTotal">-</div></div>
        </div>
        
        <div style="height:16px"></div>
        <div style="display:flex;gap:12px;flex-wrap:wrap">
          <button id="confirmOrder" class="btn" style="flex:1">Confirm & Place Order</button>
          <button id="payBack" class="btn secondary" style="flex:1">Back</button>
        </div>
      </div>
    </section>

    <!-- Order Success (hidden) -->
    <section class="page center" id="successPage">
      <div class="card-panel" style="max-width:520px;margin:32px auto;padding:32px">
        <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="var(--success)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin:0 auto 16px">
          <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
          <polyline points="22 4 12 14.01 9 11.01"></polyline>
        </svg>
        <div style="font-size:24px;font-weight:700;color:var(--success);margin-bottom:8px">Thank You for Your Order!</div>
        <div style="margin-top:10px;color:var(--muted)">Your order has been placed successfully! We will confirm and process your order. Tracking will be shared once supplier ships it.</div>
        <div style="margin-top:24px;display:flex;gap:12px;justify-content:center;flex-wrap:wrap">
          <button id="goHome" class="btn">Back to Home</button>
          <button id="viewOrders" class="btn secondary">View My Orders</button>
        </div>
      </div>
    </section>

    <!-- My Orders Page -->
    <section class="page" id="myOrdersPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        
        <div class="orders-container">
          <h2>My Orders</h2>
          <p style="color:var(--muted);margin-bottom:24px">View and manage your recent orders</p>
          
          <div id="ordersList">
            <!-- Orders will be dynamically inserted here -->
          </div>
          
          <div id="noOrders" class="card-panel center" style="display:none">
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--muted-light)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="9" cy="21" r="1"></circle>
              <circle cx="20" cy="21" r="1"></circle>
              <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
            </svg>
            <h3 style="margin:16px 0 8px;color:var(--muted)">No orders yet</h3>
            <p style="color:var(--muted-light)">You haven't placed any orders yet. Start shopping to see your orders here.</p>
            <button class="btn" style="margin-top:16px" onclick="showPage('productsPage')">Start Shopping</button>
            </div>
        </div>
      </div>
    </section>

    <!-- Order Detail Page -->
    <section class="page" id="orderDetailPage">
      <div class="policy-page">
        <div class="back-button" onclick="showMyOrders(); showPage('myOrdersPage');">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to My Orders
        </div>
        
        <div class="orders-container">
          <h2>Order Details</h2>
          
          <div class="order-detail-page" id="orderDetailContent">
            <!-- Order details will be dynamically inserted here -->
          </div>
        </div>
      </div>
    </section>

    <!-- Wishlist Page -->
    <section class="page" id="wishlistPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        
        <div class="orders-container">
          <h2>My Wishlist</h2>
          <p style="color:var(--muted);margin-bottom:24px">Your favorite products</p>
          
          <div id="wishlistItems">
            <!-- Wishlist items will be dynamically inserted here -->
          </div>
          
          <div id="emptyWishlist" class="card-panel center" style="display:none">
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--muted-light)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
            <h3 style="margin:16px 0 8px;color:var(--muted)">Your wishlist is empty</h3>
            <p style="color:var(--muted-light)">You haven't added any products to your wishlist yet.</p>
            <button class="btn" style="margin-top:16px" onclick="showPage('productsPage')">Browse Products</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Refund & Cancellation Policy -->
    <section class="page" id="cancellationPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        
        <div class="policy-content">
          <h2>Refund & Cancellation Policy</h2>
          
          <h3>Cancellation Policy</h3>
          <p>You can cancel your order before it has been shipped. Once your order has been shipped, you can no longer cancel it. If you wish to cancel your order, please contact us immediately at <strong>buyzocartshop@gmail.com</strong> with your order details.</p>
          
          <h3>Refund Policy</h3>
          <p>We offer refunds only in cases where the product is defective, damaged, or not as described. Refunds will be processed to the original payment method within 7-14 business days after we receive the returned product.</p>
          
          <h3>Return Policy</h3>
          <p>To be eligible for a return, your item must be unused and in the same condition that you received it. It must also be in the original packaging. Some types of goods are exempt from being returned, such as perishable goods and personal care items.</p>
          
          <h3>Contact Us</h3>
          <p>If you have any questions about our Refund & Cancellation Policy, please contact us:</p>
          <ul>
            <li>Email: <strong>buyzocartshop@gmail.com</strong></li>
            <li>Help Center: <strong>buyzocart.help@gmail.com</strong></li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Terms & Conditions -->
    <section class="page" id="termsPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        
        <div class="policy-content">
          <h2>Terms & Conditions</h2>
          
          <h3>Introduction</h3>
          <p>Welcome to Buyzo Cart. These terms and conditions outline the rules and regulations for the use of our website and services.</p>
          
          <h3>Intellectual Property Rights</h3>
          <p>Other than the content you own, under these Terms, Buyzo Cart and/or its licensors own all the intellectual property rights and materials contained in this Website.</p>
          
          <h3>Restrictions</h3>
          <p>You are specifically restricted from all of the following:</p>
          <ul>
            <li>Publishing any Website material in any other media</li>
            <li>Selling, sublicensing and/or otherwise commercializing any Website material</li>
            <li>Publicly performing and/or showing any Website material</li>
            <li>Using this Website in any way that is or may be damaging to this Website</li>
            <li>Using this Website contrary to applicable laws and regulations</li>
          </ul>
          
          <h3>Your Content</h3>
          <p>In these Terms and Conditions, "Your Content" shall mean any audio, video, text, images or other material you choose to display on this Website.</p>
          
          <h3>No warranties</h3>
          <p>This Website is provided "as is," with all faults, and Buyzo Cart express no representations or warranties, of any kind related to this Website or the materials contained on this Website.</p>
          
          <h3>Limitation of liability</h3>
          <p>In no event shall Buyzo Cart, nor any of its officers, directors and employees, be held liable for anything arising out of or in any way connected with your use of this Website.</p>
          
          <h3>Indemnification</h3>
          <p>You hereby indemnify to the fullest extent Buyzo Cart from and against any and/or all liabilities, costs, demands, causes of action, damages and expenses arising in any way related to your breach of any of the provisions of these Terms.</p>
          
          <h3>Severability</h3>
          <p>If any provision of these Terms is found to be invalid under any applicable law, such provisions shall be deleted without affecting the remaining provisions herein.</p>
          
          <h3>Variation of Terms</h3>
          <p>Buyzo Cart is permitted to revise these Terms at any time as it sees fit, and by using this Website you are expected to review these Terms on a regular basis.</p>
          
          <h3>Governing Law & Jurisdiction</h3>
          <p>These Terms will be governed by and interpreted in accordance with the laws of India, and you submit to the non-exclusive jurisdiction of the courts located in India for the resolution of any disputes.</p>
        </div>
      </div>
    </section>

    <!-- Shipping Policy -->
    <section class="page" id="shippingPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        
        <div class="policy-content">
          <h2>Shipping Policy</h2>
          
          <h3>Shipping Locations</h3>
          <p>We currently ship to all major cities and towns across India. For remote locations, additional shipping charges may apply.</p>
          
          <h3>Shipping Time</h3>
          <p>Standard shipping time is 5-7 business days. Express shipping (2-3 business days) is available for select locations at an additional cost.</p>
          
          <h3>Shipping Charges</h3>
          <p>Shipping charges are calculated based on the delivery location and the weight of the package. Free shipping is available on orders above ₹999.</p>
          
          <h3>Order Processing</h3>
          <p>Orders are processed within 24-48 hours of payment confirmation. You will receive a tracking number once your order has been shipped.</p>
          
          <h3>International Shipping</h3>
          <p>We currently do not offer international shipping. We only ship within India.</p>
          
          <h3>Contact Us</h3>
          <p>If you have any questions about our Shipping Policy, please contact us at <strong>buyzocartshop@gmail.com</strong>.</p>
        </div>
      </div>
    </section>

    <!-- Privacy Policy -->
    <section class="page" id="privacyPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        
        <div class="policy-content">
          <h2>Privacy Policy</h2>
          
          <h3>Introduction</h3>
          <p>At Buyzo Cart, we are committed to protecting your privacy. This Privacy Policy explains how we collect, use, and safeguard your information when you visit our website.</p>
          
          <h3>Information We Collect</h3>
          <p>We may collect the following types of information:</p>
          <ul>
            <li>Personal identification information (Name, email address, phone number, etc.)</li>
            <li>Delivery address and payment information</li>
            <li>Browser and device information</li>
            <li>Usage data and cookies</li>
          </ul>
          
          <h3>How We Use Your Information</h3>
          <p>We use the information we collect in the following ways:</p>
          <ul>
            <li>To process your orders and manage your account</li>
            <li>To improve our website and customer service</li>
            <li>To send periodic emails regarding your orders or other products and services</li>
            <li>To personalize your experience on our website</li>
          </ul>
          
          <h3>Data Security</h3>
          <p>We implement a variety of security measures to maintain the safety of your personal information. Your personal information is contained behind secured networks and is only accessible by a limited number of persons who have special access rights to such systems.</p>
          
          <h3>Cookies</h3>
          <p>We use cookies to help us understand and save your preferences for future visits and compile aggregate data about site traffic and site interaction so that we can offer better site experiences and tools in the future.</p>
          
          <h3>Third-Party Disclosure</h3>
          <p>We do not sell, trade, or otherwise transfer to outside parties your personally identifiable information unless we provide users with advance notice. This does not include website hosting partners and other parties who assist us in operating our website, conducting our business, or serving our users, so long as those parties agree to keep this information confidential.</p>
          
          <h3>Changes to This Privacy Policy</h3>
          <p>We may update our Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page.</p>
          
          <h3>Contact Us</h3>
          <p>If you have any questions about this Privacy Policy, please contact us at <strong>buyzocartshop@gmail.com</strong>.</p>
        </div>
      </div>
    </section>

    <!-- Contact Us Page -->
    <section class="page" id="contactPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        
        <div class="policy-content">
          <h2>Contact Us</h2>
          
          <h3>Get in Touch</h3>
          <p>We'd love to hear from you! Please reach out to us with any questions, concerns, or feedback.</p>
          
          <h3>Contact Information</h3>
          <ul>
            <li><strong>Email:</strong> buyzocartshop@gmail.com</li>
            <li><strong>Help Center:</strong> buyzocart.help@gmail.com</li>
            <li><strong>Instagram:</strong> @buyzo.cart</li>
            <li><strong>YouTube:</strong> @BuyzoCart</li>
            <li><strong>Telegram:</strong> t.me/buyzocartshop</li>
            <li><strong>Facebook:</strong> Buyzo Cart</li>
          </ul>
          
          <h3>Business Hours</h3>
          <p>Our customer support team is available Monday to Saturday, 9:00 AM to 6:00 PM IST.</p>
          
          <h3>WhatsApp Support</h3>
          <p>For quick assistance, you can also contact us on WhatsApp:</p>
          <div class="whatsapp-contact-button" id="whatsappContactBtn">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
            </svg>
            Contact us on WhatsApp
          </div>
          
          <h3>Response Time</h3>
          <p>We strive to respond to all inquiries within 24 hours during business days.</p>
        </div>
      </div>
    </section>

    <!-- About Us Page -->
    <section class="page" id="aboutPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        
        <div class="policy-content">
          <h2>About Buyzo Cart</h2>
          
          <h3>Our Story</h3>
          <p>Buyzo Cart was founded with a simple mission: to provide customers with a seamless and enjoyable online shopping experience. We believe that shopping should be easy, secure, and fun.</p>
          
          <h3>What We Offer</h3>
          <p>We curate a wide range of products from trusted suppliers, ensuring quality and value for our customers. From fashion and electronics to home essentials, we have something for everyone.</p>
          
          <h3>Our Values</h3>
          <ul>
            <li><strong>Customer First:</strong> Our customers are at the heart of everything we do.</li>
            <li><strong>Quality Assurance:</strong> We carefully select our products to ensure they meet our high standards.</li>
            <li><strong>Transparency:</strong> We believe in honest pricing and clear communication.</li>
            <li><strong>Innovation:</strong> We continuously improve our platform to serve you better.</li>
          </ul>
          
          <h3>Why Choose Us?</h3>
          <p>With competitive prices, fast shipping, and excellent customer service, Buyzo Cart is your trusted shopping destination. We're committed to making your shopping experience the best it can be.</p>
          
          <h3>Join Our Community</h3>
          <p>Follow us on social media to stay updated on the latest products, promotions, and news:</p>
          <ul>
            <li><strong>Instagram:</strong> @buyzo.cart</li>
            <li><strong>YouTube:</strong> @BuyzoCart</li>
            <li><strong>Telegram:</strong> t.me/buyzocartshop</li>
            <li><strong>Facebook:</strong> Buyzo Cart</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Account Page -->
    <section class="page" id="accountPage">
      <div class="account-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        
        <div class="account-header">
          <div class="account-avatar" id="accountPageAvatar">U</div>
          <div class="account-info">
            <h2 id="accountPageName">User Name</h2>
            <p id="accountPageEmail">user@example.com</p>
          </div>
        </div>
        
        <div class="account-menu">
          <div class="account-menu-item" onclick="showPage('myOrdersPage')">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="9" cy="21" r="1"></circle>
              <circle cx="20" cy="21" r="1"></circle>
              <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
            </svg>
            <span>My Orders</span>
          </div>
          <div class="account-menu-item" onclick="showPage('wishlistPage')">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
            <span>Wishlist</span>
          </div>
          <div class="account-menu-item" onclick="showPage('cancellationPage')">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="15" y1="9" x2="9" y2="15"></line>
              <line x1="9" y1="9" x2="15" y2="15"></line>
            </svg>
            <span>Refund & Cancellation</span>
          </div>
          <div class="account-menu-item" onclick="showPage('contactPage')">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
              <polyline points="22,6 12,13 2,6"></polyline>
            </svg>
            <span>Contact Us</span>
          </div>
        </div>
        
        <div class="account-section">
          <h3>Profile Information</h3>
          <div class="profile-form">
            <div class="row">
              <div class="col">
                <label>First Name</label>
                <input type="text" id="profileFirstName" placeholder="First Name">
              </div>
              <div class="col">
                <label>Last Name</label>
                <input type="text" id="profileLastName" placeholder="Last Name">
              </div>
            </div>
            <div>
              <label>Email Address</label>
              <input type="email" id="profileEmail" placeholder="Email Address" readonly>
            </div>
            <div>
              <label>Phone Number</label>
              <input type="tel" id="profilePhone" placeholder="Phone Number">
            </div>
            <button class="btn" id="updateProfileBtn">Update Profile</button>
          </div>
        </div>
        
        <div class="account-section">
          <h3>Notification Settings</h3>
          <div class="setting-item">
            <div class="setting-info">
              <h4>Order Updates</h4>
              <p>Receive notifications about your order status</p>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="orderUpdatesToggle" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
          <div class="setting-item">
            <div class="setting-info">
              <h4>Promotional Emails</h4>
              <p>Receive emails about new products and offers</p>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="promoEmailsToggle" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
          <div class="setting-item">
            <div class="setting-info">
              <h4>SMS Notifications</h4>
              <p>Receive order updates via SMS</p>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="smsNotificationsToggle">
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>
        
        <div class="account-section">
          <h3>Account Actions</h3>
          <div style="display: flex; gap: 12px; flex-wrap: wrap;">
            <button class="btn secondary" onclick="showPage('privacyPage')">Privacy Policy</button>
            <button class="btn secondary" onclick="showPage('termsPage')">Terms & Conditions</button>
            <button class="btn error" onclick="logout()">Logout</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
      <div class="toast-icon">✓</div>
      <div class="toast-message" id="toastMessage">Operation completed successfully</div>
    </div>

    <!-- Cancellation Modal -->
    <div class="modal-overlay" id="cancellationModal">
      <div class="cancellation-modal">
        <h3>Cancel Order</h3>
        <p>Please select a reason for cancellation:</p>
        
        <div class="cancellation-reason">
          <input type="radio" name="cancelReason" value="Changed my mind"> Changed my mind
        </div>
        <div class="cancellation-reason">
          <input type="radio" name="cancelReason" value="Found better price"> Found better price
        </div>
        <div class="cancellation-reason">
          <input type="radio" name="cancelReason" value="Delivery time too long"> Delivery time too long
        </div>
        <div class="cancellation-reason">
          <input type="radio" name="cancelReason" value="Ordered by mistake"> Ordered by mistake
        </div>
        <div class="cancellation-reason">
          <input type="radio" name="cancelReason" value="Other"> Other reason
        </div>
        
        <div class="cancellation-actions">
          <button class="btn secondary" id="cancelCancel">Cancel</button>
          <button class="btn error" id="confirmCancel">Confirm Cancellation</button>
        </div>
      </div>
    </div>

    <!-- Cancel Order Flow Modal -->
    <div class="modal-overlay" id="cancelConfirmModal">
      <div class="cancel-confirm-modal">
        <h3>Confirm Order Cancellation</h3>
        <p>Are you sure you want to cancel this order? This action cannot be undone.</p>
        
        <div class="payment-charge-note">
          <strong>Note:</strong> If you paid online, your refund will be processed within 7-10 business days. A small payment gateway charge may apply.
        </div>
        
        <div class="refund-calculation">
          <p><strong>Refund Calculation:</strong></p>
          <p>Order Amount: <span id="refundOrderAmount">₹0</span></p>
          <p>Payment Gateway Charges: <span id="refundGatewayCharges">₹0</span></p>
          <p style="font-weight: 700; margin-top: 8px;">Total Refund Amount: <span id="refundTotalAmount">₹0</span></p>
        </div>
        
        <div class="cancel-confirm-actions">
          <button class="btn secondary" id="cancelConfirmCancel">Cancel</button>
          <button class="btn error" id="confirmCancelFinal">Yes, Cancel Order</button>
        </div>
      </div>
    </div>

    <!-- Alert Modal -->
    <div class="modal-overlay" id="alertModal">
      <div class="alert-modal">
        <div class="alert-icon">⚠️</div>
        <h3>Confirm Action</h3>
        <p id="alertModalMessage">Are you sure you want to proceed?</p>
        <div class="alert-modal-buttons">
          <button class="btn secondary" id="alertModalCancel">Cancel</button>
          <button class="btn error" id="alertModalConfirm">Yes</button>
        </div>
      </div>
    </div>

    <!-- Login/Signup Modal -->
    <div class="modal-overlay" id="authModal">
      <div class="auth-modal">
        <button class="auth-close" id="authClose">×</button>
        <h3>Welcome to Buyzo Cart</h3>
        
        <div class="auth-tabs">
          <div class="auth-tab active" id="loginTab">Login</div>
          <div class="auth-tab" id="signupTab">Sign Up</div>
        </div>
        
        <div class="auth-form active" id="loginForm">
          <div class="auth-form-group">
            <label>Email</label>
            <input type="email" id="loginEmail" placeholder="Enter your email">
          </div>
          <div class="auth-form-group">
            <label>Password</label>
            <input type="password" id="loginPassword" placeholder="Enter your password">
          </div>
          <button class="btn" id="loginBtn" style="width: 100%;">Login</button>
          
          <div class="divider"><span>or</span></div>
          
          <button class="google-signin-btn" id="googleSignInBtn">
            <img src="https://developers.google.com/identity/images/g-logo.png" alt="Google">
            Sign in with Google
          </button>
          
          <div class="auth-form-footer">
            <a id="forgotPasswordLink">Forgot Password?</a>
          </div>
        </div>
        
        <div class="auth-form" id="signupForm">
          <div class="auth-form-group">
            <label>Full Name</label>
            <input type="text" id="signupName" placeholder="Enter your full name">
          </div>
          <div class="auth-form-group">
            <label>Email</label>
            <input type="email" id="signupEmail" placeholder="Enter your email">
          </div>
          <div class="auth-form-group">
            <label>Password</label>
            <input type="password" id="signupPassword" placeholder="Create a password">
          </div>
          <div class="auth-form-group">
            <label>Confirm Password</label>
            <input type="password" id="signupConfirmPassword" placeholder="Confirm your password">
          </div>
          <button class="btn" id="signupBtn" style="width: 100%;">Create Account</button>
          
          <div class="divider"><span>or</span></div>
          
          <button class="google-signin-btn" id="googleSignUpBtn">
            <img src="https://developers.google.com/identity/images/g-logo.png" alt="Google">
            Sign up with Google
          </button>
        </div>
        
        <div class="forgot-password-form" id="forgotPasswordForm">
          <div class="auth-form-group">
            <label>Email</label>
            <input type="email" id="forgotPasswordEmail" placeholder="Enter your email">
          </div>
          <button class="btn" id="resetPasswordBtn" style="width: 100%;">Reset Password</button>
          <div class="back-to-login" id="backToLogin">Back to Login</div>
        </div>
      </div>
    </div>

    <!-- Image Zoom Modal -->
    <div class="modal-overlay zoom-modal" id="imageZoomModal">
      <div class="zoom-content">
        <button class="zoom-close" id="zoomClose">×</button>
        <img class="zoom-image" id="zoomImage" src="" alt="Zoomed product image">
        <div class="zoom-controls">
          <button class="zoom-btn" id="zoomOut">-</button>
          <button class="zoom-btn" id="zoomIn">+</button>
        </div>
      </div>
    </div>
  </main>

  <footer>
    <div class="footer-container">
      <div class="footer-content">
        <div class="footer-section">
          <h3>Buyzo Cart</h3>
          <p style="color: var(--muted); margin-bottom: 16px;">Your trusted shopping destination for quality products at great prices.</p>
          <div class="social-links">
            <a href="https://www.instagram.com/buyzo.cart?igsh=d2Mxc2EwMW45cWwy" target="_blank" class="social-link" title="Instagram">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
              </svg>
            </a>
            <a href="https://www.youtube.com/@BuyzoCart" target="_blank" class="social-link" title="YouTube">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/>
              </svg>
            </a>
            <a href="https://t.me/buyzocartshop" target="_blank" class="social-link" title="Telegram">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.894 8.221l-1.97 9.28c-.145.658-.537.818-1.084.508l-3-2.21-1.447 1.394c-.14.141-.259.259-.374.261l.213-3.053 5.56-5.022c.24-.213-.054-.334-.373-.121l-6.869 4.326-2.96-.924c-.64-.203-.658-.64.136-.954l11.566-4.458c.538-.196 1.006.128.832.941z"/>
              </svg>
            </a>
            <a href="https://www.facebook.com/share/17G9Bu9fmH/" target="_blank" class="social-link" title="Facebook">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"/>
              </svg>
            </a>
          </div>
        </div>
        
        <div class="footer-section">
          <h3>Quick Links</h3>
          <ul class="footer-links">
            <li><a onclick="showPage('homePage')">Home</a></li>
            <li><a onclick="showPage('productsPage')">Products</a></li>
            <li><a onclick="showPage('aboutPage')">About Us</a></li>
            <li><a onclick="showPage('contactPage')">Contact Us</a></li>
          </ul>
        </div>
        
        <div class="footer-section">
          <h3>Customer Service</h3>
          <ul class="footer-links">
            <li><a onclick="showPage('myOrdersPage')">My Orders</a></li>
            <li><a onclick="showPage('cancellationPage')">Refund & Cancellation</a></li>
            <li><a onclick="showPage('shippingPage')">Shipping Policy</a></li>
            <li><a onclick="showPage('termsPage')">Terms & Conditions</a></li>
            <li><a onclick="showPage('privacyPage')">Privacy Policy</a></li>
          </ul>
        </div>
        
        <div class="footer-section">
          <h3>Contact Info</h3>
          <div class="contact-info">
            <p>
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                <polyline points="22,6 12,13 2,6"></polyline>
              </svg>
              buyzocartshop@gmail.com
            </p>
            <p>
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
                <path d="M15.05 5A5 5 0 0 1 19 8.95M15.05 1A9 9 0 0 1 23 8.94m-1 7.98v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
              </svg>
              +91 1234567890
            </p>
            <p>
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                <circle cx="12" cy="10" r="3"></circle>
              </svg>
              Available Pan India
            </p>
          </div>
        </div>
      </div>
    </div>
    
    <div class="copyright">
      <div class="footer-container">
        <p>&copy; 2024 Buyzo Cart. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script>
    // Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyAeB7VzIxJaNYagUPoKd-kN5HXmLbS2-Vw",
      authDomain: "videomanager-23d98.firebaseapp.com",
      databaseURL: "https://videomanager-23d98-default-rtdb.firebaseio.com",
      projectId: "videomanager-23d98",
      storageBucket: "videomanager-23d98.firebasestorage.app",
      messagingSenderId: "847321523576",
      appId: "1:847321523576:web:bda3f5026e3e163603548d",
      measurementId: "G-YBSJ1KMPV4"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.database();
    
    // Initialize EmailJS
    emailjs.init("JvkKRLBYjYK-hmB-G");

    // Global variables
    let selectedProduct = null;
    let currentUser = null;
    let productsData = [];
    let categoriesData = [];
    let ordersData = [];
    let wishlistData = [];
    let recentlyViewed = [];
    
    // Cache keys
    const CACHE_KEYS = {
      PRODUCTS: 'buyzo_products_cache',
      CATEGORIES: 'buyzo_categories_cache',
      USER_DATA: 'buyzo_user_data_cache',
      ORDERS: 'buyzo_orders_cache',
      WISHLIST: 'buyzo_wishlist_cache',
      RECENTLY_VIEWED: 'buyzo_recently_viewed_cache',
      CACHE_TIMESTAMP: 'buyzo_cache_timestamp'
    };

    // Cache expiration time (5 minutes)
    const CACHE_EXPIRY = 5 * 60 * 1000;

    // Local Storage Cache Functions
    function setCache(key, data) {
      try {
        localStorage.setItem(key, JSON.stringify({
          data: data,
          timestamp: Date.now()
        }));
      } catch (e) {
        console.warn('Failed to save to cache:', e);
      }
    }

    function getCache(key) {
      try {
        const cached = localStorage.getItem(key);
        if (!cached) return null;
        
        const parsed = JSON.parse(cached);
        const isExpired = Date.now() - parsed.timestamp > CACHE_EXPIRY;
        
        return isExpired ? null : parsed.data;
      } catch (e) {
        console.warn('Failed to read from cache:', e);
        return null;
      }
    }

    function clearCache(key) {
      try {
        localStorage.removeItem(key);
      } catch (e) {
        console.warn('Failed to clear cache:', e);
      }
    }

    // Load products from cache or Firebase
    function loadProducts() {
      // Try to load from cache first
      const cachedProducts = getCache(CACHE_KEYS.PRODUCTS);
      if (cachedProducts) {
        productsData = cachedProducts;
        renderProducts();
        showToast('Products loaded from cache', 'success');
      }

      // Then load from Firebase (will update cache)
      db.ref('products').once('value').then(snapshot => {
        const products = snapshot.val();
        if (products) {
          productsData = Object.entries(products).map(([id, product]) => ({
            id,
            ...product
          }));
          
          // Update cache
          setCache(CACHE_KEYS.PRODUCTS, productsData);
          
          // Only show toast if cache was empty
          if (!cachedProducts) {
            showToast('Products loaded successfully', 'success');
          }
          
          renderProducts();
        }
      }).catch(error => {
        console.error('Error loading products:', error);
        if (!cachedProducts) {
          showToast('Failed to load products', 'error');
        }
      });
    }

    // Load categories from cache or Firebase
    function loadCategories() {
      // Try to load from cache first
      const cachedCategories = getCache(CACHE_KEYS.CATEGORIES);
      if (cachedCategories) {
        categoriesData = cachedCategories;
        renderCategories();
      }

      // Then load from Firebase (will update cache)
      db.ref('categories').once('value').then(snapshot => {
        const categories = snapshot.val();
        if (categories) {
          categoriesData = Object.entries(categories).map(([id, category]) => ({
            id,
            ...category
          }));
          
          // Update cache
          setCache(CACHE_KEYS.CATEGORIES, categoriesData);
          
          renderCategories();
        }
      }).catch(error => {
        console.error('Error loading categories:', error);
      });
    }

    // Load user data from cache or Firebase
    function loadUserData(user) {
      if (!user) return;
      
      // Try to load from cache first
      const cachedUserData = getCache(CACHE_KEYS.USER_DATA);
      if (cachedUserData) {
        updateUserUI(cachedUserData);
      }

      // Then load from Firebase (will update cache)
      db.ref('users/' + user.uid).once('value').then(snapshot => {
        const userData = snapshot.val();
        if (userData) {
          // Update cache
          setCache(CACHE_KEYS.USER_DATA, userData);
          
          updateUserUI(userData);
        }
      }).catch(error => {
        console.error('Error loading user data:', error);
      });
    }

    // Load orders from cache or Firebase
    function loadOrders(user) {
      if (!user) return;
      
      // Try to load from cache first
      const cachedOrders = getCache(CACHE_KEYS.ORDERS);
      if (cachedOrders) {
        ordersData = cachedOrders;
        renderOrders();
      }

      // Then load from Firebase (will update cache)
      db.ref('orders').orderByChild('userId').equalTo(user.uid).once('value').then(snapshot => {
        const orders = snapshot.val();
        if (orders) {
          ordersData = Object.entries(orders).map(([id, order]) => ({
            id,
            ...order
          }));
          
          // Update cache
          setCache(CACHE_KEYS.ORDERS, ordersData);
          
          renderOrders();
        } else {
          ordersData = [];
          renderOrders();
        }
      }).catch(error => {
        console.error('Error loading orders:', error);
        if (!cachedOrders) {
          ordersData = [];
          renderOrders();
        }
      });
    }

    // Load wishlist from cache or Firebase
    function loadWishlist(user) {
      if (!user) return;
      
      // Try to load from cache first
      const cachedWishlist = getCache(CACHE_KEYS.WISHLIST);
      if (cachedWishlist) {
        wishlistData = cachedWishlist;
        renderWishlist();
      }

      // Then load from Firebase (will update cache)
      db.ref('wishlist').orderByChild('userId').equalTo(user.uid).once('value').then(snapshot => {
        const wishlist = snapshot.val();
        if (wishlist) {
          wishlistData = Object.entries(wishlist).map(([id, item]) => ({
            id,
            ...item
          }));
          
          // Update cache
          setCache(CACHE_KEYS.WISHLIST, wishlistData);
          
          renderWishlist();
        } else {
          wishlistData = [];
          renderWishlist();
        }
      }).catch(error => {
        console.error('Error loading wishlist:', error);
        if (!cachedWishlist) {
          wishlistData = [];
          renderWishlist();
        }
      });
    }

    // Load recently viewed from cache
    function loadRecentlyViewed() {
      const cachedRecentlyViewed = getCache(CACHE_KEYS.RECENTLY_VIEWED);
      if (cachedRecentlyViewed) {
        recentlyViewed = cachedRecentlyViewed;
        renderRecentlyViewed();
      }
    }

    // Save recently viewed to cache
    function saveRecentlyViewed() {
      setCache(CACHE_KEYS.RECENTLY_VIEWED, recentlyViewed);
    }

    // Add product to recently viewed
    function addToRecentlyViewed(product) {
      // Remove if already exists
      recentlyViewed = recentlyViewed.filter(p => p.id !== product.id);
      
      // Add to beginning
      recentlyViewed.unshift(product);
      
      // Keep only last 10 items
      if (recentlyViewed.length > 10) {
        recentlyViewed = recentlyViewed.slice(0, 10);
      }
      
      saveRecentlyViewed();
      renderRecentlyViewed();
    }

    // Render recently viewed products
    function renderRecentlyViewed() {
      const slider = document.getElementById('recentlyViewedSlider');
      const section = document.getElementById('recentlyViewedSection');
      
      if (!slider || !section) return;
      
      if (recentlyViewed.length === 0) {
        section.style.display = 'none';
        return;
      }
      
      section.style.display = 'block';
      slider.innerHTML = '';
      
      recentlyViewed.forEach(product => {
        const productCard = createProductCard(product, true);
        slider.appendChild(productCard);
      });
    }

    // Clear all cache
    function clearAllCache() {
      Object.values(CACHE_KEYS).forEach(key => {
        clearCache(key);
      });
    }

    // Update user UI with cached or Firebase data
    function updateUserUI(userData) {
      const userProfile = document.getElementById('userProfile');
      const mobileUserProfile = document.getElementById('mobileUserProfile');
      const openLoginTop = document.getElementById('openLoginTop');
      const mobileLoginBtn = document.getElementById('mobileLoginBtn');
      const userAvatar = document.getElementById('userAvatar');
      const userName = document.getElementById('userName');
      const accountEmail = document.getElementById('accountEmail');
      const mobileUserName = document.getElementById('mobileUserName');
      const accountPageAvatar = document.getElementById('accountPageAvatar');
      const accountPageName = document.getElementById('accountPageName');
      const accountPageEmail = document.getElementById('accountPageEmail');
      
      if (currentUser && userData) {
        // Show user profile, hide login buttons
        if (userProfile) userProfile.style.display = 'flex';
        if (mobileUserProfile) mobileUserProfile.style.display = 'block';
        if (openLoginTop) openLoginTop.style.display = 'none';
        if (mobileLoginBtn) mobileLoginBtn.style.display = 'none';
        
        // Update user info
        const displayName = userData.name || currentUser.displayName || currentUser.email.split('@')[0];
        const firstLetter = displayName.charAt(0).toUpperCase();
        
        if (userAvatar) userAvatar.textContent = firstLetter;
        if (userName) userName.textContent = displayName;
        if (accountEmail) accountEmail.textContent = currentUser.email;
        if (mobileUserName) mobileUserName.textContent = displayName;
        if (accountPageAvatar) accountPageAvatar.textContent = firstLetter;
        if (accountPageName) accountPageName.textContent = displayName;
        if (accountPageEmail) accountPageEmail.textContent = currentUser.email;
        
        // Update profile form
        const profileFirstName = document.getElementById('profileFirstName');
        const profileLastName = document.getElementById('profileLastName');
        const profileEmail = document.getElementById('profileEmail');
        const profilePhone = document.getElementById('profilePhone');
        
        if (profileFirstName && profileLastName) {
          const nameParts = displayName.split(' ');
          profileFirstName.value = nameParts[0] || '';
          profileLastName.value = nameParts.slice(1).join(' ') || '';
        }
        
        if (profileEmail) profileEmail.value = currentUser.email;
        if (profilePhone) profilePhone.value = userData.phone || '';
      } else {
        // Show login buttons, hide user profile
        if (userProfile) userProfile.style.display = 'none';
        if (mobileUserProfile) mobileUserProfile.style.display = 'none';
        if (openLoginTop) openLoginTop.style.display = 'block';
        if (mobileLoginBtn) mobileLoginBtn.style.display = 'block';
      }
    }

    // DOM Content Loaded
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize the app
      initApp();
      
      // Load cached data immediately
      loadProducts();
      loadCategories();
      loadRecentlyViewed();
      
      // Set up authentication state observer
      auth.onAuthStateChanged(user => {
        currentUser = user;
        if (user) {
          // User is signed in
          loadUserData(user);
          loadOrders(user);
          loadWishlist(user);
        } else {
          // User is signed out
          updateUserUI(null);
          ordersData = [];
          wishlistData = [];
          renderOrders();
          renderWishlist();
        }
      });

      // Set up event listeners
      setupEventListeners();
      
      // Initialize rotating messages
      initRotatingMessages();
      
      // Initialize banner carousel
      initBannerCarousel();
    });

    // Initialize the app
    function initApp() {
      // Set initial theme
      const savedTheme = localStorage.getItem('buyzo-theme') || 'light';
      document.documentElement.setAttribute('data-theme', savedTheme);
      
      // Show home page by default
      showPage('homePage');
    }

    // Setup event listeners
    function setupEventListeners() {
      // Theme toggle
      document.getElementById('themeToggle').addEventListener('click', toggleTheme);
      
      // Mobile menu
      document.getElementById('menuIcon').addEventListener('click', openMenu);
      document.getElementById('menuClose').addEventListener('click', closeMenu);
      document.getElementById('menuOverlay').addEventListener('click', closeMenu);
      
      // Search functionality
      document.getElementById('searchInput')?.addEventListener('input', handleSearch);
      document.getElementById('homeSearchInput')?.addEventListener('input', handleHomeSearch);
      
      // Order flow navigation
      document.getElementById('backToProducts')?.addEventListener('click', () => showPage('productsPage'));
      document.getElementById('editOrder')?.addEventListener('click', () => showPage('orderPage'));
      document.getElementById('toUserInfo')?.addEventListener('click', validateAndProceedToUserInfo);
      document.getElementById('toPayment')?.addEventListener('click', validateAndProceedToPayment);
      document.getElementById('payBack')?.addEventListener('click', () => showPage('userPage'));
      document.getElementById('confirmOrder')?.addEventListener('click', confirmOrder);
      document.getElementById('goHome')?.addEventListener('click', () => showPage('homePage'));
      document.getElementById('viewOrders')?.addEventListener('click', () => checkAuthAndShowPage('myOrdersPage'));
      
      // Contact buttons
      document.getElementById('openContactTop')?.addEventListener('click', () => showPage('contactPage'));
      document.getElementById('whatsappContactBtn')?.addEventListener('click', openWhatsApp);
      
      // My Orders buttons
      document.getElementById('openMyOrdersTop')?.addEventListener('click', () => checkAuthAndShowPage('myOrdersPage'));
      
      // Login/Signup buttons
      document.getElementById('openLoginTop')?.addEventListener('click', showLoginModal);
      document.getElementById('userProfile')?.addEventListener('click', toggleAccountDropdown);
      
      // Auth modal
      document.getElementById('authClose')?.addEventListener('click', closeAuthModal);
      document.getElementById('loginTab')?.addEventListener('click', () => switchAuthTab('login'));
      document.getElementById('signupTab')?.addEventListener('click', () => switchAuthTab('signup'));
      document.getElementById('loginBtn')?.addEventListener('click', handleLogin);
      document.getElementById('signupBtn')?.addEventListener('click', handleSignup);
      document.getElementById('forgotPasswordLink')?.addEventListener('click', () => switchAuthTab('forgotPassword'));
      document.getElementById('backToLogin')?.addEventListener('click', () => switchAuthTab('login'));
      document.getElementById('resetPasswordBtn')?.addEventListener('click', handleResetPassword);
      document.getElementById('googleSignInBtn')?.addEventListener('click', handleGoogleSignIn);
      document.getElementById('googleSignUpBtn')?.addEventListener('click', handleGoogleSignIn);
      
      // User profile dropdown
      document.addEventListener('click', function(event) {
        const accountDropdown = document.getElementById('accountDropdown');
        const userProfile = document.getElementById('userProfile');
        
        if (accountDropdown && userProfile && 
            !userProfile.contains(event.target) && 
            accountDropdown.classList.contains('active')) {
          accountDropdown.classList.remove('active');
        }
      });
      
      // Quantity controls
      document.querySelectorAll('.qty-plus').forEach(btn => {
        btn.addEventListener('click', function() {
          const input = this.parentNode.querySelector('input');
          input.value = parseInt(input.value) + 1;
        });
      });
      
      document.querySelectorAll('.qty-minus').forEach(btn => {
        btn.addEventListener('click', function() {
          const input = this.parentNode.querySelector('input');
          if (parseInt(input.value) > 1) {
            input.value = parseInt(input.value) - 1;
          }
        });
      });
      
      // Size selection
      document.querySelectorAll('.size-option').forEach(option => {
        option.addEventListener('click', function() {
          document.querySelectorAll('.size-option').forEach(opt => opt.classList.remove('selected'));
          this.classList.add('selected');
          document.getElementById('sizeValidationError').classList.remove('show');
        });
      });
      
      // Price filter
      document.getElementById('applyPriceFilter')?.addEventListener('click', applyPriceFilter);
      document.getElementById('resetPriceFilter')?.addEventListener('click', resetPriceFilter);
      
      // Newsletter subscription
      document.getElementById('subscribeBtn')?.addEventListener('click', handleNewsletterSubscription);
      
      // Share buttons
      document.querySelectorAll('.share-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          const platform = this.getAttribute('data-platform');
          shareProduct(platform);
        });
      });
      
      // Copy share link
      document.getElementById('copyShareLink')?.addEventListener('click', copyShareLink);
      
      // Update profile
      document.getElementById('updateProfileBtn')?.addEventListener('click', updateUserProfile);
      
      // Cancellation modal
      document.getElementById('cancelCancel')?.addEventListener('click', closeCancellationModal);
      document.getElementById('confirmCancel')?.addEventListener('click', confirmCancellation);
      
      // Alert modal
      document.getElementById('alertModalCancel')?.addEventListener('click', closeAlertModal);
      document.getElementById('alertModalConfirm')?.addEventListener('click', confirmAlertModal);
      
      // Cancel confirm modal
      document.getElementById('cancelConfirmCancel')?.addEventListener('click', closeCancelConfirmModal);
      document.getElementById('confirmCancelFinal')?.addEventListener('click', confirmCancelFinal);
      
      // Image zoom modal
      document.getElementById('zoomClose')?.addEventListener('click', closeImageZoom);
      document.getElementById('zoomIn')?.addEventListener('click', zoomIn);
      document.getElementById('zoomOut')?.addEventListener('click', zoomOut);
      
      // Click outside modals to close
      document.addEventListener('click', function(event) {
        if (event.target.classList.contains('modal-overlay')) {
          closeAllModals();
        }
      });
    }

    // Initialize rotating messages
    function initRotatingMessages() {
      const messages = document.querySelectorAll('#heroMessages span');
      let currentIndex = 0;
      
      setInterval(() => {
        messages.forEach(msg => msg.classList.remove('active'));
        currentIndex = (currentIndex + 1) % messages.length;
        messages[currentIndex].classList.add('active');
      }, 3000);
    }

    // Initialize banner carousel
    function initBannerCarousel() {
      const bannerTrack = document.getElementById('bannerTrack');
      const bannerControls = document.getElementById('bannerControls');
      
      if (!bannerTrack || !bannerControls) return;
      
      // Sample banner data - in a real app, this would come from Firebase
      const banners = [
        {
          id: 1,
          image: 'https://images.unsplash.com/photo-1607082350899-7e105aa886ae?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80',
          title: 'Summer Sale',
          subtitle: 'Up to 50% off on selected items'
        },
        {
          id: 2,
          image: 'https://images.unsplash.com/photo-1441986300917-64674bd600d8?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80',
          title: 'New Arrivals',
          subtitle: 'Check out the latest trends'
        },
        {
          id: 3,
          image: 'https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80',
          title: 'Free Shipping',
          subtitle: 'On orders above ₹999'
        }
      ];
      
      // Create banner slides
      banners.forEach((banner, index) => {
        const slide = document.createElement('div');
        slide.className = 'banner-slide';
        slide.style.backgroundImage = `url(${banner.image})`;
        slide.setAttribute('data-index', index);
        bannerTrack.appendChild(slide);
        
        const dot = document.createElement('div');
        dot.className = 'banner-dot' + (index === 0 ? ' active' : '');
        dot.setAttribute('data-index', index);
        dot.addEventListener('click', () => goToBannerSlide(index));
        bannerControls.appendChild(dot);
      });
      
      // Auto-advance banners
      let currentBannerIndex = 0;
      setInterval(() => {
        currentBannerIndex = (currentBannerIndex + 1) % banners.length;
        goToBannerSlide(currentBannerIndex);
      }, 5000);
    }

    function goToBannerSlide(index) {
      const bannerTrack = document.getElementById('bannerTrack');
      const dots = document.querySelectorAll('.banner-dot');
      
      if (!bannerTrack) return;
      
      bannerTrack.style.transform = `translateX(-${index * 100}%)`;
      
      dots.forEach(dot => dot.classList.remove('active'));
      dots[index].classList.add('active');
    }

    // Theme toggle function
    function toggleTheme() {
      const currentTheme = document.documentElement.getAttribute('data-theme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      
      document.documentElement.setAttribute('data-theme', newTheme);
      localStorage.setItem('buyzo-theme', newTheme);
    }

    // Mobile menu functions
    function openMenu() {
      document.getElementById('mobileMenu').classList.add('active');
      document.getElementById('menuOverlay').classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeMenu() {
      document.getElementById('mobileMenu').classList.remove('active');
      document.getElementById('menuOverlay').classList.remove('active');
      document.body.style.overflow = '';
    }

    // Page navigation
    function showPage(pageId) {
      document.querySelectorAll('.page').forEach(page => {
        page.classList.remove('active');
      });
      document.getElementById(pageId).classList.add('active');
      
      // Update step pills
      updateStepPills(pageId);
      
      // Close mobile menu when navigating
      closeMenu();
    }

    function updateStepPills(pageId) {
      const pills = ['pill-products', 'pill-order', 'pill-user', 'pill-pay'];
      const pageIndex = {
        'homePage': 0,
        'productsPage': 0,
        'productDetailPage': 0,
        'orderPage': 1,
        'userPage': 2,
        'paymentPage': 3,
        'successPage': 3
      }[pageId] || 0;
      
      pills.forEach((pill, index) => {
        const pillElement = document.getElementById(pill);
        if (pillElement) {
          if (index <= pageIndex) {
            pillElement.classList.remove('disabled');
          } else {
            pillElement.classList.add('disabled');
          }
        }
      });
    }

    // Check authentication before showing certain pages
    function checkAuthAndShowPage(pageId) {
      if (pageId === 'myOrdersPage' || pageId === 'wishlistPage' || pageId === 'accountPage') {
        if (!currentUser) {
          showLoginModal();
          return;
        }
      }
      showPage(pageId);
    }

    // Product rendering
    function renderProducts(products = productsData) {
      const productGrid = document.getElementById('productGrid');
      const homeProductGrid = document.getElementById('homeProductGrid');
      const productSlider = document.getElementById('productSlider');
      
      if (productGrid) {
        productGrid.innerHTML = '';
        products.forEach(product => {
          productGrid.appendChild(createProductCard(product));
        });
      }
      
      if (homeProductGrid) {
        homeProductGrid.innerHTML = '';
        // Show only featured products on home page
        const featuredProducts = products.filter(p => p.featured).slice(0, 6);
        featuredProducts.forEach(product => {
          homeProductGrid.appendChild(createProductCard(product));
        });
      }
      
      if (productSlider) {
        productSlider.innerHTML = '';
        // Show trending products in slider
        const trendingProducts = products.filter(p => p.trending).slice(0, 10);
        trendingProducts.forEach(product => {
          productSlider.appendChild(createProductCard(product, true));
        });
      }
    }

    function createProductCard(product, isSliderItem = false) {
      const card = document.createElement('div');
      card.className = isSliderItem ? 'slider-item' : 'product-card';
      card.setAttribute('data-id', product.id);
      
      const isInWishlist = currentUser && wishlistData.some(item => item.productId === product.id);
      
      card.innerHTML = `
        <div class="${isSliderItem ? 'slider-item-img' : 'product-card-image'}" 
             style="background-image: url('${product.images ? product.images[0] : 'https://images.unsplash.com/photo-1505740420928-5e560c06d30e?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=60'}')">
          ${product.badge ? `<div class="product-card-badge">${product.badge}</div>` : ''}
          ${product.professional ? `<div class="professional-badge">PRO</div>` : ''}
        </div>
        <div class="${isSliderItem ? 'slider-item-body' : 'product-card-body'}">
          <div class="${isSliderItem ? 'slider-item-title' : 'product-card-title'}">${product.name}</div>
          ${!isSliderItem ? `
            <div class="product-card-rating">
              <div class="product-card-stars">★★★★★</div>
              <div class="product-card-review-count">(${product.reviewCount || '0'})</div>
            </div>
          ` : ''}
          <div class="${isSliderItem ? 'slider-item-price' : 'product-card-price'}">
            <div class="product-card-current-price">₹${product.price}</div>
            ${product.originalPrice ? `<div class="product-card-original-price">₹${product.originalPrice}</div>` : ''}
          </div>
          ${!isSliderItem ? `
            <div class="product-card-actions">
              <button class="action-btn wishlist-btn ${isInWishlist ? 'active' : ''}" 
                      onclick="event.stopPropagation(); toggleWishlist('${product.id}')">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="${isInWishlist ? 'currentColor' : 'none'}" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                </svg>
              </button>
              <button class="action-btn share-btn" onclick="event.stopPropagation(); shareProduct('${product.id}')">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="18" cy="5" r="3"></circle>
                  <circle cx="6" cy="12" r="3"></circle>
                  <circle cx="18" cy="19" r="3"></circle>
                  <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                  <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
                </svg>
              </button>
            </div>
          ` : ''}
        </div>
      `;
      
      card.addEventListener('click', () => showProductDetail(product));
      
      return card;
    }

    // Category rendering
    function renderCategories() {
      const categoriesContainer = document.getElementById('categoriesContainer');
      const categoryCirclesContainer = document.getElementById('categoryCirclesContainer');
      
      if (categoriesContainer) {
        categoriesContainer.innerHTML = '';
        categoriesData.forEach(category => {
          const pill = document.createElement('div');
          pill.className = 'category-pill';
          pill.textContent = category.name;
          pill.setAttribute('data-category', category.id);
          pill.addEventListener('click', () => filterByCategory(category.id));
          categoriesContainer.appendChild(pill);
        });
        
        // Add "All" category
        const allPill = document.createElement('div');
        allPill.className = 'category-pill active';
        allPill.textContent = 'All';
        allPill.addEventListener('click', () => filterByCategory('all'));
        categoriesContainer.insertBefore(allPill, categoriesContainer.firstChild);
      }
      
      if (categoryCirclesContainer) {
        categoryCirclesContainer.innerHTML = '';
        categoriesData.slice(0, 8).forEach(category => {
          const circle = document.createElement('div');
          circle.className = 'category-circle';
          circle.innerHTML = `
            <div class="category-circle-image" style="background-image: url('${category.image || 'https://images.unsplash.com/photo-1560749003-f4b1e17e2dff?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=60'}')"></div>
            <div class="category-circle-name">${category.name}</div>
          `;
          circle.addEventListener('click', () => filterByCategory(category.id));
          categoryCirclesContainer.appendChild(circle);
        });
      }
    }

    // Category filtering
    function filterByCategory(categoryId) {
      // Update active category pill
      document.querySelectorAll('.category-pill').forEach(pill => {
        pill.classList.remove('active');
      });
      
      if (categoryId === 'all') {
        document.querySelectorAll('.category-pill')[0].classList.add('active');
        renderProducts();
      } else {
        document.querySelector(`.category-pill[data-category="${categoryId}"]`).classList.add('active');
        const filteredProducts = productsData.filter(product => product.category === categoryId);
        renderProducts(filteredProducts);
      }
    }

    // Search functionality
    function handleSearch(event) {
      const query = event.target.value.toLowerCase();
      filterProducts(query);
    }

    function handleHomeSearch(event) {
      const query = event.target.value.toLowerCase();
      const searchResults = document.getElementById('homeSearchResults');
      
      if (query.length > 0) {
        const filteredProducts = productsData.filter(product => 
          product.name.toLowerCase().includes(query) ||
          (product.description && product.description.toLowerCase().includes(query)) ||
          (product.category && product.category.toLowerCase().includes(query))
        );
        
        searchResults.style.display = 'grid';
        searchResults.innerHTML = '';
        
        if (filteredProducts.length > 0) {
          filteredProducts.forEach(product => {
            searchResults.appendChild(createProductCard(product));
          });
        } else {
          searchResults.innerHTML = '<div class="card-panel center" style="grid-column: 1 / -1;">No products found</div>';
        }
      } else {
        searchResults.style.display = 'none';
        searchResults.innerHTML = '';
      }
    }

    function filterProducts(query) {
      if (query.length === 0) {
        renderProducts();
        return;
      }
      
      const filteredProducts = productsData.filter(product => 
        product.name.toLowerCase().includes(query) ||
        (product.description && product.description.toLowerCase().includes(query)) ||
        (product.category && product.category.toLowerCase().includes(query))
      );
      
      renderProducts(filteredProducts);
    }

    // Price filtering
    function applyPriceFilter() {
      const minPrice = parseInt(document.getElementById('minPrice').value) || 0;
      const maxPrice = parseInt(document.getElementById('maxPrice').value) || 5000;
      
      const filteredProducts = productsData.filter(product => {
        const price = parseInt(product.price);
        return price >= minPrice && price <= maxPrice;
      });
      
      renderProducts(filteredProducts);
    }

    function resetPriceFilter() {
      document.getElementById('minPrice').value = '';
      document.getElementById('maxPrice').value = '';
      document.getElementById('minPriceSlider').value = 0;
      document.getElementById('maxPriceSlider').value = 5000;
      document.getElementById('minPriceValue').textContent = '₹0';
      document.getElementById('maxPriceValue').textContent = '₹5000';
      
      renderProducts();
    }

    // Product detail view
    function showProductDetail(product) {
      selectedProduct = product;
      
      // Add to recently viewed
      addToRecentlyViewed(product);
      
      // Update product detail page
      document.getElementById('detailTitle').textContent = product.name;
      document.getElementById('detailSku').textContent = `SKU: ${product.sku || product.id}`;
      document.getElementById('detailPrice').textContent = `₹${product.price}`;
      document.getElementById('detailDesc').textContent = product.description || '';
      document.getElementById('detailFullDesc').textContent = product.fullDescription || product.description || 'No detailed description available.';
      
      // Update stock status
      const stockStatus = document.getElementById('detailStockStatus');
      if (product.stock > 10) {
        stockStatus.textContent = 'In Stock';
        stockStatus.className = 'stock-status in-stock';
      } else if (product.stock > 0) {
        stockStatus.textContent = `Only ${product.stock} left`;
        stockStatus.className = 'stock-status low-stock';
      } else {
        stockStatus.textContent = 'Out of Stock';
        stockStatus.className = 'stock-status out-of-stock';
      }
      
      // Update breadcrumb
      document.getElementById('breadcrumbProductName').textContent = product.name;
      
      // Update share link
      document.getElementById('productShareLink').value = `${window.location.origin}${window.location.pathname}#product-${product.id}`;
      
      // Update wishlist button
      const isInWishlist = currentUser && wishlistData.some(item => item.productId === product.id);
      const wishlistBtn = document.getElementById('detailWishlistBtn');
      wishlistBtn.textContent = isInWishlist ? 'Remove from Wishlist' : 'Add to Wishlist';
      wishlistBtn.className = isInWishlist ? 'btn secondary active' : 'btn secondary';
      
      // Set up product images
      setupProductImages(product);
      
      // Load similar products
      loadSimilarProducts(product);
      
      // Show product detail page
      showPage('productDetailPage');
    }

    function setupProductImages(product) {
      const mainImage = document.getElementById('detailMainImage');
      const thumbnails = document.getElementById('detailThumbnails');
      const carouselDots = document.getElementById('detailCarouselDots');
      
      if (!product.images || product.images.length === 0) {
        // Use default image if no images available
        mainImage.style.backgroundImage = "url('https://images.unsplash.com/photo-1505740420928-5e560c06d30e?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=60')";
        thumbnails.innerHTML = '';
        carouselDots.innerHTML = '';
        return;
      }
      
      // Set main image
      mainImage.style.backgroundImage = `url('${product.images[0]}')`;
      mainImage.setAttribute('data-current-index', '0');
      
      // Create thumbnails
      thumbnails.innerHTML = '';
      product.images.forEach((image, index) => {
        const thumb = document.createElement('div');
        thumb.className = `product-detail-thumbnail ${index === 0 ? 'active' : ''}`;
        thumb.style.backgroundImage = `url('${image}')`;
        thumb.setAttribute('data-index', index);
        thumb.addEventListener('click', () => {
          // Update main image
          mainImage.style.backgroundImage = `url('${image}')`;
          mainImage.setAttribute('data-current-index', index);
          
          // Update active thumbnail
          document.querySelectorAll('.product-detail-thumbnail').forEach(t => t.classList.remove('active'));
          thumb.classList.add('active');
          
          // Update carousel dots
          document.querySelectorAll('.detail-carousel-dot').forEach(dot => dot.classList.remove('active'));
          document.querySelector(`.detail-carousel-dot[data-index="${index}"]`).classList.add('active');
        });
        thumbnails.appendChild(thumb);
      });
      
      // Create carousel dots
      carouselDots.innerHTML = '';
      product.images.forEach((_, index) => {
        const dot = document.createElement('div');
        dot.className = `detail-carousel-dot ${index === 0 ? 'active' : ''}`;
        dot.setAttribute('data-index', index);
        dot.addEventListener('click', () => {
          // Update main image
          mainImage.style.backgroundImage = `url('${product.images[index]}')`;
          mainImage.setAttribute('data-current-index', index);
          
          // Update active thumbnail
          document.querySelectorAll('.product-detail-thumbnail').forEach(t => t.classList.remove('active'));
          document.querySelector(`.product-detail-thumbnail[data-index="${index}"]`).classList.add('active');
          
          // Update carousel dots
          document.querySelectorAll('.detail-carousel-dot').forEach(d => d.classList.remove('active'));
          dot.classList.add('active');
        });
        carouselDots.appendChild(dot);
      });
      
      // Set up carousel controls
      const prevBtn = mainImage.querySelector('.prev');
      const nextBtn = mainImage.querySelector('.next');
      
      prevBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        navigateProductImage('prev');
      });
      
      nextBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        navigateProductImage('next');
      });
    }

    function navigateProductImage(direction) {
      const mainImage = document.getElementById('detailMainImage');
      const currentIndex = parseInt(mainImage.getAttribute('data-current-index'));
      const product = selectedProduct;
      
      if (!product.images || product.images.length <= 1) return;
      
      let newIndex;
      if (direction === 'prev') {
        newIndex = currentIndex === 0 ? product.images.length - 1 : currentIndex - 1;
      } else {
        newIndex = currentIndex === product.images.length - 1 ? 0 : currentIndex + 1;
      }
      
      // Update main image
      mainImage.style.backgroundImage = `url('${product.images[newIndex]}')`;
      mainImage.setAttribute('data-current-index', newIndex);
      
      // Update active thumbnail
      document.querySelectorAll('.product-detail-thumbnail').forEach(t => t.classList.remove('active'));
      document.querySelector(`.product-detail-thumbnail[data-index="${newIndex}"]`).classList.add('active');
      
      // Update carousel dots
      document.querySelectorAll('.detail-carousel-dot').forEach(dot => dot.classList.remove('active'));
      document.querySelector(`.detail-carousel-dot[data-index="${newIndex}"]`).classList.add('active');
    }

    function loadSimilarProducts(product) {
      const similarSlider = document.getElementById('similarProductsSlider');
      if (!similarSlider) return;
      
      // Find similar products (same category)
      const similarProducts = productsData.filter(p => 
        p.id !== product.id && 
        p.category === product.category
      ).slice(0, 10);
      
      similarSlider.innerHTML = '';
      
      if (similarProducts.length === 0) {
        similarSlider.innerHTML = '<div class="card-panel center">No similar products found</div>';
        return;
      }
      
      similarProducts.forEach(similarProduct => {
        similarSlider.appendChild(createProductCard(similarProduct, true));
      });
    }

    // Order flow validation
    function validateAndProceedToUserInfo() {
      const sizeSelected = document.querySelector('.size-option.selected');
      
      if (!sizeSelected) {
        document.getElementById('sizeValidationError').classList.add('show');
        return;
      }
      
      showPage('userPage');
    }

    function validateAndProceedToPayment() {
      const fullname = document.getElementById('fullname').value;
      const mobile = document.getElementById('mobile').value;
      const pincode = document.getElementById('pincode').value;
      const city = document.getElementById('city').value;
      const state = document.getElementById('state').value;
      const house = document.getElementById('house').value;
      
      if (!fullname || !mobile || !pincode || !city || !state || !house) {
        showToast('Please fill all required fields', 'error');
        return;
      }
      
      if (mobile.length !== 10 || isNaN(mobile)) {
        showToast('Please enter a valid 10-digit mobile number', 'error');
        return;
      }
      
      if (pincode.length !== 6 || isNaN(pincode)) {
        showToast('Please enter a valid 6-digit pincode', 'error');
        return;
      }
      
      showPage('paymentPage');
      updateOrderSummary();
    }

    function updateOrderSummary() {
      if (!selectedProduct) return;
      
      const quantity = parseInt(document.getElementById('qtySelect').value);
      const productPrice = parseInt(selectedProduct.price);
      const deliveryCharge = 50;
      const total = (productPrice * quantity) + deliveryCharge;
      
      document.getElementById('sumProduct').textContent = selectedProduct.name;
      document.getElementById('sumQty').textContent = quantity;
      document.getElementById('sumPrice').textContent = `₹${productPrice * quantity}`;
      document.getElementById('sumDel').textContent = `₹${deliveryCharge}`;
      document.getElementById('sumTotal').textContent = `₹${total}`;
    }

    // Order confirmation
    function confirmOrder() {
      if (!currentUser) {
        showLoginModal();
        return;
      }
      
      // Get order details
      const quantity = parseInt(document.getElementById('qtySelect').value);
      const size = document.querySelector('.size-option.selected').getAttribute('data-value');
      const paymentMethod = document.querySelector('input[name="pay"]:checked').value;
      
      // Get user details
      const fullname = document.getElementById('fullname').value;
      const mobile = document.getElementById('mobile').value;
      const pincode = document.getElementById('pincode').value;
      const city = document.getElementById('city').value;
      const state = document.getElementById('state').value;
      const house = document.getElementById('house').value;
      
      // Calculate totals
      const productPrice = parseInt(selectedProduct.price);
      const deliveryCharge = 50;
      const total = (productPrice * quantity) + deliveryCharge;
      
      // Create order object
      const order = {
        userId: currentUser.uid,
        productId: selectedProduct.id,
        productName: selectedProduct.name,
        productImage: selectedProduct.images ? selectedProduct.images[0] : '',
        productPrice: productPrice,
        quantity: quantity,
        size: size,
        totalAmount: total,
        paymentMethod: paymentMethod,
        customerName: fullname,
        customerMobile: mobile,
        customerAddress: {
          house: house,
          city: city,
          state: state,
          pincode: pincode
        },
        status: 'confirmed',
        orderDate: new Date().toISOString(),
        estimatedDelivery: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString() // 7 days from now
      };
      
      // Save order to Firebase
      const newOrderRef = db.ref('orders').push();
      newOrderRef.set(order)
        .then(() => {
          // Clear cache to force reload of orders
          clearCache(CACHE_KEYS.ORDERS);
          
          // Show success page
          showPage('successPage');
          
          // Send confirmation email
          sendOrderConfirmationEmail(order, newOrderRef.key);
        })
        .catch(error => {
          console.error('Error saving order:', error);
          showToast('Failed to place order. Please try again.', 'error');
        });
    }

    function sendOrderConfirmationEmail(order, orderId) {
      const templateParams = {
        to_name: order.customerName,
        to_email: currentUser.email,
        order_id: orderId,
        product_name: order.productName,
        quantity: order.quantity,
        total_amount: order.totalAmount,
        customer_address: `${order.customerAddress.house}, ${order.customerAddress.city}, ${order.customerAddress.state} - ${order.customerAddress.pincode}`,
        estimated_delivery: new Date(order.estimatedDelivery).toLocaleDateString('en-IN')
      };
      
      emailjs.send('service_buyzo', 'template_order_confirmation', templateParams)
        .then(response => {
          console.log('Order confirmation email sent:', response);
        })
        .catch(error => {
          console.error('Error sending email:', error);
        });
    }

    // Orders management
    function renderOrders() {
      const ordersList = document.getElementById('ordersList');
      const noOrders = document.getElementById('noOrders');
      
      if (!ordersList) return;
      
      if (ordersData.length === 0) {
        ordersList.innerHTML = '';
        if (noOrders) noOrders.style.display = 'block';
        return;
      }
      
      if (noOrders) noOrders.style.display = 'none';
      
      ordersList.innerHTML = '';
      
      // Sort orders by date (newest first)
      const sortedOrders = [...ordersData].sort((a, b) => 
        new Date(b.orderDate) - new Date(a.orderDate)
      );
      
      sortedOrders.forEach(order => {
        const orderCard = document.createElement('div');
        orderCard.className = 'order-card';
        orderCard.setAttribute('data-order-id', order.id);
        
        const statusClass = `status-${order.status}`;
        const statusText = order.status.charAt(0).toUpperCase() + order.status.slice(1);
        
        orderCard.innerHTML = `
          <div class="order-header">
            <div>
              <div class="order-id">Order #${order.id.substring(0, 8)}</div>
              <div class="order-date">Placed on ${new Date(order.orderDate).toLocaleDateString('en-IN')}</div>
              <div class="order-estimated">Estimated delivery: ${new Date(order.estimatedDelivery).toLocaleDateString('en-IN')}</div>
            </div>
            <div class="order-status ${statusClass}">${statusText}</div>
          </div>
          <div class="order-details">
            <div class="order-product-image" style="background-image: url('${order.productImage}')"></div>
            <div class="order-product-info">
              <div class="order-product-title">${order.productName}</div>
              <div class="order-product-price">₹${order.productPrice} x ${order.quantity}</div>
              <div class="order-product-meta">Size: ${order.size} | Total: ₹${order.totalAmount}</div>
            </div>
          </div>
          <div class="order-actions">
            ${order.status === 'confirmed' ? `<button class="btn error" onclick="cancelOrder('${order.id}')">Cancel Order</button>` : ''}
            <button class="btn secondary" onclick="viewOrderDetail('${order.id}')">View Details</button>
          </div>
        `;
        
        ordersList.appendChild(orderCard);
      });
    }

    function viewOrderDetail(orderId) {
      const order = ordersData.find(o => o.id === orderId);
      if (!order) return;
      
      const orderDetailContent = document.getElementById('orderDetailContent');
      if (!orderDetailContent) return;
      
      const statusClass = `status-${order.status}`;
      const statusText = order.status.charAt(0).toUpperCase() + order.status.slice(1);
      
      orderDetailContent.innerHTML = `
        <div class="order-detail-section">
          <div class="order-detail-label">Order ID</div>
          <div class="order-detail-value">${order.id}</div>
        </div>
        
        <div class="order-detail-section">
          <div class="order-detail-label">Order Status</div>
          <div class="order-detail-value">
            <span class="order-status ${statusClass}">${statusText}</span>
          </div>
        </div>
        
        <div class="order-detail-section">
          <div class="order-detail-label">Order Date</div>
          <div class="order-detail-value">${new Date(order.orderDate).toLocaleDateString('en-IN')}</div>
        </div>
        
        <div class="order-detail-section">
          <div class="order-detail-label">Estimated Delivery</div>
          <div class="order-detail-value">${new Date(order.estimatedDelivery).toLocaleDateString('en-IN')}</div>
        </div>
        
        <div class="order-detail-section">
          <div class="order-detail-label">Product Details</div>
          <div class="order-detail-product">
            <div class="order-detail-image" style="background-image: url('${order.productImage}')"></div>
            <div class="order-detail-product-info">
              <div style="font-weight: 600; margin-bottom: 8px;">${order.productName}</div>
              <div style="color: var(--accent); font-weight: 700; margin-bottom: 4px;">₹${order.productPrice}</div>
              <div style="color: var(--muted);">Quantity: ${order.quantity} | Size: ${order.size}</div>
            </div>
          </div>
        </div>
        
        <div class="order-detail-section">
          <div class="order-detail-label">Payment Details</div>
          <div class="order-detail-value">
            <div>Payment Method: ${order.paymentMethod === 'cod' ? 'Cash on Delivery' : 'Prepaid'}</div>
            <div>Total Amount: ₹${order.totalAmount}</div>
          </div>
        </div>
        
        <div class="order-detail-section">
          <div class="order-detail-label">Delivery Address</div>
          <div class="order-detail-value">
            <div>${order.customerName}</div>
            <div>${order.customerMobile}</div>
            <div>${order.customerAddress.house}</div>
            <div>${order.customerAddress.city}, ${order.customerAddress.state} - ${order.customerAddress.pincode}</div>
          </div>
        </div>
        
        ${order.status === 'confirmed' ? `
          <div class="order-detail-section">
            <button class="btn error" onclick="cancelOrder('${order.id}')">Cancel Order</button>
          </div>
        ` : ''}
        
        ${order.status === 'delivered' ? `
          <div class="delivery-congrats">
            <div class="delivery-congrats-icon">🎉</div>
            <div>Your order has been delivered successfully!</div>
          </div>
          
          <div class="refund-section">
            <div class="refund-title">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <polyline points="12 6 12 12 16 14"></polyline>
              </svg>
              Refund Available
            </div>
            <div class="refund-note">
              You have 7 days from delivery date to request a return/refund if you're not satisfied with the product.
            </div>
            <div class="refund-time-left">
              Time left: 7 days
            </div>
            <button class="btn secondary">Request Return/Refund</button>
          </div>
        ` : ''}
      `;
      
      showPage('orderDetailPage');
    }

    function showMyOrders() {
      if (!currentUser) {
        showLoginModal();
        return;
      }
      
      loadOrders(currentUser);
      showPage('myOrdersPage');
    }

    // Order cancellation
    function cancelOrder(orderId) {
      const order = ordersData.find(o => o.id === orderId);
      if (!order) return;
      
      // Store the order to be cancelled
      window.pendingCancellationOrderId = orderId;
      window.pendingCancellationOrder = order;
      
      // Show cancellation modal
      document.getElementById('cancellationModal').classList.add('active');
    }

    function closeCancellationModal() {
      document.getElementById('cancellationModal').classList.remove('active');
      // Clear selection
      document.querySelectorAll('input[name="cancelReason"]').forEach(radio => {
        radio.checked = false;
      });
    }

    function confirmCancellation() {
      const selectedReason = document.querySelector('input[name="cancelReason"]:checked');
      
      if (!selectedReason) {
        showToast('Please select a cancellation reason', 'error');
        return;
      }
      
      closeCancellationModal();
      
      // Show confirmation modal with refund details
      const order = window.pendingCancellationOrder;
      const refundAmount = order.totalAmount - (order.paymentMethod === 'prepaid' ? 20 : 0); // Deduct ₹20 for payment gateway charges
      
      document.getElementById('refundOrderAmount').textContent = `₹${order.totalAmount}`;
      document.getElementById('refundGatewayCharges').textContent = order.paymentMethod === 'prepaid' ? '₹20' : '₹0';
      document.getElementById('refundTotalAmount').textContent = `₹${refundAmount}`;
      
      document.getElementById('cancelConfirmModal').classList.add('active');
    }

    function closeCancelConfirmModal() {
      document.getElementById('cancelConfirmModal').classList.remove('active');
    }

    function confirmCancelFinal() {
      const orderId = window.pendingCancellationOrderId;
      
      // Update order status in Firebase
      db.ref('orders/' + orderId).update({
        status: 'cancelled',
        cancellationDate: new Date().toISOString()
      })
      .then(() => {
        // Clear cache to force reload
        clearCache(CACHE_KEYS.ORDERS);
        
        closeCancelConfirmModal();
        showToast('Order cancelled successfully', 'success');
        
        // Reload orders
        if (currentUser) {
          loadOrders(currentUser);
        }
      })
      .catch(error => {
        console.error('Error cancelling order:', error);
        showToast('Failed to cancel order. Please try again.', 'error');
      });
    }

    // Wishlist management
    function toggleWishlist(productId) {
      if (!currentUser) {
        showLoginModal();
        return;
      }
      
      const product = productsData.find(p => p.id === productId);
      if (!product) return;
      
      const existingItem = wishlistData.find(item => item.productId === productId);
      
      if (existingItem) {
        // Remove from wishlist
        db.ref('wishlist/' + existingItem.id).remove()
          .then(() => {
            // Clear cache to force reload
            clearCache(CACHE_KEYS.WISHLIST);
            
            showToast('Product removed from wishlist', 'success');
            
            // Reload wishlist
            loadWishlist(currentUser);
            
            // Update product cards
            renderProducts();
          })
          .catch(error => {
            console.error('Error removing from wishlist:', error);
            showToast('Failed to remove from wishlist', 'error');
          });
      } else {
        // Add to wishlist
        const wishlistItem = {
          userId: currentUser.uid,
          productId: productId,
          productName: product.name,
          productImage: product.images ? product.images[0] : '',
          productPrice: product.price,
          addedDate: new Date().toISOString()
        };
        
        db.ref('wishlist').push(wishlistItem)
          .then(() => {
            // Clear cache to force reload
            clearCache(CACHE_KEYS.WISHLIST);
            
            showToast('Product added to wishlist', 'success');
            
            // Reload wishlist
            loadWishlist(currentUser);
            
            // Update product cards
            renderProducts();
          })
          .catch(error => {
            console.error('Error adding to wishlist:', error);
            showToast('Failed to add to wishlist', 'error');
          });
      }
    }

    function renderWishlist() {
      const wishlistItems = document.getElementById('wishlistItems');
      const emptyWishlist = document.getElementById('emptyWishlist');
      
      if (!wishlistItems) return;
      
      if (wishlistData.length === 0) {
        wishlistItems.innerHTML = '';
        if (emptyWishlist) emptyWishlist.style.display = 'block';
        return;
      }
      
      if (emptyWishlist) emptyWishlist.style.display = 'none';
      
      wishlistItems.innerHTML = '';
      
      wishlistData.forEach(item => {
        const productCard = document.createElement('div');
        productCard.className = 'product-card';
        productCard.setAttribute('data-id', item.productId);
        
        productCard.innerHTML = `
          <div class="product-card-image" 
               style="background-image: url('${item.productImage}')">
          </div>
          <div class="product-card-body">
            <div class="product-card-title">${item.productName}</div>
            <div class="product-card-price">
              <div class="product-card-current-price">₹${item.productPrice}</div>
            </div>
            <div class="product-card-actions">
              <button class="action-btn wishlist-btn active" 
                      onclick="event.stopPropagation(); toggleWishlist('${item.productId}')">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                </svg>
              </button>
              <button class="btn" onclick="event.stopPropagation(); orderFromWishlist('${item.productId}')">Order Now</button>
            </div>
          </div>
        `;
        
        productCard.addEventListener('click', () => {
          const product = productsData.find(p => p.id === item.productId);
          if (product) {
            showProductDetail(product);
          }
        });
        
        wishlistItems.appendChild(productCard);
      });
    }

    function orderFromWishlist(productId) {
      const product = productsData.find(p => p.id === productId);
      if (product) {
        showProductDetail(product);
      }
    }

    // Authentication functions
    function showLoginModal() {
      document.getElementById('authModal').classList.add('active');
      switchAuthTab('login');
    }

    function closeAuthModal() {
      document.getElementById('authModal').classList.remove('active');
    }

    function switchAuthTab(tab) {
      // Update tabs
      document.getElementById('loginTab').classList.toggle('active', tab === 'login');
      document.getElementById('signupTab').classList.toggle('active', tab === 'signup');
      
      // Update forms
      document.getElementById('loginForm').classList.toggle('active', tab === 'login');
      document.getElementById('signupForm').classList.toggle('active', tab === 'signup');
      document.getElementById('forgotPasswordForm').classList.toggle('active', tab === 'forgotPassword');
    }

    function handleLogin() {
      const email = document.getElementById('loginEmail').value;
      const password = document.getElementById('loginPassword').value;
      
      if (!email || !password) {
        showToast('Please enter email and password', 'error');
        return;
      }
      
      auth.signInWithEmailAndPassword(email, password)
        .then((userCredential) => {
          showToast('Login successful', 'success');
          closeAuthModal();
        })
        .catch((error) => {
          console.error('Login error:', error);
          showToast('Login failed: ' + error.message, 'error');
        });
    }

    function handleSignup() {
      const name = document.getElementById('signupName').value;
      const email = document.getElementById('signupEmail').value;
      const password = document.getElementById('signupPassword').value;
      const confirmPassword = document.getElementById('signupConfirmPassword').value;
      
      if (!name || !email || !password || !confirmPassword) {
        showToast('Please fill all fields', 'error');
        return;
      }
      
      if (password !== confirmPassword) {
        showToast('Passwords do not match', 'error');
        return;
      }
      
      if (password.length < 6) {
        showToast('Password must be at least 6 characters', 'error');
        return;
      }
      
      auth.createUserWithEmailAndPassword(email, password)
        .then((userCredential) => {
          // Save user profile
          const user = userCredential.user;
          return db.ref('users/' + user.uid).set({
            name: name,
            email: email,
            createdAt: new Date().toISOString()
          });
        })
        .then(() => {
          showToast('Account created successfully', 'success');
          closeAuthModal();
        })
        .catch((error) => {
          console.error('Signup error:', error);
          showToast('Signup failed: ' + error.message, 'error');
        });
    }

    function handleResetPassword() {
      const email = document.getElementById('forgotPasswordEmail').value;
      
      if (!email) {
        showToast('Please enter your email', 'error');
        return;
      }
      
      auth.sendPasswordResetEmail(email)
        .then(() => {
          showToast('Password reset email sent', 'success');
          switchAuthTab('login');
        })
        .catch((error) => {
          console.error('Password reset error:', error);
          showToast('Failed to send reset email: ' + error.message, 'error');
        });
    }

    function handleGoogleSignIn() {
      const provider = new firebase.auth.GoogleAuthProvider();
      
      auth.signInWithPopup(provider)
        .then((result) => {
          const user = result.user;
          
          // Check if user already exists
          return db.ref('users/' + user.uid).once('value')
            .then(snapshot => {
              if (!snapshot.exists()) {
                // Create new user profile
                return db.ref('users/' + user.uid).set({
                  name: user.displayName,
                  email: user.email,
                  createdAt: new Date().toISOString()
                });
              }
            });
        })
        .then(() => {
          showToast('Login successful', 'success');
          closeAuthModal();
        })
        .catch((error) => {
          console.error('Google sign-in error:', error);
          showToast('Google sign-in failed: ' + error.message, 'error');
        });
    }

    function logout() {
      auth.signOut()
        .then(() => {
          showToast('Logged out successfully', 'success');
          // Clear user-specific cache
          clearCache(CACHE_KEYS.USER_DATA);
          clearCache(CACHE_KEYS.ORDERS);
          clearCache(CACHE_KEYS.WISHLIST);
        })
        .catch((error) => {
          console.error('Logout error:', error);
          showToast('Logout failed', 'error');
        });
    }

    function toggleAccountDropdown() {
      const dropdown = document.getElementById('accountDropdown');
      dropdown.classList.toggle('active');
    }

    function updateUserProfile() {
      if (!currentUser) return;
      
      const firstName = document.getElementById('profileFirstName').value;
      const lastName = document.getElementById('profileLastName').value;
      const phone = document.getElementById('profilePhone').value;
      
      const updates = {};
      if (firstName && lastName) updates.name = `${firstName} ${lastName}`;
      if (phone) updates.phone = phone;
      
      db.ref('users/' + currentUser.uid).update(updates)
        .then(() => {
          // Clear cache to force reload
          clearCache(CACHE_KEYS.USER_DATA);
          
          showToast('Profile updated successfully', 'success');
          
          // Reload user data
          loadUserData(currentUser);
        })
        .catch(error => {
          console.error('Error updating profile:', error);
          showToast('Failed to update profile', 'error');
        });
    }

    // Sharing functionality
    function shareProduct(platform) {
      if (!selectedProduct) return;
      
      const productName = selectedProduct.name;
      const productPrice = selectedProduct.price;
      const productImage = selectedProduct.images ? selectedProduct.images[0] : '';
      const shareText = `Check out ${productName} for just ₹${productPrice} on Buyzo Cart!`;
      const shareUrl = window.location.href.split('#')[0] + `#product-${selectedProduct.id}`;
      
      let shareLink = '';
      
      switch (platform) {
        case 'facebook':
          shareLink = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(shareUrl)}`;
          break;
        case 'twitter':
          shareLink = `https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}&url=${encodeURIComponent(shareUrl)}`;
          break;
        case 'whatsapp':
          shareLink = `https://wa.me/?text=${encodeURIComponent(shareText + ' ' + shareUrl)}`;
          break;
        default:
          // Fallback to generic share
          if (navigator.share) {
            navigator.share({
              title: productName,
              text: shareText,
              url: shareUrl
            });
            return;
          }
      }
      
      if (shareLink) {
        window.open(shareLink, '_blank', 'width=600,height=400');
      }
    }

    function copyShareLink() {
      const shareLinkInput = document.getElementById('productShareLink');
      shareLinkInput.select();
      shareLinkInput.setSelectionRange(0, 99999); // For mobile devices
      
      document.execCommand('copy');
      showToast('Link copied to clipboard', 'success');
    }

    // Newsletter subscription
    function handleNewsletterSubscription() {
      const email = document.getElementById('newsletterEmail').value;
      
      if (!email) {
        showToast('Please enter your email', 'error');
        return;
      }
      
      // In a real app, you would save this to your database
      console.log('Newsletter subscription:', email);
      
      showToast('Thank you for subscribing!', 'success');
      document.getElementById('newsletterEmail').value = '';
    }

    // WhatsApp contact
    function openWhatsApp() {
      const phoneNumber = '919876543210'; // Replace with actual number
      const message = 'Hello Buyzo Cart, I would like to know more about your products.';
      const url = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
      window.open(url, '_blank');
    }

    // Image zoom functionality
    function openImageZoom() {
      const mainImage = document.getElementById('detailMainImage');
      const currentIndex = parseInt(mainImage.getAttribute('data-current-index'));
      const product = selectedProduct;
      
      if (!product.images || product.images.length === 0) return;
      
      const zoomImage = document.getElementById('zoomImage');
      zoomImage.src = product.images[currentIndex];
      zoomImage.style.transform = 'scale(1)';
      
      document.getElementById('imageZoomModal').classList.add('active');
    }

    function closeImageZoom() {
      document.getElementById('imageZoomModal').classList.remove('active');
    }

    function zoomIn() {
      const zoomImage = document.getElementById('zoomImage');
      const currentScale = parseFloat(zoomImage.style.transform.replace('scale(', '').replace(')', '')) || 1;
      zoomImage.style.transform = `scale(${currentScale + 0.2})`;
    }

    function zoomOut() {
      const zoomImage = document.getElementById('zoomImage');
      const currentScale = parseFloat(zoomImage.style.transform.replace('scale(', '').replace(')', '')) || 1;
      if (currentScale > 0.4) {
        zoomImage.style.transform = `scale(${currentScale - 0.2})`;
      }
    }

    // Alert modal
    function showAlertModal(message, confirmCallback) {
      document.getElementById('alertModalMessage').textContent = message;
      window.alertModalCallback = confirmCallback;
      document.getElementById('alertModal').classList.add('active');
    }

    function closeAlertModal() {
      document.getElementById('alertModal').classList.remove('active');
    }

    function confirmAlertModal() {
      if (window.alertModalCallback) {
        window.alertModalCallback();
      }
      closeAlertModal();
    }

    // Toast notification
    function showToast(message, type = 'success') {
      const toast = document.getElementById('toast');
      const toastMessage = document.getElementById('toastMessage');
      
      toastMessage.textContent = message;
      toast.className = `toast ${type}`;
      toast.classList.add('show');
      
      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }

    // Close all modals
    function closeAllModals() {
      document.querySelectorAll('.modal-overlay').forEach(modal => {
        modal.classList.remove('active');
      });
    }

    // Utility function to generate unique ID
    function generateId() {
      return 'id_' + Math.random().toString(36).substr(2, 9);
    }
  </script>
</body>
</html>