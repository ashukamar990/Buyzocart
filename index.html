<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Buyzo Cart — Modern Shop</title>
  <meta name="description" content="Buyzo Cart — clean, mobile‑first shop template with product cards, step checkout, and policy modals."/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://images.unsplash.com"/>
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth-compat.js"></script>
  <!-- EmailJS SDK -->
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  <style>
    :root {
      --bg: #ffffff;
      --card: #ffffff;
      --accent: #2563eb;
      --accent-hover: #1d4ed8;
      --muted: #64748b;
      --muted-light: #94a3b8;
      --success: #22c55e;
      --error: #ef4444;
      --shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      --shadow-hover: 0 6px 16px rgba(0, 0, 0, 0.08);
      --ring: #dbeafe;
      --ink: #0f172a;
      --ink-2: #334155;
      --border: #e2e8f0;
      --radius: 12px;
      --transition: all 0.3s ease;
    }

    [data-theme="dark"] {
      --bg: #0f172a;
      --card: #1e293b;
      --accent: #3b82f6;
      --accent-hover: #2563eb;
      --muted: #94a3b8;
      --muted-light: #64748b;
      --success: #22c55e;
      --error: #ef4444;
      --shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      --shadow-hover: 0 6px 16px rgba(0, 0, 0, 0.3);
      --ring: #1e3a8a;
      --ink: #f1f5f9;
      --ink-2: #cbd5e1;
      --border: #334155;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg);
      color: var(--ink);
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      transition: var(--transition);
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    /* Header */
    header {
      background: var(--card);
      box-shadow: var(--shadow);
      padding: 16px 24px;
      position: sticky;
      top: 0;
      z-index: 50;
      border-bottom: 1px solid var(--border);
      transition: var(--transition);
    }

    .header-inner {
      max-width: 1100px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      gap: 16px;
      justify-content: space-between;
    }

    .brand {
      font-weight: 800;
      color: var(--ink);
      font-size: 20px;
      white-space: nowrap;
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
    }

    .brand .chip {
      background: var(--accent);
      color: #fff;
      font-weight: 700;
      padding: 6px 10px;
      border-radius: 8px;
      font-size: 14px;
    }

    .search-wrap {
      flex: 1;
      display: flex;
      max-width: 500px;
      margin: 16px 0;
    }

    .search-wrap input {
      flex: 1;
      padding: 12px 16px;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      font-family: inherit;
      font-size: 14px;
      transition: all 0.2s ease;
      background: var(--card);
      color: var(--ink);
    }

    .search-wrap input:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px var(--ring);
    }

    .cta {
      display: flex;
      gap: 10px;
      position: relative;
      align-items: center;
    }

    .btn {
      background: var(--accent);
      color: #fff;
      border: 0;
      padding: 10px 16px;
      border-radius: var(--radius);
      cursor: pointer;
      font-weight: 600;
      font-size: 14px;
      transition: all 0.2s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    .btn:hover {
      background: var(--accent-hover);
      transform: translateY(-1px);
    }

    .btn.secondary {
      background: #f1f5f9;
      color: var(--ink-2);
    }

    .btn.secondary:hover {
      background: #e2e8f0;
      transform: translateY(-1px);
    }

    .btn.error {
      background: var(--error);
    }

    .btn.error:hover {
      background: #dc2626;
    }

    .btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    /* Theme Toggle Button */
    .theme-toggle {
      background: none;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 8px;
      border-radius: 50%;
      transition: all 0.2s ease;
      color: var(--ink);
    }

    .theme-toggle:hover {
      background: var(--border);
    }

    .theme-toggle svg {
      width: 20px;
      height: 20px;
    }

    .theme-toggle .moon-icon {
      display: none;
    }

    [data-theme="dark"] .theme-toggle .sun-icon {
      display: none;
    }

    [data-theme="dark"] .theme-toggle .moon-icon {
      display: block;
    }

    /* Notification Badge */
    .notification-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background-color: var(--error);
      color: white;
      border-radius: 50%;
      width: 18px;
      height: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: bold;
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }

    /* Container */
    .container {
      max-width: 1100px;
      margin: 28px auto;
      padding: 0 20px;
      min-height: 70vh;
    }

    /* Hero */
    .hero {
      background: linear-gradient(135deg, #f0f9ff 0%, #ffffff 100%);
      border: 1px solid var(--border);
      box-shadow: var(--shadow);
      border-radius: var(--radius);
      padding: 24px;
      margin-bottom: 24px;
      transition: var(--transition);
    }

    [data-theme="dark"] .hero {
      background: linear-gradient(135deg, #1e3a8a 0%, #0f172a 100%);
    }

    .hero h1 {
      margin: 0 0 8px 0;
      font-size: 24px;
      font-weight: 700;
    }

    .hero p {
      margin: 0;
      color: var(--muted);
      font-size: 16px;
    }

    /* Steps */
    .steps {
      display: flex;
      gap: 8px;
      justify-content: center;
      margin: 24px 0;
      flex-wrap: wrap;
    }

    .step-pill {
      background: #fff;
      padding: 10px 16px;
      border-radius: 999px;
      border: 1px solid var(--border);
      font-weight: 600;
      color: var(--ink-2);
      cursor: pointer;
      user-select: none;
      transition: all 0.2s ease;
      font-size: 14px;
    }

    .step-pill:hover {
      border-color: var(--accent);
    }

    .step-pill.disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .step-pill.disabled:hover {
      border-color: var(--border);
    }

    /* NEW: Enhanced Product Grid */
    .product-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
    }

    .product-card {
      background: var(--card);
      border-radius: var(--radius);
      overflow: hidden;
      box-shadow: var(--shadow);
      display: flex;
      flex-direction: column;
      border: 1px solid var(--border);
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
    }

    .product-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-hover);
    }

    .product-card-image {
      height: 180px;
      background-position: center;
      background-size: cover;
      position: relative;
      cursor: pointer;
    }

    .product-card-badge {
      position: absolute;
      top: 10px;
      left: 10px;
      background: #ff4444;
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: 700;
      z-index: 2;
    }

    .product-card-body {
      padding: 16px;
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .product-card-title {
      font-weight: 600;
      margin-bottom: 6px;
      font-size: 16px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .product-card-rating {
      display: flex;
      align-items: center;
      margin-bottom: 8px;
      font-size: 14px;
    }

    .product-card-stars {
      color: #ffc107;
      margin-right: 4px;
    }

    .product-card-review-count {
      color: var(--muted);
    }

    .product-card-price {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
    }

    .product-card-current-price {
      font-weight: 700;
      color: var(--ink);
      font-size: 18px;
    }

    .product-card-original-price {
      text-decoration: line-through;
      color: var(--muted);
      font-size: 14px;
    }

    .product-card-actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 12px;
    }

    .action-btn {
      background: none;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 8px;
      border-radius: 50%;
      transition: all 0.2s ease;
    }

    .action-btn:hover {
      background: #f1f5f9;
    }

    .wishlist-btn {
      color: var(--muted);
    }

    .wishlist-btn.active {
      color: var(--error);
    }

    .share-btn {
      color: var(--muted);
    }

    /* Pages */
    .page {
      display: none;
    }

    .page.active {
      display: block;
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .card-panel {
      background: var(--card);
      border-radius: var(--radius);
      padding: 20px;
      box-shadow: var(--shadow);
      margin-bottom: 16px;
      border: 1px solid var(--border);
      transition: var(--transition);
    }

    .card-panel h3 {
      margin-top: 0;
      margin-bottom: 12px;
      font-size: 18px;
      font-weight: 600;
    }

    label {
      display: block;
      font-size: 14px;
      color: var(--muted);
      margin-bottom: 6px;
      font-weight: 500;
    }

    input, select, textarea {
      width: 100%;
      padding: 12px;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      background: var(--card);
      outline: none;
      font-family: inherit;
      font-size: 14px;
      transition: all 0.2s ease;
      color: var(--ink);
    }

    input:focus, select:focus, textarea:focus {
      box-shadow: 0 0 0 3px var(--ring);
      border-color: var(--accent);
    }

    .row {
      display: flex;
      gap: 16px;
    }

    .col {
      flex: 1;
    }

    .summary {
      background: #f8fafc;
      padding: 16px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
    }

    [data-theme="dark"] .summary {
      background: #1e293b;
    }

    .center {
      text-align: center;
    }

    footer {
      margin-top: 48px;
      text-align: center;
      color: var(--muted);
      padding: 28px 0;
      border-top: 1px solid var(--border);
      transition: var(--transition);
    }

    /* Thumbnails */
    .thumbs {
      display: flex;
      gap: 10px;
      margin-top: 12px;
      flex-wrap: wrap;
    }

    .thumb {
      width: 60px;
      height: 60px;
      border-radius: 8px;
      background-size: cover;
      background-position: center;
      border: 2px solid transparent;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .thumb:hover {
      transform: scale(1.05);
    }

    .thumb.selected {
      border-color: var(--accent);
    }

    /* FIX FOR PROBLEM 1: Remove blue background from order page slider */
    #orderPage .gallery-main {
      background-color: transparent !important;
    }

    .gallery-main {
      height: 340px;
      background-size: contain;
      background-position: center;
      background-repeat: no-repeat;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      position: relative;
      overflow: hidden;
    }

    /* Product Detail Page */
    .product-detail-page {
      padding: 20px;
    }
    
    .product-detail-container {
      display: flex;
      gap: 30px;
      flex-wrap: wrap;
    }
    
    .product-detail-gallery {
      flex: 1;
      min-width: 300px;
      position: relative;
    }
    
    .product-detail-info {
      flex: 1;
      min-width: 300px;
    }
    
    .product-detail-main-image {
      width: 100%;
      height: 400px;
      background-size: contain;
      background-position: center;
      background-repeat: no-repeat;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      margin-bottom: 16px;
      position: relative;
      overflow: hidden;
      cursor: zoom-in;
    }
    
    .product-detail-thumbnails {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    
    .product-detail-thumbnail {
      width: 80px;
      height: 80px;
      border-radius: 8px;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      border: 2px solid var(--border);
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .product-detail-thumbnail:hover,
    .product-detail-thumbnail.active {
      border-color: var(--accent);
      transform: scale(1.05);
    }
    
    .product-detail-title {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 8px;
    }
    
    .product-detail-price {
      font-size: 28px;
      font-weight: 700;
      color: var(--accent);
      margin-bottom: 12px;
    }
    
    .product-detail-desc {
      color: var(--muted);
      margin-bottom: 20px;
      font-size: 16px;
    }
    
    .product-detail-full-desc {
      margin-bottom: 24px;
      line-height: 1.6;
      color: var(--ink-2);
    }
    
    .product-detail-meta {
      background: #f8fafc;
      padding: 16px;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      margin-bottom: 24px;
    }

    [data-theme="dark"] .product-detail-meta {
      background: #1e293b;
    }
    
    .product-detail-meta h4 {
      margin: 0 0 12px 0;
      color: var(--accent);
      font-size: 16px;
    }
    
    .back-to-products {
      display: inline-flex;
      align-items: center;
      margin-bottom: 20px;
      color: var(--accent);
      font-weight: 600;
      cursor: pointer;
      padding: 8px 16px;
      border-radius: var(--radius);
      background: #f1f5f9;
      transition: all 0.2s ease;
    }

    [data-theme="dark"] .back-to-products {
      background: #1e293b;
    }
    
    .back-to-products:hover {
      background: #e2e8f0;
      color: var(--accent-hover);
    }

    /* Similar Products Section */
    .similar-products {
      margin-top: 40px;
      padding-top: 24px;
      border-top: 1px solid var(--border);
    }
    
    .similar-title {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 16px;
      color: var(--ink);
    }

    /* Carousel Controls for Product Detail */
    .detail-carousel-control {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.8);
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 18px;
      color: var(--ink);
      transition: all 0.2s ease;
      z-index: 10;
    }

    .detail-carousel-control:hover {
      background: rgba(255, 255, 255, 1);
    }

    .detail-carousel-control.prev {
      left: 10px;
    }

    .detail-carousel-control.next {
      right: 10px;
    }

    .detail-carousel-dots {
      position: absolute;
      bottom: 15px;
      left: 0;
      right: 0;
      display: flex;
      justify-content: center;
      gap: 8px;
      z-index: 10;
    }

    .detail-carousel-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.5);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .detail-carousel-dot.active {
      background: rgba(255, 255, 255, 1);
      transform: scale(1.2);
    }

    /* Policy Pages */
    .policy-page {
      padding: 20px;
      max-width: 800px;
      margin: 0 auto;
    }
    
    .policy-content {
      background: var(--card);
      border-radius: var(--radius);
      padding: 24px;
      box-shadow: var(--shadow);
      margin-bottom: 24px;
      border: 1px solid var(--border);
    }
    
    .policy-content h2 {
      margin-top: 0;
      color: var(--accent);
      border-bottom: 2px solid var(--border);
      padding-bottom: 12px;
      margin-bottom: 20px;
    }
    
    .policy-content h3 {
      margin: 24px 0 12px;
      color: var(--ink);
    }
    
    .policy-content p {
      margin-bottom: 16px;
      line-height: 1.6;
    }
    
    .policy-content ul, .policy-content ol {
      margin: 16px 0;
      padding-left: 24px;
    }
    
    .policy-content li {
      margin-bottom: 8px;
    }
    
    .back-button {
      display: inline-flex;
      align-items: center;
      margin-bottom: 20px;
      color: var(--accent);
      font-weight: 600;
      cursor: pointer;
    }
    
    .back-button:hover {
      color: var(--accent-hover);
    }

    /* Category Navigation */
    .categories {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin: 16px 0 24px;
      justify-content: center;
    }
    
    .category-pill {
      background: #fff;
      padding: 8px 16px;
      border-radius: 20px;
      border: 1px solid var(--border);
      font-weight: 500;
      color: var(--ink-2);
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 14px;
      white-space: nowrap;
    }
    
    .category-pill:hover, .category-pill.active {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
    }
    
    .category-pill.active {
      font-weight: 600;
    }

    /* Carousel Controls */
    .carousel-control {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.8);
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 18px;
      color: var(--ink);
      transition: all 0.2s ease;
      z-index: 10;
    }

    .carousel-control:hover {
      background: rgba(255, 255, 255, 1);
    }

    .carousel-control.prev {
      left: 10px;
    }

    .carousel-control.next {
      right: 10px;
    }

    .carousel-dots {
      position: absolute;
      bottom: 15px;
      left: 0;
      right: 0;
      display: flex;
      justify-content: center;
      gap: 8px;
      z-index: 10;
    }

    .carousel-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.5);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .carousel-dot.active {
      background: rgba(255, 255, 255, 1);
      transform: scale(1.2);
    }

    /* About Us Section */
    .about-us {
      margin-top: 40px;
      padding: 20px;
      background: #f8fafc;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      text-align: center;
    }

    [data-theme="dark"] .about-us {
      background: #1e293b;
    }

    .about-us h3 {
      margin-bottom: 12px;
      color: var(--accent);
    }

    .about-us p {
      color: var(--ink-2);
      max-width: 600px;
      margin: 0 auto;
    }

    /* My Orders Page */
    .orders-container {
      max-width: 800px;
      margin: 0 auto;
    }
    
    .order-card {
      background: var(--card);
      border-radius: var(--radius);
      padding: 20px;
      box-shadow: var(--shadow);
      margin-bottom: 20px;
      border: 1px solid var(--border);
      cursor: pointer;
      transition: all 0.3s ease;
      user-select: none;
    }
    
    .order-card:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-hover);
    }
    
    .order-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
      padding-bottom: 12px;
      border-bottom: 1px solid var(--border);
    }
    
    .order-id {
      font-weight: 600;
      color: var(--accent);
    }
    
    .order-date {
      color: var(--muted);
      font-size: 14px;
    }
    
    .order-estimated {
      color: var(--success);
      font-size: 14px;
      font-weight: 500;
      margin-top: 4px;
    }
    
    .order-status {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
    }
    
    .status-confirmed {
      background: #dcfce7;
      color: #166534;
    }
    
    .status-shipped {
      background: #dbeafe;
      color: #1e40af;
    }
    
    .status-delivered {
      background: #dcfce7;
      color: #166534;
    }
    
    .status-cancelled {
      background: #fee2e2;
      color: #991b1b;
    }
    
    .order-details {
      display: flex;
      gap: 16px;
      margin-bottom: 16px;
    }
    
    .order-product-image {
      width: 80px;
      height: 80px;
      border-radius: 8px;
      background-size: contain;
      background-position: center;
      background-repeat: no-repeat;
      border: 1px solid var(--border);
    }
    
    .order-product-info {
      flex: 1;
    }
    
    .order-product-title {
      font-weight: 600;
      margin-bottom: 6px;
    }
    
    .order-product-price {
      color: var(--accent);
      font-weight: 700;
      margin-bottom: 6px;
    }
    
    .order-product-meta {
      color: var(--muted);
      font-size: 14px;
    }
    
    .order-actions {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
    }

    /* Order Detail Page */
    .order-detail-page {
      background: var(--card);
      border-radius: var(--radius);
      padding: 24px;
      box-shadow: var(--shadow);
      margin-bottom: 24px;
    }
    
    .order-detail-section {
      margin-bottom: 20px;
      padding-bottom: 20px;
      border-bottom: 1px solid var(--border);
    }
    
    .order-detail-section:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
    }
    
    .order-detail-label {
      font-weight: 600;
      color: var(--muted);
      margin-bottom: 6px;
      font-size: 14px;
    }
    
    .order-detail-value {
      font-size: 16px;
      color: var(--ink);
    }
    
    .order-detail-image {
      width: 120px;
      height: 120px;
      border-radius: 8px;
      background-size: contain;
      background-position: center;
      background-repeat: no-repeat;
      border: 1px solid var(--border);
      margin-right: 16px;
    }
    
    .order-detail-product {
      display: flex;
      align-items: center;
      margin-bottom: 16px;
    }
    
    .order-detail-product-info {
      flex: 1;
    }

    /* Horizontal Product Slider */
    .product-slider {
      margin: 30px 0;
      position: relative;
    }
    
    .slider-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }
    
    .slider-title {
      font-size: 20px;
      font-weight: 700;
    }
    
    .slider-controls {
      display: flex;
      gap: 8px;
    }
    
    .slider-btn {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: var(--card);
      border: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .slider-btn:hover {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
    }
    
    .slider-container {
      overflow-x: auto;
      scroll-behavior: smooth;
      scrollbar-width: none; /* Firefox */
      -ms-overflow-style: none; /* IE and Edge */
      user-select: none;
    }
    
    .slider-container::-webkit-scrollbar {
      display: none; /* Chrome, Safari and Opera */
    }
    
    .slider-track {
      display: flex;
      gap: 16px;
      padding: 4px;
      user-select: none;
    }
    
    .slider-item {
      flex: 0 0 auto;
      width: 200px;
      background: var(--card);
      border-radius: var(--radius);
      overflow: hidden;
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
      transition: all 0.3s ease;
      cursor: pointer;
      user-select: none;
    }
    
    .slider-item:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-hover);
    }
    
    .slider-item-img {
      height: 150px;
      background-size: contain;
      background-position: center;
      background-repeat: no-repeat;
    }
    
    .slider-item-body {
      padding: 12px;
    }
    
    .slider-item-title {
      font-weight: 600;
      font-size: 14px;
      margin-bottom: 6px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .slider-item-price {
      font-weight: 700;
      color: var(--accent);
      font-size: 16px;
    }

    /* Toast Notification */
    .toast {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--card);
      color: var(--ink);
      padding: 16px 20px;
      border-radius: var(--radius);
      box-shadow: var(--shadow-hover);
      display: flex;
      align-items: center;
      gap: 10px;
      z-index: 1000;
      transform: translateX(-50%) translateY(-100px);
      opacity: 0;
      transition: all 0.3s ease;
      max-width: 90%;
      text-align: center;
    }
    
    .toast.show {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }
    
    .toast.success {
      border-left: 4px solid var(--success);
    }
    
    .toast.error {
      border-left: 4px solid var(--error);
    }
    
    .toast-icon {
      font-size: 20px;
    }
    
    .toast.success .toast-icon {
      color: var(--success);
    }
    
    .toast.error .toast-icon {
      color: var(--error);
    }

    /* Cancellation Modal */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 2000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    
    .modal-overlay.active {
      opacity: 1;
      visibility: visible;
    }
    
    .cancellation-modal {
      background: var(--card);
      border-radius: var(--radius);
      padding: 24px;
      box-shadow: var(--shadow-hover);
      max-width: 500px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
    }
    
    .cancellation-modal h3 {
      margin-top: 0;
      margin-bottom: 16px;
      color: var(--ink);
    }
    
    .cancellation-reason {
      margin-bottom: 12px;
      padding: 12px;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .cancellation-reason:hover {
      border-color: var(--accent);
      background: #f8fafc;
    }
    
    .cancellation-reason.selected {
      border-color: var(--accent);
      background: var(--ring);
    }
    
    .cancellation-reason input {
      margin-right: 8px;
      width: auto;
    }
    
    .cancellation-actions {
      display: flex;
      gap: 12px;
      margin-top: 20px;
      justify-content: flex-end;
    }

    /* Alert Modal - Updated with Cancel and Yes buttons */
    .alert-modal {
      background: var(--card);
      border-radius: var(--radius);
      padding: 24px;
      box-shadow: var(--shadow-hover);
      max-width: 500px;
      width: 90%;
      text-align: center;
    }
    
    .alert-modal h3 {
      margin-top: 0;
      margin-bottom: 16px;
      color: var(--ink);
    }
    
    .alert-modal p {
      margin-bottom: 20px;
      line-height: 1.6;
    }
    
    .alert-modal .alert-icon {
      font-size: 48px;
      color: var(--error);
      margin-bottom: 16px;
    }
    
    /* New styles for alert modal buttons */
    .alert-modal-buttons {
      display: flex;
      gap: 12px;
      justify-content: center;
      margin-top: 20px;
    }

    /* Quantity Input Controls */
    .quantity-control {
      display: flex;
      align-items: center;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      overflow: hidden;
      width: 100%;
    }
    
    .quantity-control button {
      background: #f1f5f9;
      border: none;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 16px;
      transition: all 0.2s ease;
    }
    
    .quantity-control button:hover {
      background: #e2e8f0;
    }
    
    .quantity-control input {
      flex: 1;
      text-align: center;
      border: none;
      border-left: 1px solid var(--border);
      border-right: 1px solid var(--border);
      border-radius: 0;
      padding: 10px;
      margin: 0;
      background: var(--card);
      color: var(--ink);
    }

    /* Delivery Congratulations */
    .delivery-congrats {
      background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
      border: 1px solid #22c55e;
      border-radius: var(--radius);
      padding: 16px;
      margin-top: 16px;
      text-align: center;
      color: #166534;
      font-weight: 600;
    }
    
    .delivery-congrats-icon {
      font-size: 24px;
      margin-bottom: 8px;
    }

    /* Refund Request Section */
    .refund-section {
      background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
      border: 1px solid #f59e0b;
      border-radius: var(--radius);
      padding: 16px;
      margin-top: 16px;
    }
    
    .refund-title {
      font-size: 16px;
      font-weight: 600;
      color: #92400e;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .refund-note {
      color: #92400e;
      font-size: 14px;
      margin-bottom: 12px;
    }
    
    .refund-time-left {
      background: #fef3c7;
      border: 1px solid #f59e0b;
      border-radius: 20px;
      padding: 6px 12px;
      font-size: 12px;
      font-weight: 600;
      color: #92400e;
      display: inline-block;
      margin-bottom: 12px;
    }

    /* Mobile Menu Icon */
    .menu-icon {
      display: none;
      flex-direction: column;
      justify-content: space-between;
      width: 24px;
      height: 18px;
      cursor: pointer;
    }
    
    .menu-icon span {
      height: 2px;
      width: 100%;
      background-color: var(--ink);
      border-radius: 2px;
      transition: all 0.3s ease;
    }
    
    /* Mobile Menu */
    .mobile-menu {
      position: fixed;
      top: 0;
      left: -280px;
      width: 280px;
      height: 100vh;
      background: var(--card);
      box-shadow: var(--shadow-hover);
      z-index: 1000;
      transition: left 0.3s ease;
      overflow-y: auto;
    }
    
    .mobile-menu.active {
      left: 0;
    }
    
    .menu-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px 20px;
      border-bottom: 1px solid var(--border);
    }
    
    .menu-close {
      font-size: 24px;
      cursor: pointer;
      color: var(--muted);
    }
    
    .menu-items {
      padding: 16px 0;
    }
    
    .menu-item {
      display: flex;
      align-items: center;
      padding: 12px 20px;
      color: var(--ink);
      transition: all 0.2s ease;
      cursor: pointer;
    }
    
    .menu-item:hover {
      background: #f1f5f9;
      color: var(--accent);
    }
    
    .menu-item svg {
      margin-right: 12px;
      width: 18px;
      height: 18px;
    }
    
    .menu-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: 999;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    
    .menu-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    /* NEW FEATURES STYLES */

    /* Recently Viewed Products */
    .recently-viewed {
      margin: 40px 0;
      padding-top: 24px;
      border-top: 1px solid var(--border);
    }

    .recently-viewed-title {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 16px;
      color: var(--ink);
    }

    /* Newsletter Section */
    .newsletter-section {
      background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
      border-radius: var(--radius);
      padding: 32px 24px;
      text-align: center;
      margin: 40px 0;
      border: 1px solid var(--border);
    }

    [data-theme="dark"] .newsletter-section {
      background: linear-gradient(135deg, #1e3a8a 0%, #0f172a 100%);
    }

    .newsletter-title {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 8px;
      color: var(--ink);
    }

    .newsletter-desc {
      color: var(--muted);
      margin-bottom: 20px;
      max-width: 500px;
      margin-left: auto;
      margin-right: auto;
    }

    .newsletter-form {
      display: flex;
      max-width: 400px;
      margin: 0 auto;
      gap: 10px;
    }

    .newsletter-input {
      flex: 1;
      padding: 12px 16px;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      font-family: inherit;
      font-size: 14px;
      background: var(--card);
      color: var(--ink);
    }

    .newsletter-btn {
      background: var(--accent);
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: var(--radius);
      cursor: pointer;
      font-weight: 600;
      transition: all 0.2s ease;
    }

    .newsletter-btn:hover {
      background: var(--accent-hover);
    }

    /* Social Sharing */
    .social-sharing {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }

    .share-btn {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 8px 12px;
      border-radius: var(--radius);
      background: #f1f5f9;
      color: var(--ink);
      font-size: 14px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .share-btn:hover {
      background: #e2e8f0;
      transform: translateY(-1px);
    }

    .share-btn.facebook { background: #f0f7ff; color: #1877f2; }
    .share-btn.twitter { background: #f0f9ff; color: #1da1f2; }
    .share-btn.whatsapp { background: #f0fff4; color: #25d366; }

    /* Stock Status */
    .stock-status {
      display: inline-block;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: 600;
      margin-bottom: 12px;
    }

    .in-stock {
      background: #dcfce7;
      color: #166534;
    }

    .low-stock {
      background: #fef3c7;
      color: #92400e;
    }

    .out-of-stock {
      background: #fee2e2;
      color: #991b1b;
    }

    /* Product SKU */
    .product-sku {
      color: var(--muted);
      font-size: 14px;
      margin-bottom: 8px;
    }

    /* Breadcrumb Navigation */
    .breadcrumb {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 20px;
      font-size: 14px;
      color: var(--muted);
    }

    .breadcrumb a {
      color: var(--accent);
    }

    .breadcrumb span {
      color: var(--muted-light);
    }

    /* Loading Spinner */
    .loading-spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 2px solid #f3f3f3;
      border-top: 2px solid var(--accent);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Price Filter */
    .price-filter {
      background: var(--card);
      border-radius: var(--radius);
      padding: 16px;
      margin-bottom: 20px;
      border: 1px solid var(--border);
    }

    .price-filter-title {
      font-weight: 600;
      margin-bottom: 12px;
      font-size: 16px;
    }

    .price-range {
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .price-input {
      flex: 1;
      background: var(--card);
      color: var(--ink);
    }

    /* Wishlist Button Active State - UPDATED TO RED */
    .wishlist-btn.active {
      color: var(--error) !important;
      background: #fee2e2 !important;
      border-color: var(--error) !important;
    }

    .wishlist-btn.active:hover {
      background: #fecaca !important;
    }

    /* Product Detail Page Wishlist Button - UPDATED TO RED */
    #detailWishlistBtn.active {
      background: var(--error) !important;
      color: white !important;
      border-color: var(--error) !important;
    }

    #detailWishlistBtn.active:hover {
      background: #dc2626 !important;
    }

    /* Size and Color Selection */
    .size-color-options {
      display: flex;
      gap: 12px;
      margin-bottom: 16px;
    }

    .size-option, .color-option {
      padding: 8px 12px;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      cursor: pointer;
      transition: all 0.2s ease;
      background: var(--card);
      color: var(--ink);
    }

    .size-option:hover, .color-option:hover {
      border-color: var(--accent);
    }

    .size-option.selected, .color-option.selected {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
    }

    /* Simple Price Range Slider */
    .price-range-slider {
      margin: 16px 0;
    }

    .price-slider {
      width: 100%;
      height: 5px;
      border-radius: 5px;
      background: #ddd;
      outline: none;
      -webkit-appearance: none;
    }

    .price-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: var(--accent);
      cursor: pointer;
    }

    .price-slider::-moz-range-thumb {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: var(--accent);
      cursor: pointer;
      border: none;
    }

    .price-range-values {
      display: flex;
      justify-content: space-between;
      margin-top: 8px;
      font-size: 14px;
      color: var(--muted);
    }

    /* Remove blue overlay from product images */
    .product-img-slider:focus,
    .product-detail-main-image:focus,
    .gallery-main:focus {
      outline: none;
      box-shadow: none;
    }

    /* Product image container fixes */
    .product-img-slider-container,
    .product-detail-gallery,
    .gallery-main {
      background-color: transparent !important;
    }

    /* NEW: Remove blue highlight from product and order pages */
    .card,
    .card-body,
    .product-img-slider-container,
    .gallery-main,
    .product-detail-main-image,
    .product-detail-thumbnail,
    .slider-item,
    .order-card,
    .order-detail-page {
      -webkit-tap-highlight-color: transparent;
      outline: none;
    }

    /* Keep blue highlight only for menu items */
    .menu-item {
      -webkit-tap-highlight-color: rgba(37, 99, 235, 0.1);
    }

    /* Size validation error styling */
    .size-validation-error {
      color: var(--error);
      font-size: 14px;
      margin-top: 8px;
      display: none;
    }

    .size-validation-error.show {
      display: block;
    }

    /* Cancel Order Flow Modal */
    .cancel-confirm-modal {
      background: var(--card);
      border-radius: var(--radius);
      padding: 24px;
      box-shadow: var(--shadow-hover);
      max-width: 500px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
    }

    .cancel-confirm-modal h3 {
      margin-top: 0;
      margin-bottom: 16px;
      color: var(--ink);
    }

    .cancel-confirm-modal .payment-charge-note {
      background: #fef3c7;
      border: 1px solid #f59e0b;
      border-radius: var(--radius);
      padding: 16px;
      margin: 16px 0;
      color: #92400e;
    }

    .cancel-confirm-modal .refund-calculation {
      background: #f8fafc;
      border-radius: var(--radius);
      padding: 16px;
      margin: 16px 0;
    }

    [data-theme="dark"] .cancel-confirm-modal .refund-calculation {
      background: #1e293b;
    }

    .cancel-confirm-modal .refund-calculation p {
      margin: 8px 0;
    }

    .cancel-confirm-actions {
      display: flex;
      gap: 12px;
      margin-top: 20px;
      justify-content: flex-end;
    }

    /* NEW: Login/Signup Modal Styles */
    .auth-modal {
      background: var(--card);
      border-radius: var(--radius);
      padding: 32px;
      box-shadow: var(--shadow-hover);
      max-width: 450px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
      position: relative;
    }
    
    .auth-modal h3 {
      margin-top: 0;
      margin-bottom: 24px;
      color: var(--ink);
      text-align: center;
      font-size: 24px;
    }
    
    .auth-tabs {
      display: flex;
      margin-bottom: 24px;
      border-bottom: 1px solid var(--border);
    }
    
    .auth-tab {
      flex: 1;
      padding: 12px;
      text-align: center;
      cursor: pointer;
      font-weight: 600;
      color: var(--muted);
      transition: all 0.2s ease;
      border-bottom: 2px solid transparent;
    }
    
    .auth-tab.active {
      color: var(--accent);
      border-bottom-color: var(--accent);
    }
    
    .auth-form {
      display: none;
    }
    
    .auth-form.active {
      display: block;
    }
    
    .auth-form-group {
      margin-bottom: 16px;
    }
    
    .auth-form-footer {
      margin-top: 24px;
      text-align: center;
      font-size: 14px;
      color: var(--muted);
    }
    
    .auth-form-footer a {
      color: var(--accent);
      cursor: pointer;
    }
    
    .user-profile {
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      position: relative;
    }
    
    .user-avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: var(--accent);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 14px;
    }
    
    .user-name {
      font-weight: 600;
      color: var(--ink);
    }
    
    /* Account Dropdown Menu */
    .account-dropdown {
      position: absolute;
      top: 100%;
      right: 0;
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow-hover);
      min-width: 200px;
      padding: 8px 0;
      margin-top: 8px;
      z-index: 100;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: all 0.2s ease;
    }
    
    .account-dropdown.active {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }
    
    .account-dropdown-item {
      display: flex;
      align-items: center;
      padding: 12px 16px;
      color: var(--ink);
      transition: all 0.2s ease;
      cursor: pointer;
    }
    
    .account-dropdown-item:hover {
      background: #f1f5f9;
    }
    
    .account-dropdown-item svg {
      margin-right: 12px;
      width: 16px;
      height: 16px;
    }
    
    /* NEW: Close button for auth modal */
    .auth-close {
      position: absolute;
      top: 16px;
      right: 16px;
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: var(--muted);
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: all 0.2s ease;
    }
    
    .auth-close:hover {
      background: #f1f5f9;
      color: var(--ink);
    }
    
    /* NEW: Google Sign-In Button */
    .google-signin-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      width: 100%;
      padding: 12px 16px;
      background: white;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      margin-top: 16px;
    }
    
    .google-signin-btn:hover {
      background: #f8fafc;
      border-color: var(--accent);
    }
    
    .google-signin-btn img {
      width: 18px;
      height: 18px;
    }
    
    .divider {
      display: flex;
      align-items: center;
      margin: 20px 0;
      color: var(--muted);
      font-size: 14px;
    }
    
    .divider::before,
    .divider::after {
      content: '';
      flex: 1;
      border-bottom: 1px solid var(--border);
    }
    
    .divider span {
      padding: 0 12px;
    }

    /* NEW: Image Zoom Modal */
    .zoom-modal {
      background: rgba(0, 0, 0, 0.9);
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    .zoom-content {
      position: relative;
      max-width: 90%;
      max-height: 90%;
    }
    
    .zoom-image {
      max-width: 100%;
      max-height: 90vh;
      object-fit: contain;
    }
    
    .zoom-close {
      position: absolute;
      top: 20px;
      right: 20px;
      background: rgba(255, 255, 255, 0.2);
      color: white;
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 20px;
      transition: all 0.2s ease;
    }
    
    .zoom-close:hover {
      background: rgba(255, 255, 255, 0.3);
    }
    
    .zoom-controls {
      position: absolute;
      bottom: 20px;
      left: 0;
      right: 0;
      display: flex;
      justify-content: center;
      gap: 10px;
    }
    
    .zoom-btn {
      background: rgba(255, 255, 255, 0.2);
      color: white;
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 18px;
      transition: all 0.2s ease;
    }
    
    .zoom-btn:hover {
      background: rgba(255, 255, 255, 0.3);
    }

    /* NEW: Enhanced Product Gallery */
    .product-gallery-zoom {
      position: relative;
      cursor: zoom-in;
    }
    
    .zoom-indicator {
      position: absolute;
      bottom: 10px;
      right: 10px;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .product-gallery-zoom:hover .zoom-indicator {
      opacity: 1;
    }

    /* NEW: Forgot Password Form Styles */
    .forgot-password-form {
      display: none;
    }
    
    .forgot-password-form.active {
      display: block;
    }
    
    .back-to-login {
      color: var(--accent);
      cursor: pointer;
      font-weight: 600;
      margin-top: 16px;
      text-align: center;
    }
    
    .back-to-login:hover {
      color: var(--accent-hover);
    }

    /* === Clean Animated Banners CSS === */
    .hero-messages {
      margin-top: 10px;
      font-size: 16px;
      color: var(--muted);
      font-weight: 600;
      display: flex;
      justify-content: center;
      gap: 24px;
      overflow: hidden;
      position: relative;
    }
    .hero-messages span {
      opacity: 0;
      position: absolute;
      transition: opacity 0.6s ease;
    }
    .hero-messages span.active {
      opacity: 1;
      position: relative;
    }

    .highlight-strip {
      margin-top: 16px;
      padding: 10px 16px;
      border-radius: 8px;
      background: linear-gradient(90deg,#2563eb,#1d4ed8);
      color: white;
      font-weight: 600;
      text-align: center;
      animation: pulseStrip 4s infinite;
      cursor: pointer;
    }
    @keyframes pulseStrip {
      0%,100% { box-shadow: 0 0 0 rgba(37,99,235,0); }
      50% { box-shadow: 0 0 16px rgba(37,99,235,0.35); }
    }

    /* Search Results Grid */
    #homeSearchResults {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
      margin-top: 20px;
    }

    /* Trending Now Section */
    .trending-section {
      margin: 30px 0;
    }

    .trending-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .trending-title {
      font-size: 20px;
      font-weight: 700;
    }

    /* NEW: Banner Carousel Styles */
    .banner-carousel {
      position: relative;
      width: 100%;
      height: 200px;
      border-radius: var(--radius);
      overflow: hidden;
      margin-bottom: 24px;
      box-shadow: var(--shadow);
    }

    .banner-track {
      display: flex;
      width: 100%;
      height: 100%;
      transition: transform 0.5s ease;
    }

    .banner-slide {
      min-width: 100%;
      height: 100%;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
    }

    .banner-controls {
      position: absolute;
      bottom: 15px;
      left: 0;
      right: 0;
      display: flex;
      justify-content: center;
      gap: 8px;
      z-index: 10;
    }

    .banner-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.5);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .banner-dot.active {
      background: rgba(255, 255, 255, 1);
      transform: scale(1.2);
    }

    /* NEW: Category Circles Styles */
    .category-circles {
      margin: 30px 0;
    }

    .category-circles-title {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 16px;
      text-align: center;
    }

    .category-circles-container {
      display: flex;
      gap: 20px;
      overflow-x: auto;
      padding: 10px 0;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }

    .category-circles-container::-webkit-scrollbar {
      display: none;
    }

    .category-circle {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      min-width: 80px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .category-circle:hover {
      transform: translateY(-5px);
    }

    .category-circle-image {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      border: 2px solid var(--border);
      transition: all 0.2s ease;
    }

    .category-circle:hover .category-circle-image {
      border-color: var(--accent);
    }

    .category-circle-name {
      font-size: 12px;
      font-weight: 600;
      text-align: center;
      color: var(--ink);
    }

    /* NEW: Contact WhatsApp Button */
    .whatsapp-contact-button {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: #25D366;
      color: white;
      padding: 12px 20px;
      border-radius: var(--radius);
      font-weight: 600;
      margin-top: 12px;
      transition: all 0.2s ease;
      cursor: pointer;
    }

    .whatsapp-contact-button:hover {
      background: #128C7E;
      transform: translateY(-2px);
    }

    /* NEW: Enhanced Product Image for Mobile */
    .product-detail-main-image.mobile-optimized {
      height: 60vh;
      max-height: 500px;
    }

    /* NEW: Professional Enhancements */
    .professional-badge {
      position: absolute;
      top: 10px;
      right: 10px;
      background: var(--accent);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 10px;
      font-weight: 700;
      z-index: 2;
    }

    .professional-tag {
      display: inline-block;
      background: var(--accent);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 10px;
      font-weight: 600;
      margin-left: 8px;
    }

    .professional-header {
      background: linear-gradient(135deg, var(--accent), var(--accent-hover));
      color: white;
      padding: 16px;
      border-radius: var(--radius);
      margin-bottom: 20px;
      text-align: center;
    }

    /* NEW: Account Page Styles */
    .account-page {
      padding: 20px;
    }

    .account-header {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 24px;
      padding-bottom: 16px;
      border-bottom: 1px solid var(--border);
    }

    .account-avatar {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: var(--accent);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 32px;
      font-weight: 700;
    }

    .account-info h2 {
      margin: 0 0 4px 0;
      font-size: 24px;
    }

    .account-info p {
      margin: 0;
      color: var(--muted);
    }

    .account-menu {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
      margin-bottom: 24px;
    }

    .account-menu-item {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
      cursor: pointer;
      transition: all 0.2s ease;
      text-align: center;
    }

    .account-menu-item:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-hover);
      border-color: var(--accent);
    }

    .account-menu-item svg {
      width: 24px;
      height: 24px;
      color: var(--accent);
    }

    .account-menu-item span {
      font-weight: 600;
      font-size: 14px;
    }

    .account-section {
      background: var(--card);
      border-radius: var(--radius);
      padding: 24px;
      box-shadow: var(--shadow);
      margin-bottom: 24px;
      border: 1px solid var(--border);
    }

    .account-section h3 {
      margin-top: 0;
      margin-bottom: 16px;
      color: var(--accent);
      font-size: 18px;
    }

    .profile-form {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .address-card {
      background: #f8fafc;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 16px;
      margin-bottom: 12px;
      transition: all 0.2s ease;
    }

    [data-theme="dark"] .address-card {
      background: #1e293b;
    }

    .address-card:hover {
      border-color: var(--accent);
    }

    .address-card.selected {
      border-color: var(--accent);
      background: var(--ring);
    }

    .address-actions {
      display: flex;
      gap: 8px;
      margin-top: 12px;
    }

    .coupon-card {
      background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 16px;
      margin-bottom: 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    [data-theme="dark"] .coupon-card {
      background: linear-gradient(135deg, #1e3a8a 0%, #0f172a 100%);
    }

    .coupon-code {
      font-weight: 700;
      color: var(--accent);
      font-size: 16px;
    }

    .coupon-desc {
      color: var(--muted);
      font-size: 14px;
    }

    .notification-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 0;
      border-bottom: 1px solid var(--border);
    }

    .notification-item:last-child {
      border-bottom: none;
    }

    .notification-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: #f1f5f9;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--accent);
    }

    .notification-content {
      flex: 1;
    }

    .notification-title {
      font-weight: 600;
      margin-bottom: 4px;
    }

    .notification-desc {
      color: var(--muted);
      font-size: 14px;
    }

    .notification-time {
      color: var(--muted-light);
      font-size: 12px;
    }

    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 50px;
      height: 24px;
    }

    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: .4s;
      border-radius: 24px;
    }

    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 16px;
      width: 16px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }

    input:checked + .toggle-slider {
      background-color: var(--accent);
    }

    input:checked + .toggle-slider:before {
      transform: translateX(26px);
    }

    .setting-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 0;
      border-bottom: 1px solid var(--border);
    }

    .setting-item:last-child {
      border-bottom: none;
    }

    .setting-info h4 {
      margin: 0 0 4px 0;
      font-size: 14px;
      font-weight: 600;
    }

    .setting-info p {
      margin: 0;
      color: var(--muted);
      font-size: 12px;
    }

    /* NEW: Footer Styles */
    .footer-container {
      max-width: 1100px;
      margin: 0 auto;
      padding: 0 20px;
    }

    .footer-content {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 40px;
      margin-bottom: 30px;
      text-align: left;
    }

    .footer-section h3 {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 16px;
      color: var(--ink);
    }

    .footer-links {
      list-style: none;
    }

    .footer-links li {
      margin-bottom: 10px;
    }

    .footer-links a {
      color: var(--muted);
      transition: color 0.2s ease;
      cursor: pointer;
    }

    .footer-links a:hover {
      color: var(--accent);
    }

    .contact-info {
      color: var(--muted);
    }

    .contact-info p {
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .social-links {
      display: flex;
      gap: 15px;
      margin-top: 20px;
    }

    .social-link {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: var(--card);
      color: var(--ink);
      transition: all 0.2s ease;
      border: 1px solid var(--border);
    }

    .social-link:hover {
      background: var(--accent);
      color: white;
      transform: translateY(-2px);
    }

    .copyright {
      text-align: center;
      padding: 20px 0;
      background-color: var(--card);
      color: var(--muted);
      font-size: 14px;
      border-top: 1px solid var(--border);
      transition: var(--transition);
    }

    /* Social Media Icons in Mobile Menu */
    .social-menu-item {
      display: flex;
      align-items: center;
      padding: 12px 20px;
      color: var(--ink);
      transition: all 0.2s ease;
      cursor: pointer;
      justify-content: center;
    }
    
    .social-menu-item:hover {
      background: #f1f5f9;
    }
    
    .social-menu-item svg {
      width: 24px;
      height: 24px;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .header-inner {
        flex-wrap: wrap;
      }
      
      .search-wrap {
        margin-left: 0;
        order: 3;
        width: 100%;
        max-width: 100%;
      }
      
      .row {
        flex-direction: column;
      }
      
      /* Keep 2 columns on mobile */
      .product-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
      }
      
      .steps {
        gap: 6px;
      }
      
      .step-pill {
        font-size: 12px;
        padding: 8px 12px;
      }
      
      .policy-content {
        padding: 16px;
      }
      
      .categories {
        overflow-x: auto;
        padding-bottom: 8px;
        justify-content: flex-start;
      }

      .carousel-control {
        width: 32px;
        height: 32px;
        font-size: 14px;
      }
      
      .product-detail-container {
        flex-direction: column;
      }
      
      .product-detail-main-image {
        height: 60vh;
        max-height: 500px;
      }
      
      .order-details {
        flex-direction: column;
      }
      
      .order-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
      }
      
      .order-actions {
        justify-content: flex-start;
      }
      
      .cancellation-modal {
        padding: 16px;
      }
      
      .cancellation-actions {
        flex-direction: column;
      }
      
      .alert-modal {
        padding: 16px;
      }
      
      .alert-modal-buttons {
        flex-direction: column;
      }
      
      .quantity-control button {
        width: 36px;
        height: 36px;
      }
      
      /* Show menu icon on mobile */
      .menu-icon {
        display: flex;
      }
      
      /* Hide some CTA buttons on mobile to make space */
      .cta .btn:not(:last-child) {
        display: none;
      }
      
      /* Banner carousel mobile */
      .banner-carousel {
        height: 150px;
      }
      
      /* Category circles mobile */
      .category-circles-container {
        gap: 15px;
      }
      
      .category-circle {
        min-width: 70px;
      }
      
      .category-circle-image {
        width: 60px;
        height: 60px;
      }

      /* Account page mobile */
      .account-menu {
        grid-template-columns: 1fr;
      }

      .account-header {
        flex-direction: column;
        text-align: center;
      }

      /* Footer mobile */
      .footer-content {
        grid-template-columns: 1fr;
        gap: 30px;
      }

      /* Social menu items mobile */
      .social-menu-item {
        padding: 15px 20px;
      }
    }

    @media (max-width: 480px) {
      .container {
        padding: 0 16px;
      }
      
      .hero {
        padding: 20px;
      }
      
      .card-panel {
        padding: 16px;
      }
      
      .product-detail-main-image {
        height: 50vh;
        max-height: 400px;
      }
      
      .product-detail-thumbnail {
        width: 60px;
        height: 60px;
      }
      
      /* Keep 2 columns on very small screens */
      .product-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
      }
      
      /* Banner carousel mobile */
      .banner-carousel {
        height: 120px;
      }
    }
  </style>

</head>
<body>
  <!-- Mobile Menu Overlay -->
  <div class="menu-overlay" id="menuOverlay"></div>
  
  <!-- Mobile Menu -->
  <div class="mobile-menu" id="mobileMenu">
    <div class="menu-header">
      <div class="brand">
        <span class="chip">BUYZO</span>
        <span>Cart</span>
      </div>
      <div class="menu-close" id="menuClose">×</div>
    </div>
    <div class="menu-items">
      <div class="menu-item" onclick="showPage('homePage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
          <polyline points="9 22 9 12 15 12 15 22"></polyline>
        </svg>
        Home
      </div>
      <div class="menu-item" onclick="showPage('productsPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="3" y="3" width="7" height="7"></rect>
          <rect x="14" y="3" width="7" height="7"></rect>
          <rect x="14" y="14" width="7" height="7"></rect>
          <rect x="3" y="14" width="7" height="7"></rect>
        </svg>
        Products
      </div>
      <div class="menu-item" onclick="checkAuthAndShowPage('myOrdersPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="9" cy="21" r="1"></circle>
          <circle cx="20" cy="21" r="1"></circle>
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
        </svg>
        My Orders
      </div>
      <div class="menu-item" onclick="checkAuthAndShowPage('wishlistPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
        </svg>
        Wishlist
      </div>
      <div class="menu-item" onclick="showPage('cancellationPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="15" y1="9" x2="9" y2="15"></line>
          <line x1="9" y1="9" x2="15" y2="15"></line>
        </svg>
        Refund & Cancellation
      </div>
      <div class="menu-item" onclick="showPage('termsPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
          <polyline points="10 9 9 9 8 9"></polyline>
        </svg>
        Terms & Conditions
      </div>
      <div class="menu-item" onclick="showPage('shippingPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 15a5 5 0 0 1 5-5h8a5 5 0 0 1 5 5v0a5 5 0 0 1-5 5H8a5 5 0 0 1-5-5v0z"></path>
          <path d="M3 15V9a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v6"></path>
          <path d="M9 19h6"></path>
        </svg>
        Shipping Policy
      </div>
      <div class="menu-item" onclick="showPage('privacyPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
        </svg>
        Privacy Policy
      </div>
      <div class="menu-item" onclick="showPage('contactPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
          <polyline points="22,6 12,13 2,6"></polyline>
        </svg>
        Contact Us
      </div>
      
      <!-- Additional Menu Items -->
      <div class="menu-item" onclick="showPage('aboutPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10"></circle>
          <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
          <line x1="12" y1="17" x2="12.01" y2="17"></line>
        </svg>
        About Us
      </div>
      
      <!-- Social Media Links in Mobile Menu - Icons Only -->
      <div style="display: flex; justify-content: center; gap: 10px; padding: 15px 20px; border-top: 1px solid var(--border);">
        <div class="social-menu-item" onclick="window.open('https://www.instagram.com/buyzo.cart?igsh=d2Mxc2EwMW45cWwy', '_blank'); closeMenu();">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#E4405F">
            <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
          </svg>
        </div>
        <div class="social-menu-item" onclick="window.open('https://www.youtube.com/@BuyzoCart', '_blank'); closeMenu();">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#FF0000">
            <path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/>
          </svg>
        </div>
        <div class="social-menu-item" onclick="window.open('https://t.me/buyzocartshop', '_blank'); closeMenu();">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#26A5E4">
            <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.894 8.221l-1.97 9.28c-.145.658-.537.818-1.084.508l-3-2.21-1.447 1.394c-.14.141-.259.259-.374.261l.213-3.053 5.56-5.022c.24-.213-.054-.334-.373-.121l-6.869 4.326-2.96-.924c-.64-.203-.658-.64.136-.954l11.566-4.458c.538-.196 1.006.128.832.941z"/>
          </svg>
        </div>
        <div class="social-menu-item" onclick="window.open('https://www.facebook.com/share/17G9Bu9fmH/', '_blank'); closeMenu();">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#1877F2">
            <path d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"/>
          </svg>
        </div>
      </div>
      
      <!-- Login/Signup at the bottom of mobile menu -->
      <div class="menu-item" id="mobileLoginBtn" onclick="showLoginModal(); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
          <circle cx="12" cy="7" r="4"></circle>
        </svg>
        Login / Sign Up
      </div>
      <div class="menu-item" id="mobileUserProfile" style="display:none;" onclick="showPage('accountPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
          <circle cx="12" cy="7" r="4"></circle>
        </svg>
        <span id="mobileUserName">My Account</span>
      </div>
    </div>
  </div>

  <header>
    <div class="header-inner">
      <div class="menu-icon" id="menuIcon">
        <span></span>
        <span></span>
        <span></span>
      </div>
      <div class="brand" aria-label="Buyzo Cart brand" onclick="showPage('homePage')">
        <span class="chip">BUYZO</span>
        <span>Cart</span>
      </div>
      <div class="cta">
        <!-- Theme Toggle Button -->
        <button class="theme-toggle" id="themeToggle" title="Toggle Light/Dark Mode">
          <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
          </svg>
          <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
          </svg>
        </button>
        
        <button class="btn secondary" id="openContactTop" title="Contact">Contact</button>
        <button class="btn secondary" id="openMyOrdersTop" title="My Orders">My Orders
          <span id="ordersNotification" class="notification-badge" style="display:none"></span>
        </button>
        <!-- Login/Signup buttons -->
        <button class="btn secondary" id="openLoginTop" title="Login">Login</button>
        <div class="user-profile" id="userProfile" style="display:none;">
          <div class="user-avatar" id="userAvatar">U</div>
          <div class="user-name" id="userName">User</div>
          <div class="account-dropdown" id="accountDropdown">
            <div class="account-dropdown-item" id="accountEmail">user@example.com</div>
            <div class="account-dropdown-item" onclick="showPage('accountPage')">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
              </svg>
              My Account
            </div>
            <div class="account-dropdown-item" onclick="showPage('myOrdersPage')">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="9" cy="21" r="1"></circle>
                <circle cx="20" cy="21" r="1"></circle>
                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
              </svg>
              My Orders
            </div>
            <div class="account-dropdown-item" onclick="showPage('wishlistPage')">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
              </svg>
              Wishlist
            </div>
            <div class="account-dropdown-item" onclick="logout()">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
              </svg>
              Logout
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- Home Page -->
    <section class="page active" id="homePage">
      
      <section class="hero">
        <h1>Welcome to <span style="color:var(--accent)">Buyzo Cart</span></h1>
        <p>Clean, fast checkout. Hand‑picked products. Fully responsive UI.</p>

        <!-- Rotating subtle messages -->
        <div class="hero-messages" id="heroMessages">
          <span class="active">🔥 Big Sale Today</span>
          <span>🚚 Free Shipping over ₹999</span>
          <span>✨ New Arrivals Just Dropped</span>
        </div>

        <!-- Highlight CTA strip -->
        <div class="highlight-strip" onclick="showPage('productsPage')">
          Limited Time Offer: Flat 40% OFF on all Fashion Items — <u>Shop Now →</u>
        </div>
      </section>

      <!-- NEW: Banner Carousel -->
      <div class="banner-carousel" id="bannerCarousel">
        <div class="banner-track" id="bannerTrack"></div>
        <div class="banner-controls" id="bannerControls"></div>
      </div>

      <!-- TRENDING NOW SECTION -->
      <div class="trending-section">
        <div class="trending-header">
          <h2 class="trending-title">Trending Now</h2>
        </div>
        <div class="slider-container">
          <div class="slider-track" id="productSlider"></div>
        </div>
      </div>

      <!-- NEW: Category Circles Section -->
      <div class="category-circles">
        <h2 class="category-circles-title">Shop by Category</h2>
        <div class="category-circles-container" id="categoryCirclesContainer"></div>
      </div>

      <!-- SEARCH BAR -->
      <div class="search-wrap">
        <input id="homeSearchInput" placeholder="Search products (e.g. 'Sneakers', 'T-shirt', 'Earbuds')" />
      </div>

      <!-- Search Results Grid -->
      <div id="homeSearchResults" style="display:none;"></div>

      <div class="steps center">
        <div class="step-pill" id="pill-products">1 • Products</div>
        <div class="step-pill disabled" id="pill-order">2 • Order Details</div>
        <div class="step-pill disabled" id="pill-user">3 • Your Info</div>
        <div class="step-pill disabled" id="pill-pay">4 • Payment</div>
      </div>

      <div class="card-panel" style="display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap">
        <h2 style="margin:0">Featured Products</h2>
      </div>

      <!-- Featured Products Grid -->
      <div class="product-grid" id="homeProductGrid">
        <!-- Product cards will be loaded here -->
      </div>

      <!-- Recently Viewed Products Section -->
      <div class="recently-viewed" id="recentlyViewedSection" style="display:none;">
        <h2 class="recently-viewed-title">Recently Viewed</h2>
        <div class="slider-container">
          <div class="slider-track" id="recentlyViewedSlider"></div>
        </div>
      </div>

      <!-- Newsletter Subscription Section -->
      <div class="newsletter-section">
        <h2 class="newsletter-title">Stay Updated</h2>
        <p class="newsletter-desc">Subscribe to our newsletter for exclusive deals, new arrivals, and special offers delivered to your inbox.</p>
        <div class="newsletter-form">
          <input type="email" class="newsletter-input" placeholder="Enter your email" id="newsletterEmail" />
          <button class="newsletter-btn" id="subscribeBtn">Subscribe</button>
        </div>
      </div>
    </section>

    <!-- Products Page -->
    <section class="page" id="productsPage">
      <div class="card-panel" style="display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap">
        <h2 style="margin:0">All Products</h2>
      </div>

      <!-- Price Filter - Simplified -->
      <div class="price-filter">
        <div class="price-filter-title">Filter by Price</div>
        <div class="price-range-slider">
          <input type="range" min="0" max="5000" value="0" class="price-slider" id="minPriceSlider">
          <input type="range" min="0" max="5000" value="5000" class="price-slider" id="maxPriceSlider">
          <div class="price-range-values">
            <span id="minPriceValue">₹0</span>
            <span id="maxPriceValue">₹5000</span>
          </div>
        </div>
        <div class="price-range" style="margin-top: 12px;">
          <input type="number" class="price-input" id="minPrice" placeholder="Min" min="0" />
          <span>to</span>
          <input type="number" class="price-input" id="maxPrice" placeholder="Max" min="0" />
          <button class="btn secondary" id="applyPriceFilter">Apply</button>
          <button class="btn secondary" id="resetPriceFilter">Reset</button>
        </div>
      </div>

      <!-- Search bar -->
      <div class="search-wrap">
        <input id="searchInput" placeholder="Search products (e.g. 'Sneakers', 'T-shirt', 'Earbuds')" />
      </div>

      <!-- Category Navigation -->
      <div class="categories" id="categoriesContainer">
        <!-- Categories will be loaded from Firebase by admin -->
      </div>

      <div class="product-grid" id="productGrid">
        <!-- Product cards will be loaded here -->
      </div>
    </section>

    <!-- Product Detail Page -->
    <section class="page" id="productDetailPage">
      <div class="product-detail-page">
        <!-- Breadcrumb Navigation -->
        <div class="breadcrumb">
          <a href="#" onclick="showPage('homePage')">Home</a>
          <span>></span>
          <a href="#" onclick="showPage('productsPage')">Products</a>
          <span>></span>
          <span id="breadcrumbProductName">Product Details</span>
        </div>
        
        <div class="back-to-products" onclick="showPage('productsPage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Products
        </div>
        
        <div class="product-detail-container">
          <div class="product-detail-gallery">
            <!-- Enhanced gallery with zoom -->
            <div class="product-gallery-zoom">
              <div class="product-detail-main-image mobile-optimized" id="detailMainImage" onclick="openImageZoom()">
                <button class="detail-carousel-control prev">&#10094;</button>
                <button class="detail-carousel-control next">&#10095;</button>
                <div class="detail-carousel-dots" id="detailCarouselDots"></div>
                <div class="zoom-indicator">Click to zoom</div>
              </div>
            </div>
            <div class="product-detail-thumbnails" id="detailThumbnails"></div>
          </div>
          
          <div class="product-detail-info">
            <h1 class="product-detail-title" id="detailTitle"></h1>
            <!-- Product SKU -->
            <div class="product-sku" id="detailSku"></div>
            <div class="product-detail-price" id="detailPrice"></div>
            <!-- Stock Status -->
            <div class="stock-status in-stock" id="detailStockStatus">In Stock</div>
            <div class="product-detail-desc" id="detailDesc"></div>
            <div class="product-detail-full-desc" id="detailFullDesc"></div>
            
            <!-- NEW: Share Link Section -->
            <div class="product-detail-meta" style="margin-top: 20px;">
              <h4>Share This Product</h4>
              <div style="display: flex; gap: 10px; margin-top: 10px;">
                <input type="text" id="productShareLink" readonly style="flex: 1; padding: 10px; border: 1px solid var(--border); border-radius: var(--radius); background: #f8fafc;">
                <button class="btn secondary" id="copyShareLink">Copy Link</button>
              </div>
            </div>
            
            <!-- Social Sharing Buttons -->
            <div class="social-sharing">
              <button class="share-btn facebook" data-platform="facebook">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                </svg>
                Share
              </button>
              <button class="share-btn twitter" data-platform="twitter">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
                </svg>
                Tweet
              </button>
              <button class="share-btn whatsapp" data-platform="whatsapp">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335 .157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
                </svg>
                Share
              </button>
            </div>
            
            <div style="display:flex;gap:12px;flex-wrap:wrap;margin-top:20px;">
              <button class="btn" id="detailOrderBtn">Order Now</button>
              <button class="btn secondary" id="detailWishlistBtn">Add to Wishlist</button>
              <button class="btn secondary" onclick="showPage('productsPage')">Continue Shopping</button>
            </div>
          </div>
        </div>

        <!-- Similar Products Section -->
        <div class="similar-products">
          <h2 class="similar-title">Similar Products</h2>
          <div class="slider-container">
            <div class="slider-track" id="similarProductsSlider"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Order Details Page -->
    <section class="page" id="orderPage">
      <div class="card-panel">
        <h3 style="margin-top:0">Order Details</h3>
        <p style="color:var(--muted)">Choose size/quantity and confirm product before entering contact or payment details.</p>

        <div id="selectedProductCard" class="card" style="margin-bottom:16px">
          <div style="display:flex;gap:16px;flex-direction:column">
            <div id="galleryMain" class="gallery-main">
              <button class="carousel-control prev">&#10094;</button>
              <button class="carousel-control next">&#10095;</button>
              <div class="carousel-dots"></div>
            </div>
          </div>
          <div class="card-body">
            <div class="title" id="spTitle"></div>
            <div class="price" id="spPrice"></div>
            <div class="badge" id="spDesc"></div>
            
            <!-- Product Details Section -->
            <div class="product-details">
              <h4>Product Details</h4>
              <p id="spFullDesc"></p>
            </div>

            <div style="margin-top:auto">
              <!-- Updated: Size/Color Selection -->
              <label>Select size / colour</label>
              <div class="size-color-options">
                <div class="size-option selected" data-value="S">S</div>
                <div class="size-option" data-value="M">M</div>
                <div class="size-option" data-value="L">L</div>
                <div class="size-option" data-value="XL">XL</div>
              </div>
              <div class="size-validation-error" id="sizeValidationError">Please select a size to continue</div>

            <div style="height:12px"></div>
              <label>Quantity</label>
              <!-- Replaced with plus/minus quantity control -->
              <div class="quantity-control">
                <button class="qty-minus">-</button>
                <input type="number" id="qtySelect" min="1" value="1" max="10" readonly>
                <button class="qty-plus">+</button>
              </div>

              <div style="height:16px"></div>
              <div style="display:flex;gap:10px;flex-wrap:wrap">
                <button id="toUserInfo" class="btn" style="flex:1">Continue → Provide Your Info</button>
                <button id="backToProducts" class="btn secondary" style="flex:1">Back to Products</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- User Info Page -->
    <section class="page" id="userPage">
      <div class="card-panel">
        <h3 style="margin-top:0">Your Contact & Delivery Address</h3>
        <p style="color:var(--muted)">We do not use saved addresses. Please provide a fresh delivery address for this order.</p>

        <div style="display:flex;gap:16px;flex-direction:column">
          <div>
            <label>Full Name *</label>
            <input id="fullname" placeholder="Enter full name" />
          </div>
          <div class="row">
            <div class="col"><label>Mobile Number *</label><input id="mobile" placeholder="10-digit mobile number" /></div>
            <div class="col"><label>Pincode *</label><input id="pincode" placeholder="Pincode" /></div>
          </div>
          <div class="row">
            <div class="col"><label>City *</label><input id="city" /></div>
            <div class="col"><label>State *</label><input id="state" /></div>
          </div>
          <div>
            <label>House / Street *</label>
            <input id="house" />
          </div>
          <div style="display:flex;gap:10px;margin-top:16px;flex-wrap:wrap">
            <button id="toPayment" class="btn" style="flex:1">Continue to Payment</button>
            <button id="editOrder" class="btn secondary" style="flex:1">Edit Order Details</button>
            <button id="saveUserInfo" class="btn secondary" style="flex:1">Save Information</button>
          </div>
          <div style="margin-top:16px;color:var(--muted);font-size:14px">
            <strong>Note:</strong> If you prefer to change products, click "Edit Order Details" or use "Products" to go back.
          </div>
        </div>
      </div>
    </section>

    <!-- Payment Page -->
    <section class="page" id="paymentPage">
      <div class="card-panel">
        <h3 style="margin-top:0">Payment Method</h3>
        <div style="display:flex;gap:12px;flex-wrap:wrap;margin-bottom:16px">
          <label style="flex:1;display:flex;align-items:center;gap:8px;padding:12px;border:1px solid var(--border);border-radius:var(--radius);cursor:pointer;">
            <input type="radio" name="pay" value="prepaid" checked /> Prepaid (UPI / Card)
          </label>
          <label style="flex:1;display:flex;align-items:center;gap:8px;padding:12px;border:1px solid var(--border);border-radius:var(--radius);cursor:pointer;">
            <input type="radio" name="pay" value="cod" /> Cash on Delivery (Note: may increase processing time)
          </label>
        </div>
        
        <div class="summary">
          <div style="display:flex;justify-content:space-between;margin-bottom:8px"><div>Product</div><div id="sumProduct">-</div></div>
          <div style="display:flex;justify-content:space-between;margin-bottom:8px"><div>Qty</div><div id="sumQty">-</div></div>
          <div style="display:flex;justify-content:space-between;margin-bottom:8px"><div>Price</div><div id="sumPrice">-</div></div>
          <div style="display:flex;justify-content:space-between;margin-bottom:12px;padding-bottom:8px;border-bottom:1px dashed var(--border)"><div>Delivery</div><div id="sumDel">₹50</div></div>
          <div style="display:flex;justify-content:space-between;font-weight:700;margin-top:8px;font-size:18px"><div>Total</div><div id="sumTotal">-</div></div>
        </div>
        
        <div style="height:16px"></div>
        <div style="display:flex;gap:12px;flex-wrap:wrap">
          <button id="confirmOrder" class="btn" style="flex:1">Confirm & Place Order</button>
          <button id="payBack" class="btn secondary" style="flex:1">Back</button>
        </div>
      </div>
    </section>

    <!-- Order Success (hidden) -->
    <section class="page center" id="successPage">
      <div class="card-panel" style="max-width:520px;margin:32px auto;padding:32px">
        <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="var(--success)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin:0 auto 16px">
          <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
          <polyline points="22 4 12 14.01 9 11.01"></polyline>
        </svg>
        <div style="font-size:24px;font-weight:700;color:var(--success);margin-bottom:8px">Thank You for Your Order!</div>
        <div style="margin-top:10px;color:var(--muted)">Your order has been placed successfully! We will confirm and process your order. Tracking will be shared once supplier ships it.</div>
        <div style="margin-top:24px;display:flex;gap:12px;justify-content:center;flex-wrap:wrap">
          <button id="goHome" class="btn">Back to Home</button>
          <button id="viewOrders" class="btn secondary">View My Orders</button>
        </div>
      </div>
    </section>

    <!-- My Orders Page -->
    <section class="page" id="myOrdersPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        
        <div class="orders-container">
          <h2>My Orders</h2>
          <p style="color:var(--muted);margin-bottom:24px">View and manage your recent orders</p>
          
          <div id="ordersList">
            <!-- Orders will be dynamically inserted here -->
          </div>
          
          <div id="noOrders" class="card-panel center" style="display:none">
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--muted-light)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="9" cy="21" r="1"></circle>
              <circle cx="20" cy="21" r="1"></circle>
              <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
            </svg>
            <h3 style="margin:16px 0 8px;color:var(--muted)">No orders yet</h3>
            <p style="color:var(--muted-light)">You haven't placed any orders yet. Start shopping to see your orders here.</p>
            <button class="btn" style="margin-top:16px" onclick="showPage('productsPage')">Start Shopping</button>
            </div>
        </div>
      </div>
    </section>

    <!-- Order Detail Page -->
    <section class="page" id="orderDetailPage">
      <div class="policy-page">
        <div class="back-button" onclick="showMyOrders(); showPage('myOrdersPage');">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to My Orders
        </div>
        
        <div class="orders-container">
          <h2>Order Details</h2>
          
          <div class="order-detail-page" id="orderDetailContent">
            <!-- Order details will be dynamically inserted here -->
          </div>
        </div>
      </div>
    </section>

    <!-- Wishlist Page -->
    <section class="page" id="wishlistPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        
        <div class="orders-container">
          <h2>My Wishlist</h2>
          <p style="color:var(--muted);margin-bottom:24px">Your favorite products</p>
          
          <div id="wishlistItems">
            <!-- Wishlist items will be dynamically inserted here -->
          </div>
          
          <div id="emptyWishlist" class="card-panel center" style="display:none">
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--muted-light)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
            <h3 style="margin:16px 0 8px;color:var(--muted)">Your wishlist is empty</h3>
            <p style="color:var(--muted-light)">You haven't added any products to your wishlist yet.</p>
            <button class="btn" style="margin-top:16px" onclick="showPage('productsPage')">Browse Products</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Refund & Cancellation Policy -->
    <section class="page" id="cancellationPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        
        <div class="policy-content">
          <h2>Refund & Cancellation Policy</h2>
          
          <h3>Cancellation Policy</h3>
          <p>You can cancel your order before it has been shipped. Once your order has been shipped, you can no longer cancel it. If you wish to cancel your order, please contact us immediately at <strong>buyzocartshop@gmail.com</strong> with your order details.</p>
          
          <h3>Refund Policy</h3>
          <p>We offer refunds only in cases where the product is defective, damaged, or not as described. Refunds will be processed to the original payment method within 7-14 business days after we receive the returned product.</p>
          
          <h3>Return Policy</h3>
          <p>To be eligible for a return, your item must be unused and in the same condition that you received it. It must also be in the original packaging. Some types of goods are exempt from being returned, such as perishable goods and personal care items.</p>
          
          <h3>Contact Us</h3>
          <p>If you have any questions about our Refund & Cancellation Policy, please contact us:</p>
          <ul>
            <li>Email: <strong>buyzocartshop@gmail.com</strong></li>
            <li>Help Center: <strong>buyzocart.help@gmail.com</strong></li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Terms & Conditions -->
    <section class="page" id="termsPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        
        <div class="policy-content">
          <h2>Terms & Conditions</h2>
          
          <h3>Introduction</h3>
          <p>Welcome to Buyzo Cart. These terms and conditions outline the rules and regulations for the use of our website and services.</p>
          
          <h3>Intellectual Property Rights</h3>
          <p>Other than the content you own, under these Terms, Buyzo Cart and/or its licensors own all the intellectual property rights and materials contained in this Website.</p>
          
          <h3>Restrictions</h3>
          <p>You are specifically restricted from all of the following:</p>
          <ul>
            <li>Publishing any Website material in any other media</li>
            <li>Selling, sublicensing and/or otherwise commercializing any Website material</li>
            <li>Publicly performing and/or showing any Website material</li>
            <li>Using this Website in any way that is or may be damaging to this Website</li>
            <li>Using this Website contrary to applicable laws and regulations</li>
          </ul>
          
          <h3>Your Content</h3>
          <p>In these Terms and Conditions, "Your Content" shall mean any audio, video, text, images or other material you choose to display on this Website.</p>
          
          <h3>No warranties</h3>
          <p>This Website is provided "as is," with all faults, and Buyzo Cart express no representations or warranties, of any kind related to this Website or the materials contained on this Website.</p>
          
          <h3>Limitation of liability</h3>
          <p>In no event shall Buyzo Cart, nor any of its officers, directors and employees, be held liable for anything arising out of or in any way connected with your use of this Website.</p>
          
          <h3>Indemnification</h3>
          <p>You hereby indemnify to the fullest extent Buyzo Cart from and against any and/or all liabilities, costs, demands, causes of action, damages and expenses arising in any way related to your breach of any of the provisions of these Terms.</p>
          
          <h3>Severability</h3>
          <p>If any provision of these Terms is found to be invalid under any applicable law, such provisions shall be deleted without affecting the remaining provisions herein.</p>
          
          <h3>Variation of Terms</h3>
          <p>Buyzo Cart is permitted to revise these Terms at any time as it sees fit, and by using this Website you are expected to review these Terms on a regular basis.</p>
          
          <h3>Governing Law & Jurisdiction</h3>
          <p>These Terms will be governed by and interpreted in accordance with the laws of India, and you submit to the non-exclusive jurisdiction of the courts located in India for the resolution of any disputes.</p>
        </div>
      </div>
    </section>

    <!-- Shipping Policy -->
    <section class="page" id="shippingPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        
        <div class="policy-content">
          <h2>Shipping Policy</h2>
          
          <h3>Shipping Locations</h3>
          <p>We currently ship to all major cities and towns across India. For remote locations, additional shipping charges may apply.</p>
          
          <h3>Shipping Time</h3>
          <p>Standard shipping time is 5-7 business days. Express shipping (2-3 business days) is available for select locations at an additional cost.</p>
          
          <h3>Shipping Charges</h3>
          <p>Shipping charges are calculated based on the delivery location and the weight of the package. Free shipping is available on orders above ₹999.</p>
          
          <h3>Order Processing</h3>
          <p>Orders are processed within 24-48 hours of payment confirmation. You will receive a tracking number once your order has been shipped.</p>
          
          <h3>International Shipping</h3>
          <p>We currently do not offer international shipping. We only ship within India.</p>
          
          <h3>Contact Us</h3>
          <p>If you have any questions about our Shipping Policy, please contact us at <strong>buyzocartshop@gmail.com</strong>.</p>
        </div>
      </div>
    </section>

    <!-- Privacy Policy -->
    <section class="page" id="privacyPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        
        <div class="policy-content">
          <h2>Privacy Policy</h2>
          
          <h3>Introduction</h3>
          <p>At Buyzo Cart, we are committed to protecting your privacy. This Privacy Policy explains how we collect, use, and safeguard your information when you visit our website.</p>
          
          <h3>Information We Collect</h3>
          <p>We may collect the following types of information:</p>
          <ul>
            <li>Personal identification information (Name, email address, phone number, etc.)</li>
            <li>Delivery address and payment information</li>
            <li>Browser and device information</li>
            <li>Usage data and cookies</li>
          </ul>
          
          <h3>How We Use Your Information</h3>
          <p>We use the information we collect in the following ways:</p>
          <ul>
            <li>To process and fulfill your orders</li>
            <li>To communicate with you about your orders</li>
            <li>To improve our website and services</li>
            <li>To send promotional emails (with your consent)</li>
          </ul>
          
          <h3>Data Security</h3>
          <p>We implement appropriate security measures to protect your personal information from unauthorized access, alteration, disclosure, or destruction.</p>
          
          <h3>Cookies</h3>
          <p>We use cookies to enhance your experience on our website. You can choose to disable cookies through your browser settings, but this may affect your ability to use certain features of our website.</p>
          
          <h3>Third-Party Disclosure</h3>
          <p>We do not sell, trade, or otherwise transfer your personally identifiable information to third parties without your consent, except as required by law.</p>
          
          <h3>Changes to This Privacy Policy</h3>
          <p>We may update our Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page.</p>
          
          <h3>Contact Us</h3>
          <p>If you have any questions about this Privacy Policy, please contact us at <strong>buyzocartshop@gmail.com</strong>.</p>
        </div>
      </div>
    </section>

    <!-- Contact Us Page -->
    <section class="page" id="contactPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        
        <div class="policy-content">
          <h2>Contact Us</h2>
          
          <h3>Get in Touch</h3>
          <p>We're here to help! If you have any questions, concerns, or feedback, please don't hesitate to reach out to us.</p>
          
          <h3>Customer Support</h3>
          <p>For order-related inquiries, product questions, or general support:</p>
          <ul>
            <li>Email: <strong>buyzocartshop@gmail.com</strong></li>
            <li>WhatsApp: <strong>9557987574</strong></li>
          </ul>
          
          <h3>Help Center</h3>
          <p>For technical support, website issues, or account assistance:</p>
          <ul>
            <li>Email: <strong>buyzocart.help@gmail.com</strong></li>
          </ul>
          
          <h3>Business Hours</h3>
          <p>Our customer support team is available:</p>
          <ul>
            <li>Monday to Friday: 9:00 AM - 6:00 PM</li>
            <li>Saturday: 10:00 AM - 4:00 PM</li>
            <li>Sunday: Closed</li>
          </ul>
          
          <h3>WhatsApp Quick Connect</h3>
          <p>For faster response, you can contact us directly on WhatsApp:</p>
          <a href="https://wa.me/9557987574" target="_blank" class="whatsapp-contact-button">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335 .157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
            </svg>
            Message us on WhatsApp
          </a>
          
          <h3>Response Time</h3>
          <p>We strive to respond to all inquiries within 24 hours during business days. For urgent matters, please use WhatsApp for the quickest response.</p>
        </div>
      </div>
    </section>

    <!-- About Us Page -->
    <section class="page" id="aboutPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        
        <div class="policy-content">
          <h2>About Us</h2>
          
          <h3>Our Story</h3>
          <p>Buyzo Cart was founded with a simple mission: to provide high-quality products with a seamless shopping experience. We believe that everyone deserves access to great products at affordable prices.</p>
          
          <h3>Our Values</h3>
          <ul>
            <li><strong>Quality:</strong> We carefully select every product to ensure it meets our high standards.</li>
            <li><strong>Customer Focus:</strong> Your satisfaction is our top priority.</li>
            <li><strong>Transparency:</strong> We believe in honest pricing and clear communication.</li>
            <li><strong>Innovation:</strong> We continuously improve our platform to serve you better.</li>
          </ul>
          
          <h3>Our Team</h3>
          <p>Our team is composed of passionate individuals who are dedicated to making your shopping experience enjoyable and hassle-free. From product selection to customer service, we work together to ensure you get the best possible service.</p>
          
          <h3>Our Commitment</h3>
          <p>We are committed to providing excellent customer service, quality products, and a user-friendly shopping experience. If you ever have any questions or concerns, please don't hesitate to reach out to us.</p>
          
          <div class="about-us">
            <h3>Thank You for Choosing Buyzo Cart!</h3>
            <p>We appreciate your trust in us and look forward to serving you.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Account Page -->
    <section class="page" id="accountPage">
      <div class="account-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        
        <div class="account-header">
          <div class="account-avatar" id="accountPageAvatar">U</div>
          <div class="account-info">
            <h2 id="accountPageName">User Name</h2>
            <p id="accountPageEmail">user@example.com</p>
          </div>
        </div>
        
        <div class="account-menu">
          <div class="account-menu-item" onclick="showPage('myOrdersPage')">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="9" cy="21" r="1"></circle>
              <circle cx="20" cy="21" r="1"></circle>
              <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
            </svg>
            <span>My Orders</span>
          </div>
          <div class="account-menu-item" onclick="showPage('wishlistPage')">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
            <span>Wishlist</span>
          </div>
          <div class="account-menu-item" onclick="showPage('contactPage')">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
              <polyline points="22,6 12,13 2,6"></polyline>
            </svg>
            <span>Contact Support</span>
          </div>
          <div class="account-menu-item" onclick="logout()">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
              <polyline points="16 17 21 12 16 7"></polyline>
              <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
            <span>Logout</span>
          </div>
        </div>
        
        <div class="account-section">
          <h3>Profile Information</h3>
          <div class="profile-form">
            <div>
              <label>Full Name</label>
              <input type="text" id="profileName" placeholder="Your full name" />
            </div>
            <div>
              <label>Email Address</label>
              <input type="email" id="profileEmail" placeholder="Your email address" readonly />
            </div>
            <div>
              <label>Phone Number</label>
              <input type="tel" id="profilePhone" placeholder="Your phone number" />
            </div>
            <button class="btn" id="updateProfile">Update Profile</button>
          </div>
        </div>
        
        <div class="account-section">
          <h3>Notification Preferences</h3>
          <div class="setting-item">
            <div class="setting-info">
              <h4>Email Notifications</h4>
              <p>Receive order updates and promotional emails</p>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="emailNotifications" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
          <div class="setting-item">
            <div class="setting-info">
              <h4>SMS Notifications</h4>
              <p>Receive order updates via SMS</p>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="smsNotifications" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>
      </div>
    </section>

    <!-- Help Center Page -->
    <section class="page" id="helpCenterPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        
        <div class="policy-content">
          <h2>Help Center</h2>
          
          <h3>Frequently Asked Questions</h3>
          
          <h4>How do I track my order?</h4>
          <p>Once your order is shipped, you will receive a tracking number via email. You can also view your order status in the "My Orders" section of your account.</p>
          
          <h4>What is your return policy?</h4>
          <p>We accept returns within 7 days of delivery for defective or damaged products. Please see our Refund & Cancellation Policy for more details.</p>
          
          <h4>How long does shipping take?</h4>
          <p>Standard shipping takes 5-7 business days. Express shipping (2-3 business days) is available for select locations at an additional cost.</p>
          
          <h4>Do you ship internationally?</h4>
          <p>Currently, we only ship within India.</p>
          
          <h4>How can I change or cancel my order?</h4>
          <p>You can cancel your order before it is shipped. Please contact us immediately at <strong>buyzocartshop@gmail.com</strong> with your order details.</p>
          
          <h3>Still Need Help?</h3>
          <p>If you couldn't find the answer to your question, please contact our support team:</p>
          <ul>
            <li>Email: <strong>buyzocart.help@gmail.com</strong></li>
            <li>WhatsApp: <strong>9557987574</strong></li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Returns & Exchanges Page -->
    <section class="page" id="returnsPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        
        <div class="policy-content">
          <h2>Returns & Exchanges</h2>
          
          <h3>Return Policy</h3>
          <p>We want you to be completely satisfied with your purchase. If you're not happy with your order, we accept returns within 7 days of delivery.</p>
          
          <h3>Conditions for Returns</h3>
          <ul>
            <li>Product must be unused and in original condition</li>
            <li>Product must be in original packaging with all tags attached</li>
            <li>Return request must be made within 7 days of delivery</li>
            <li>Some products are not eligible for return (e.g., perishable goods, personal care items)</li>
          </ul>
          
          <h3>How to Initiate a Return</h3>
          <ol>
            <li>Contact our customer service at <strong>buyzocartshop@gmail.com</strong> with your order details</li>
            <li>We will provide you with a return authorization and instructions</li>
            <li>Package the product securely and ship it to the provided address</li>
            <li>Once we receive the returned product, we will process your refund</li>
          </ol>
          
          <h3>Exchange Policy</h3>
          <p>We currently do not offer direct exchanges. If you wish to exchange a product, you need to return the original product and place a new order for the desired item.</p>
          
          <h3>Refund Processing</h3>
          <p>Refunds will be processed to the original payment method within 7-14 business days after we receive the returned product.</p>
          
          <h3>Contact Us</h3>
          <p>If you have any questions about our Returns & Exchanges policy, please contact us at <strong>buyzocartshop@gmail.com</strong>.</p>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="footer-container">
      <div class="footer-content">
        <div class="footer-section">
          <h3>Quick Links</h3>
          <ul class="footer-links">
            <li><a onclick="showPage('homePage')">Home</a></li>
            <li><a onclick="showPage('productsPage')">Products</a></li>
            <li><a onclick="showPage('aboutPage')">About Us</a></li>
            <li><a onclick="showPage('contactPage')">Contact Us</a></li>
            <li><a onclick="checkAuthAndShowPage('myOrdersPage')">My Orders</a></li>
            <li><a onclick="checkAuthAndShowPage('wishlistPage')">Wishlist</a></li>
          </ul>
        </div>
        
        <div class="footer-section">
          <h3>Customer Service</h3>
          <ul class="footer-links">
            <li><a onclick="showPage('helpCenterPage')">Help Center</a></li>
            <li><a onclick="showPage('shippingPage')">Shipping Policy</a></li>
            <li><a onclick="showPage('cancellationPage')">Refund & Cancellation</a></li>
            <li><a onclick="showPage('returnsPage')">Returns & Exchanges</a></li>
            <li><a onclick="showPage('termsPage')">Terms & Conditions</a></li>
            <li><a onclick="showPage('privacyPage')">Privacy Policy</a></li>
          </ul>
        </div>
        
        <div class="footer-section">
          <h3>Contact Info</h3>
          <div class="contact-info">
            <p>
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                <polyline points="22,6 12,13 2,6"></polyline>
              </svg>
              Customer Service: buyzocartshop@gmail.com
            </p>
            <p>
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                <polyline points="22,6 12,13 2,6"></polyline>
              </svg>
              Help Center: buyzocart.help@gmail.com
            </p>
            <p>
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
              </svg>
              WhatsApp: 9557987574
            </p>
          </div>
          
          <div class="social-links">
            <a href="https://www.instagram.com/buyzo.cart?igsh=d2Mxc2EwMW45cWwy" target="_blank" class="social-link">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
              </svg>
            </a>
            <a href="https://www.youtube.com/@BuyzoCart" target="_blank" class="social-link">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/>
              </svg>
            </a>
            <a href="https://t.me/buyzocartshop" target="_blank" class="social-link">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.894 8.221l-1.97 9.28c-.145.658-.537.818-1.084.508l-3-2.21-1.447 1.394c-.14.141-.259.259-.374.261l.213-3.053 5.56-5.022c.24-.213-.054-.334-.373-.121l-6.869 4.326-2.96-.924c-.64-.203-.658-.64.136-.954l11.566-4.458c.538-.196 1.006.128.832.941z"/>
              </svg>
            </a>
            <a href="https://www.facebook.com/share/17G9Bu9fmH/" target="_blank" class="social-link">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"/>
              </svg>
            </a>
          </div>
        </div>
      </div>
    </footer>

    <!-- Copyright Section -->
    <div class="copyright">
      <div class="footer-container">
        <p>&copy; 2024 Buyzo Cart. All rights reserved.</p>
      </div>
    </div>

  <!-- Toast Notification -->
  <div class="toast" id="toast">
    <div class="toast-icon">✓</div>
    <div class="toast-message">Action completed successfully!</div>
  </div>

  <!-- Login/Signup Modal -->
  <div class="modal-overlay" id="authModal">
    <div class="auth-modal">
      <button class="auth-close" id="authClose">×</button>
      <h3>Welcome to Buyzo Cart</h3>
      
      <div class="auth-tabs">
        <div class="auth-tab active" data-tab="login">Login</div>
        <div class="auth-tab" data-tab="signup">Sign Up</div>
      </div>
      
      <!-- Login Form -->
      <form class="auth-form active" id="loginForm">
        <div class="auth-form-group">
          <label>Email</label>
          <input type="email" id="loginEmail" placeholder="Enter your email" required>
        </div>
        <div class="auth-form-group">
          <label>Password</label>
          <input type="password" id="loginPassword" placeholder="Enter your password" required>
        </div>
        <button type="submit" class="btn" style="width: 100%;">Login</button>
        
        <div class="auth-form-footer">
          <a id="showForgotPassword">Forgot your password?</a>
        </div>
        
        <div class="divider"><span>or</span></div>
        
        <button type="button" class="google-signin-btn" id="googleSignIn">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24">
            <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
            <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
            <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
            <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
          </svg>
          Sign in with Google
        </button>
      </form>
      
      <!-- Sign Up Form -->
      <form class="auth-form" id="signupForm">
        <div class="auth-form-group">
          <label>Full Name</label>
          <input type="text" id="signupName" placeholder="Enter your full name" required>
        </div>
        <div class="auth-form-group">
          <label>Email</label>
          <input type="email" id="signupEmail" placeholder="Enter your email" required>
        </div>
        <div class="auth-form-group">
          <label>Password</label>
          <input type="password" id="signupPassword" placeholder="Create a password" required>
        </div>
        <div class="auth-form-group">
          <label>Confirm Password</label>
          <input type="password" id="signupConfirmPassword" placeholder="Confirm your password" required>
        </div>
        <button type="submit" class="btn" style="width: 100%;">Create Account</button>
        
        <div class="divider"><span>or</span></div>
        
        <button type="button" class="google-signin-btn" id="googleSignUp">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24">
            <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
            <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
            <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
            <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
          </svg>
          Sign up with Google
        </button>
      </form>
      
      <!-- Forgot Password Form -->
      <form class="auth-form forgot-password-form" id="forgotPasswordForm">
        <div class="auth-form-group">
          <label>Email</label>
          <input type="email" id="forgotPasswordEmail" placeholder="Enter your email" required>
        </div>
        <button type="submit" class="btn" style="width: 100%;">Reset Password</button>
        <div class="back-to-login" id="backToLogin">Back to Login</div>
      </form>
    </div>
  </div>

  <!-- Image Zoom Modal -->
  <div class="modal-overlay zoom-modal" id="imageZoomModal">
    <div class="zoom-content">
      <button class="zoom-close" id="zoomClose">×</button>
      <img class="zoom-image" id="zoomImage" src="" alt="Zoomed product image">
      <div class="zoom-controls">
        <button class="zoom-btn" id="zoomOut">−</button>
        <button class="zoom-btn" id="zoomIn">+</button>
      </div>
    </div>
  </div>

  <!-- Cancellation Modal -->
  <div class="modal-overlay" id="cancellationModal">
    <div class="cancellation-modal">
      <h3>Cancel Order</h3>
      <p>Please select a reason for cancellation:</p>
      
      <div class="cancellation-reason">
        <input type="radio" name="cancelReason" value="changed-mind" id="reason1">
        <label for="reason1">Changed my mind</label>
      </div>
      <div class="cancellation-reason">
        <input type="radio" name="cancelReason" value="wrong-item" id="reason2">
        <label for="reason2">Ordered wrong item</label>
      </div>
      <div class="cancellation-reason">
        <input type="radio" name="cancelReason" value="shipping-delay" id="reason3">
        <label for="reason3">Shipping takes too long</label>
      </div>
      <div class="cancellation-reason">
        <input type="radio" name="cancelReason" value="found-cheaper" id="reason4">
        <label for="reason4">Found cheaper elsewhere</label>
      </div>
      <div class="cancellation-reason">
        <input type="radio" name="cancelReason" value="other" id="reason5">
        <label for="reason5">Other reason</label>
      </div>
      
      <div class="cancellation-actions">
        <button class="btn secondary" id="cancelCancel">Go Back</button>
        <button class="btn error" id="confirmCancel">Cancel Order</button>
      </div>
    </div>
  </div>

  <!-- Cancel Order Confirmation Modal -->
  <div class="modal-overlay" id="cancelConfirmModal">
    <div class="cancel-confirm-modal">
      <h3>Confirm Order Cancellation</h3>
      <p>Are you sure you want to cancel this order?</p>
      
      <div class="payment-charge-note">
        <strong>Note:</strong> If you paid online, your refund will be processed within 7-14 business days.
      </div>
      
      <div class="refund-calculation">
        <p><strong>Refund Calculation:</strong></p>
        <p>Order Total: <span id="refundOrderTotal">₹0</span></p>
        <p>Payment Gateway Charges: <span id="refundCharges">₹0</span></p>
        <p><strong>Total Refund Amount: <span id="refundTotal">₹0</span></strong></p>
      </div>
      
      <div class="cancel-confirm-actions">
        <button class="btn secondary" id="cancelConfirmNo">No, Keep Order</button>
        <button class="btn error" id="cancelConfirmYes">Yes, Cancel Order</button>
      </div>
    </div>
  </div>

  <!-- Alert Modal -->
  <div class="modal-overlay" id="alertModal">
    <div class="alert-modal">
      <div class="alert-icon">⚠️</div>
      <h3 id="alertTitle">Alert</h3>
      <p id="alertMessage">This is an alert message.</p>
      <div class="alert-modal-buttons">
        <button class="btn secondary" id="alertCancel">Cancel</button>
        <button class="btn error" id="alertConfirm">Yes</button>
      </div>
    </div>
  </div>

  <script>
    // NEW: Updated Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyAeB7VzIxJaNYagUPoKd-kN5HXmLbS2-Vw",
      authDomain: "videomanager-23d98.firebaseapp.com",
      databaseURL: "https://videomanager-23d98-default-rtdb.firebaseio.com",
      projectId: "videomanager-23d98",
      storageBucket: "videomanager-23d98.firebasestorage.app",
      messagingSenderId: "847321523576",
      appId: "1:847321523576:web:bda3f5026e3e163603548d",
      measurementId: "G-YBSJ1KMPV4"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();
    const realtimeDb = firebase.database();
    const storage = firebase.storage?.();

    // Initialize EmailJS
    emailjs.init("user_your_emailjs_user_id_here");

    // Global variables
    let currentProduct = null;
    let currentOrderId = null;
    let selectedSize = 'S';
    let selectedQuantity = 1;
    let currentUser = null;
    let userInfo = {};
    let cartItems = [];
    let wishlistItems = [];
    let recentlyViewed = [];
    let allProducts = [];
    let categories = [];
    let currentOrders = [];
    let currentOrderDetails = null;
    let bannerImages = [];
    let currentBannerIndex = 0;
    let bannerInterval;
    let deliveryCharge = 50; // Default delivery charge
    let isAdmin = false;

    // NEW: Cache keys
    const CACHE_KEYS = {
      PRODUCTS: 'buyzo_cached_products',
      CATEGORIES: 'buyzo_cached_categories',
      ORDERS: 'buyzo_cached_orders',
      USER_DATA: 'buyzo_cached_user_data',
      WISHLIST: 'buyzo_cached_wishlist',
      RECENTLY_VIEWED: 'buyzo_cached_recently_viewed',
      DELIVERY_CHARGE: 'buyzo_cached_delivery_charge'
    };

    // NEW: Cache helper functions
    function saveToCache(key, data) {
      try {
        localStorage.setItem(key, JSON.stringify(data));
        console.log(`Data saved to cache: ${key}`);
      } catch (error) {
        console.error(`Error saving to cache ${key}:`, error);
      }
    }

    function getFromCache(key) {
      try {
        const cached = localStorage.getItem(key);
        return cached ? JSON.parse(cached) : null;
      } catch (error) {
        console.error(`Error reading from cache ${key}:`, error);
        return null;
      }
    }

    function clearCache(key) {
      try {
        localStorage.removeItem(key);
        console.log(`Cache cleared: ${key}`);
      } catch (error) {
        console.error(`Error clearing cache ${key}:`, error);
      }
    }

    // DOM Elements
    const pages = document.querySelectorAll('.page');
    const menuIcon = document.getElementById('menuIcon');
    const mobileMenu = document.getElementById('mobileMenu');
    const menuOverlay = document.getElementById('menuOverlay');
    const menuClose = document.getElementById('menuClose');
    const themeToggle = document.getElementById('themeToggle');
    const toast = document.getElementById('toast');
    const authModal = document.getElementById('authModal');
    const authClose = document.getElementById('authClose');
    const authTabs = document.querySelectorAll('.auth-tab');
    const authForms = document.querySelectorAll('.auth-form');
    const loginForm = document.getElementById('loginForm');
    const signupForm = document.getElementById('signupForm');
    const forgotPasswordForm = document.getElementById('forgotPasswordForm');
    const showForgotPassword = document.getElementById('showForgotPassword');
    const backToLogin = document.getElementById('backToLogin');
    const googleSignIn = document.getElementById('googleSignIn');
    const googleSignUp = document.getElementById('googleSignUp');
    const userProfile = document.getElementById('userProfile');
    const accountDropdown = document.getElementById('accountDropdown');
    const mobileLoginBtn = document.getElementById('mobileLoginBtn');
    const mobileUserProfile = document.getElementById('mobileUserProfile');
    const mobileUserName = document.getElementById('mobileUserName');
    const openLoginTop = document.getElementById('openLoginTop');
    const openContactTop = document.getElementById('openContactTop');
    const openMyOrdersTop = document.getElementById('openMyOrdersTop');
    const ordersNotification = document.getElementById('ordersNotification');

    // Initialize the app
    document.addEventListener('DOMContentLoaded', function() {
      initializeApp();
      setupEventListeners();
      loadDeliveryCharge();
      loadProducts();
      loadCategories();
      loadBannerImages();
      startBannerCarousel();
      setupBannerSwipe();
      checkAuthState();
      setupSearch();
      setupPriceFilter();
      initHeroMessages();
    });

    function initializeApp() {
      // Set theme based on user preference or default to light
      const savedTheme = localStorage.getItem('theme') || 'light';
      document.documentElement.setAttribute('data-theme', savedTheme);
      
      // Show home page by default
      showPage('homePage');
    }

    function setupEventListeners() {
      // Mobile menu
      menuIcon.addEventListener('click', openMenu);
      menuClose.addEventListener('click', closeMenu);
      menuOverlay.addEventListener('click', closeMenu);

      // Theme toggle
      themeToggle.addEventListener('click', toggleTheme);

      // Auth modal
      authClose.addEventListener('click', closeAuthModal);
      openLoginTop.addEventListener('click', showLoginModal);
      mobileLoginBtn.addEventListener('click', showLoginModal);
      
      // Auth tabs
      authTabs.forEach(tab => {
        tab.addEventListener('click', () => switchAuthTab(tab.dataset.tab));
      });

      // Auth forms
      loginForm.addEventListener('submit', handleLogin);
      signupForm.addEventListener('submit', handleSignup);
      forgotPasswordForm.addEventListener('submit', handleForgotPassword);
      
      // Google auth
      googleSignIn.addEventListener('click', signInWithGoogle);
      googleSignUp.addEventListener('click', signInWithGoogle);
      
      // Forgot password
      showForgotPassword.addEventListener('click', () => switchAuthTab('forgot-password'));
      backToLogin.addEventListener('click', () => switchAuthTab('login'));
      
      // User profile dropdown
      userProfile.addEventListener('click', toggleAccountDropdown);
      
      // Close dropdown when clicking outside
      document.addEventListener('click', (e) => {
        if (!userProfile.contains(e.target)) {
          accountDropdown.classList.remove('active');
        }
      });

      // Contact and orders buttons
      openContactTop.addEventListener('click', () => showPage('contactPage'));
      openMyOrdersTop.addEventListener('click', () => checkAuthAndShowPage('myOrdersPage'));

      // Toast notification
      toast.addEventListener('click', () => toast.classList.remove('show'));

      // Image zoom modal
      const imageZoomModal = document.getElementById('imageZoomModal');
      const zoomClose = document.getElementById('zoomClose');
      const zoomOut = document.getElementById('zoomOut');
      const zoomIn = document.getElementById('zoomIn');
      const zoomImage = document.getElementById('zoomImage');
      
      zoomClose.addEventListener('click', () => imageZoomModal.classList.remove('active'));
      zoomOut.addEventListener('click', () => {
        const currentScale = parseFloat(zoomImage.style.transform.replace('scale(', '').replace(')', '')) || 1;
        zoomImage.style.transform = `scale(${Math.max(0.5, currentScale - 0.25)})`;
      });
      zoomIn.addEventListener('click', () => {
        const currentScale = parseFloat(zoomImage.style.transform.replace('scale(', '').replace(')', '')) || 1;
        zoomImage.style.transform = `scale(${Math.min(3, currentScale + 0.25)})`;
      });

      // Cancellation modals
      const cancellationModal = document.getElementById('cancellationModal');
      const cancelCancel = document.getElementById('cancelCancel');
      const confirmCancel = document.getElementById('confirmCancel');
      const cancelConfirmModal = document.getElementById('cancelConfirmModal');
      const cancelConfirmNo = document.getElementById('cancelConfirmNo');
      const cancelConfirmYes = document.getElementById('cancelConfirmYes');
      
      cancelCancel.addEventListener('click', () => cancellationModal.classList.remove('active'));
      confirmCancel.addEventListener('click', showCancelConfirmModal);
      cancelConfirmNo.addEventListener('click', () => {
        cancelConfirmModal.classList.remove('active');
        cancellationModal.classList.remove('active');
      });
      cancelConfirmYes.addEventListener('click', processOrderCancellation);

      // Alert modal
      const alertModal = document.getElementById('alertModal');
      const alertCancel = document.getElementById('alertCancel');
      const alertConfirm = document.getElementById('alertConfirm');
      
      alertCancel.addEventListener('click', () => alertModal.classList.remove('active'));
      alertConfirm.addEventListener('click', () => alertModal.classList.remove('active'));

      // Newsletter subscription
      const subscribeBtn = document.getElementById('subscribeBtn');
      subscribeBtn.addEventListener('click', handleNewsletterSubscription);

      // Social sharing
      document.querySelectorAll('.share-btn').forEach(btn => {
        btn.addEventListener('click', () => shareProduct(btn.dataset.platform));
      });

      // Copy share link
      const copyShareLink = document.getElementById('copyShareLink');
      copyShareLink.addEventListener('click', copyProductLink);

      // Product detail page order button
      document.getElementById('detailOrderBtn').addEventListener('click', function() {
        if (currentProduct) {
          startCheckout(currentProduct.id);
        }
      });

      // Product detail page wishlist button
      document.getElementById('detailWishlistBtn').addEventListener('click', function() {
        if (currentProduct) {
          toggleWishlist(currentProduct.id);
        }
      });
    }

    // NEW: Banner Swipe Functionality
    function setupBannerSwipe() {
      const bannerTrack = document.getElementById('bannerTrack');
      let startX = 0;
      let currentX = 0;
      let isSwiping = false;

      bannerTrack.addEventListener('touchstart', (e) => {
        startX = e.touches[0].clientX;
        isSwiping = true;
        // Pause auto slide during swipe
        clearInterval(bannerInterval);
      });

      bannerTrack.addEventListener('touchmove', (e) => {
        if (!isSwiping) return;
        currentX = e.touches[0].clientX;
        const diff = startX - currentX;
        // Move the banner track temporarily
        bannerTrack.style.transform = `translateX(calc(-${currentBannerIndex * 100}% - ${diff}px))`;
      });

      bannerTrack.addEventListener('touchend', () => {
        if (!isSwiping) return;
        isSwiping = false;
        const diff = startX - currentX;
        // If the swipe is more than 50px, change the slide
        if (Math.abs(diff) > 50) {
          if (diff > 0) {
            // Swipe left, go to next
            currentBannerIndex = (currentBannerIndex + 1) % bannerImages.length;
          } else {
            // Swipe right, go to previous
            currentBannerIndex = (currentBannerIndex - 1 + bannerImages.length) % bannerImages.length;
          }
        }
        goToBannerSlide(currentBannerIndex);
        // Restart auto slide
        startBannerCarousel();
      });
    }

    // NEW: Load Delivery Charge from Firebase
    function loadDeliveryCharge() {
      // First try to load from cache
      const cachedDeliveryCharge = getFromCache(CACHE_KEYS.DELIVERY_CHARGE);
      if (cachedDeliveryCharge) {
        deliveryCharge = cachedDeliveryCharge;
        updateDeliveryChargeDisplay();
      }

      // Then load from Firebase Realtime Database
      realtimeDb.ref('deliveryCharge').on('value', (snapshot) => {
        if (snapshot.exists()) {
          deliveryCharge = snapshot.val();
          // Save to cache
          saveToCache(CACHE_KEYS.DELIVERY_CHARGE, deliveryCharge);
          updateDeliveryChargeDisplay();
        }
      }, (error) => {
        console.error('Error loading delivery charge:', error);
        // If Firebase fails but we have cached data, use that
        if (cachedDeliveryCharge) {
          showToast('Using cached delivery charge', 'success');
        }
      });
    }

    function updateDeliveryChargeDisplay() {
      // Update delivery charge in payment summary
      const sumDel = document.getElementById('sumDel');
      if (sumDel) {
        const productPrice = currentProduct ? currentProduct.price * selectedQuantity : 0;
        const finalDeliveryCharge = productPrice > 999 ? 0 : deliveryCharge;
        sumDel.textContent = finalDeliveryCharge === 0 ? 'FREE' : `₹${finalDeliveryCharge}`;
      }
    }

    // Mobile Menu Functions
    function openMenu() {
      mobileMenu.classList.add('active');
      menuOverlay.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeMenu() {
      mobileMenu.classList.remove('active');
      menuOverlay.classList.remove('active');
      document.body.style.overflow = '';
    }

    // Theme Functions
    function toggleTheme() {
      const currentTheme = document.documentElement.getAttribute('data-theme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      
      document.documentElement.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
    }

    // Page Navigation
    function showPage(pageId) {
      pages.forEach(page => {
        page.classList.remove('active');
      });
      document.getElementById(pageId).classList.add('active');
      window.scrollTo(0, 0);
      
      // Update steps pills based on current page
      updateStepsPills(pageId);
      
      // Load specific page data
      if (pageId === 'productsPage') {
        loadProducts();
      } else if (pageId === 'myOrdersPage') {
        loadUserOrders();
      } else if (pageId === 'wishlistPage') {
        loadWishlist();
      } else if (pageId === 'accountPage') {
        loadAccountData();
      }
    }

    function updateStepsPills(currentPage) {
      const pills = ['pill-products', 'pill-order', 'pill-user', 'pill-pay'];
      const currentIndex = {
        'homePage': 0,
        'productsPage': 0,
        'orderPage': 1,
        'userPage': 2,
        'paymentPage': 3,
        'successPage': 4
      }[currentPage] || 0;

      pills.forEach((pillId, index) => {
        const pill = document.getElementById(pillId);
        if (index <= currentIndex) {
          pill.classList.remove('disabled');
        } else {
          pill.classList.add('disabled');
        }
      });
    }

    // Auth Functions
    function showLoginModal() {
      authModal.classList.add('active');
      switchAuthTab('login');
    }

    function closeAuthModal() {
      authModal.classList.remove('active');
    }

    function switchAuthTab(tab) {
      // Update tabs
      authTabs.forEach(t => t.classList.remove('active'));
      document.querySelector(`[data-tab="${tab}"]`).classList.add('active');
      
      // Update forms
      authForms.forEach(form => form.classList.remove('active'));
      if (tab === 'login') {
        document.getElementById('loginForm').classList.add('active');
      } else if (tab === 'signup') {
        document.getElementById('signupForm').classList.add('active');
      } else if (tab === 'forgot-password') {
        document.getElementById('forgotPasswordForm').classList.add('active');
      }
    }

    function checkAuthAndShowPage(pageId) {
      if (currentUser) {
        showPage(pageId);
      } else {
        showLoginModal();
        showToast('Please login to access this page', 'error');
      }
    }

    function handleLogin(e) {
      e.preventDefault();
      const email = document.getElementById('loginEmail').value;
      const password = document.getElementById('loginPassword').value;
      
      auth.signInWithEmailAndPassword(email, password)
        .then((userCredential) => {
          showToast('Login successful!', 'success');
          closeAuthModal();
          loadUserData(userCredential.user);
        })
        .catch((error) => {
          showToast(error.message, 'error');
        });
    }

    function handleSignup(e) {
      e.preventDefault();
      const name = document.getElementById('signupName').value;
      const email = document.getElementById('signupEmail').value;
      const password = document.getElementById('signupPassword').value;
      const confirmPassword = document.getElementById('signupConfirmPassword').value;
      
      if (password !== confirmPassword) {
        showToast('Passwords do not match', 'error');
        return;
      }
      
      auth.createUserWithEmailAndPassword(email, password)
        .then((userCredential) => {
          // Save user profile
          return db.collection('users').doc(userCredential.user.uid).set({
            name: name,
            email: email,
            createdAt: new Date(),
            role: 'user'
          });
        })
        .then(() => {
          showToast('Account created successfully!', 'success');
          closeAuthModal();
          loadUserData(auth.currentUser);
        })
        .catch((error) => {
          showToast(error.message, 'error');
        });
    }

    function handleForgotPassword(e) {
      e.preventDefault();
      const email = document.getElementById('forgotPasswordEmail').value;
      
      auth.sendPasswordResetEmail(email)
        .then(() => {
          showToast('Password reset email sent!', 'success');
          switchAuthTab('login');
        })
        .catch((error) => {
          showToast(error.message, 'error');
        });
    }

    function signInWithGoogle() {
      const provider = new firebase.auth.GoogleAuthProvider();
      
      auth.signInWithPopup(provider)
        .then((result) => {
          const user = result.user;
          
          // Check if user exists in Firestore
          return db.collection('users').doc(user.uid).get()
            .then((doc) => {
              if (!doc.exists) {
                // Create new user document
                return db.collection('users').doc(user.uid).set({
                  name: user.displayName,
                  email: user.email,
                  createdAt: new Date(),
                  role: 'user'
                });
              }
            });
        })
        .then(() => {
          showToast('Google sign-in successful!', 'success');
          closeAuthModal();
          loadUserData(auth.currentUser);
        })
        .catch((error) => {
          showToast(error.message, 'error');
        });
    }

    function checkAuthState() {
      auth.onAuthStateChanged((user) => {
        if (user) {
          currentUser = user;
          loadUserData(user);
        } else {
          currentUser = null;
          updateAuthUI(false);
        }
      });
    }

    function loadUserData(user) {
      db.collection('users').doc(user.uid).get()
        .then((doc) => {
          if (doc.exists) {
            const userData = doc.data();
            isAdmin = userData.role === 'admin';
            updateAuthUI(true, userData);
            
            // Save user data to cache
            saveToCache(CACHE_KEYS.USER_DATA, userData);
            
            loadUserOrders();
            loadWishlist();
          }
        })
        .catch((error) => {
          console.error('Error loading user data:', error);
        });
    }

    function updateAuthUI(isLoggedIn, userData = null) {
      if (isLoggedIn && userData) {
        // Update desktop UI
        document.getElementById('userName').textContent = userData.name;
        document.getElementById('userAvatar').textContent = userData.name.charAt(0).toUpperCase();
        document.getElementById('accountEmail').textContent = userData.email;
        userProfile.style.display = 'flex';
        openLoginTop.style.display = 'none';
        
        // Update mobile UI
        mobileUserName.textContent = userData.name;
        mobileUserProfile.style.display = 'flex';
        mobileLoginBtn.style.display = 'none';
        
        // Update account page
        document.getElementById('accountPageName').textContent = userData.name;
        document.getElementById('accountPageEmail').textContent = userData.email;
        document.getElementById('accountPageAvatar').textContent = userData.name.charAt(0).toUpperCase();
        document.getElementById('profileName').value = userData.name;
        document.getElementById('profileEmail').value = userData.email;
      } else {
        // Update desktop UI
        userProfile.style.display = 'none';
        openLoginTop.style.display = 'block';
        
        // Update mobile UI
        mobileUserProfile.style.display = 'none';
        mobileLoginBtn.style.display = 'flex';
      }
    }

    function toggleAccountDropdown() {
      accountDropdown.classList.toggle('active');
    }

    function logout() {
      auth.signOut()
        .then(() => {
          showToast('Logged out successfully', 'success');
          currentUser = null;
          isAdmin = false;
          updateAuthUI(false);
          accountDropdown.classList.remove('active');
          
          // Clear user-specific cache
          clearCache(CACHE_KEYS.ORDERS);
          clearCache(CACHE_KEYS.WISHLIST);
          clearCache(CACHE_KEYS.USER_DATA);
        })
        .catch((error) => {
          showToast(error.message, 'error');
        });
    }

    // Product Functions
    function loadProducts() {
      // NEW: First try to load from cache
      const cachedProducts = getFromCache(CACHE_KEYS.PRODUCTS);
      if (cachedProducts) {
        console.log('Loading products from cache');
        displayProducts(cachedProducts);
        allProducts = cachedProducts;
      } else {
        console.log('No cached products found');
      }

      // Then load from Firebase (this will update cache and UI)
      db.collection('products').where('active', '==', true).get()
        .then((querySnapshot) => {
          allProducts = [];
          querySnapshot.forEach((doc) => {
            const product = { id: doc.id, ...doc.data() };
            allProducts.push(product);
          });
          
          // NEW: Save to cache
          saveToCache(CACHE_KEYS.PRODUCTS, allProducts);
          
          // Display products
          displayProducts(allProducts);
          
          // Load recently viewed products
          loadRecentlyViewed();
        })
        .catch((error) => {
          console.error('Error loading products:', error);
          showToast('Error loading products', 'error');
          
          // If Firebase fails but we have cached data, use that
          if (cachedProducts && cachedProducts.length > 0) {
            showToast('Using cached data - some features may be limited', 'success');
          }
        });
    }

    function displayProducts(products) {
      const productGrid = document.getElementById('productGrid') || document.getElementById('homeProductGrid');
      const homeSearchResults = document.getElementById('homeSearchResults');
      const productSlider = document.getElementById('productSlider');
      
      if (productGrid) productGrid.innerHTML = '';
      if (homeSearchResults) homeSearchResults.innerHTML = '';
      if (productSlider) productSlider.innerHTML = '';
      
      products.forEach((product) => {
        // Create product card
        createProductCard(product, productGrid);
        
        // Add to slider if it's a featured product
        if (product.featured && productSlider) {
          createProductSliderCard(product, productSlider);
        }
      });
    }

    function createProductCard(product, container) {
      const card = document.createElement('div');
      card.className = 'product-card';
      card.innerHTML = `
        <div class="product-card-image" style="background-image: url('${product.images?.[0] || 'https://images.unsplash.com/photo-1505740420928-5e560c06d30e'}')" onclick="showProductDetail('${product.id}')">
          ${product.badge ? `<div class="product-card-badge">${product.badge}</div>` : ''}
        </div>
        <div class="product-card-body">
          <div class="product-card-title">${product.name}</div>
          <div class="product-card-rating">
            <div class="product-card-stars">★★★★★</div>
            <div class="product-card-review-count">(${product.reviewCount || '0'})</div>
          </div>
          <div class="product-card-price">
            <div class="product-card-current-price">₹${product.price}</div>
            ${product.originalPrice ? `<div class="product-card-original-price">₹${product.originalPrice}</div>` : ''}
          </div>
          <div class="product-card-actions">
            <button class="action-btn wishlist-btn ${isInWishlist(product.id) ? 'active' : ''}" onclick="toggleWishlist('${product.id}', event)">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="${isInWishlist(product.id) ? 'currentColor' : 'none'}" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
              </svg>
            </button>
            <button class="action-btn share-btn" onclick="shareProduct('${product.id}', event)">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="18" cy="5" r="3"></circle>
                <circle cx="6" cy="12" r="3"></circle>
                <circle cx="18" cy="19" r="3"></circle>
                <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
              </svg>
            </button>
          </div>
        </div>
      `;
      
      if (container) {
        container.appendChild(card);
      }
      
      return card;
    }

    function createProductSliderCard(product, container) {
      const item = document.createElement('div');
      item.className = 'slider-item';
      item.innerHTML = `
        <div class="slider-item-img" style="background-image: url('${product.images?.[0] || 'https://images.unsplash.com/photo-1505740420928-5e560c06d30e'}')" onclick="showProductDetail('${product.id}')"></div>
        <div class="slider-item-body">
          <div class="slider-item-title">${product.name}</div>
          <div class="slider-item-price">₹${product.price}</div>
        </div>
      `;
      
      if (container) {
        container.appendChild(item);
      }
    }

    function showProductDetail(productId) {
      const product = allProducts.find(p => p.id === productId);
      if (!product) return;
      
      currentProduct = product;
      
      // Update breadcrumb
      document.getElementById('breadcrumbProductName').textContent = product.name;
      
      // Update product details
      document.getElementById('detailTitle').textContent = product.name;
      document.getElementById('detailSku').textContent = `SKU: ${product.sku || product.id}`;
      document.getElementById('detailPrice').textContent = `₹${product.price}`;
      document.getElementById('detailDesc').textContent = product.description || '';
      document.getElementById('detailFullDesc').textContent = product.fullDescription || product.description || 'No description available.';
      
      // Update stock status
      const stockStatus = document.getElementById('detailStockStatus');
      if (product.stock > 10) {
        stockStatus.textContent = 'In Stock';
        stockStatus.className = 'stock-status in-stock';
      } else if (product.stock > 0) {
        stockStatus.textContent = `Only ${product.stock} left!`;
        stockStatus.className = 'stock-status low-stock';
      } else {
        stockStatus.textContent = 'Out of Stock';
        stockStatus.className = 'stock-status out-of-stock';
      }
      
      // Update images
      const mainImage = document.getElementById('detailMainImage');
      const thumbnails = document.getElementById('detailThumbnails');
      
      if (product.images && product.images.length > 0) {
        mainImage.style.backgroundImage = `url('${product.images[0]}')`;
        thumbnails.innerHTML = '';
        
        product.images.forEach((image, index) => {
          const thumb = document.createElement('div');
          thumb.className = `product-detail-thumbnail ${index === 0 ? 'active' : ''}`;
          thumb.style.backgroundImage = `url('${image}')`;
          thumb.onclick = () => {
            mainImage.style.backgroundImage = `url('${image}')`;
            document.querySelectorAll('.product-detail-thumbnail').forEach(t => t.classList.remove('active'));
            thumb.classList.add('active');
          };
          thumbnails.appendChild(thumb);
        });
      }
      
      // Update wishlist button
      const wishlistBtn = document.getElementById('detailWishlistBtn');
      wishlistBtn.textContent = isInWishlist(productId) ? 'Remove from Wishlist' : 'Add to Wishlist';
      wishlistBtn.className = isInWishlist(productId) ? 'btn secondary active' : 'btn secondary';
      
      // Update share link
      document.getElementById('productShareLink').value = `${window.location.origin}?product=${productId}`;
      
      // Load similar products
      loadSimilarProducts(product);
      
      // Add to recently viewed
      addToRecentlyViewed(product);
      
      // Show product detail page
      showPage('productDetailPage');
    }

    function loadSimilarProducts(product) {
      const similarSlider = document.getElementById('similarProductsSlider');
      if (!similarSlider) return;
      
      similarSlider.innerHTML = '';
      
      // Find products in the same category
      const similarProducts = allProducts
        .filter(p => p.id !== product.id && p.category === product.category)
        .slice(0, 10);
      
      if (similarProducts.length === 0) {
        // If no similar products, show random products
        const randomProducts = allProducts
          .filter(p => p.id !== product.id)
          .sort(() => 0.5 - Math.random())
          .slice(0, 10);
        
        randomProducts.forEach(product => {
          createProductSliderCard(product, similarSlider);
        });
      } else {
        similarProducts.forEach(product => {
          createProductSliderCard(product, similarSlider);
        });
      }
    }

    function addToRecentlyViewed(product) {
      // Remove if already exists
      recentlyViewed = recentlyViewed.filter(p => p.id !== product.id);
      
      // Add to beginning
      recentlyViewed.unshift(product);
      
      // Keep only last 10 items
      if (recentlyViewed.length > 10) {
        recentlyViewed = recentlyViewed.slice(0, 10);
      }
      
      // Save to localStorage
      saveToCache(CACHE_KEYS.RECENTLY_VIEWED, recentlyViewed);
      
      // Update UI
      loadRecentlyViewed();
    }

    function loadRecentlyViewed() {
      // Load from cache
      const saved = getFromCache(CACHE_KEYS.RECENTLY_VIEWED);
      if (saved) {
        recentlyViewed = saved;
      }
      
      const recentlyViewedSection = document.getElementById('recentlyViewedSection');
      const recentlyViewedSlider = document.getElementById('recentlyViewedSlider');
      
      if (!recentlyViewedSection || !recentlyViewedSlider) return;
      
      if (recentlyViewed.length > 0) {
        recentlyViewedSection.style.display = 'block';
        recentlyViewedSlider.innerHTML = '';
        
        recentlyViewed.forEach(product => {
          createProductSliderCard(product, recentlyViewedSlider);
        });
      } else {
        recentlyViewedSection.style.display = 'none';
      }
    }

    // Wishlist Functions
    function isInWishlist(productId) {
      return wishlistItems.some(item => item.id === productId);
    }

    function toggleWishlist(productId, event) {
      if (event) event.stopPropagation();
      
      if (!currentUser) {
        showLoginModal();
        showToast('Please login to manage your wishlist', 'error');
        return;
      }
      
      const product = allProducts.find(p => p.id === productId);
      if (!product) return;
      
      const isInList = isInWishlist(productId);
      
      if (isInList) {
        // Remove from wishlist
        wishlistItems = wishlistItems.filter(item => item.id !== productId);
        removeFromWishlistInDB(productId);
        showToast('Removed from wishlist', 'success');
      } else {
        // Add to wishlist
        wishlistItems.push(product);
        addToWishlistInDB(product);
        showToast('Added to wishlist', 'success');
      }
      
      // Update cache
      saveToCache(CACHE_KEYS.WISHLIST, wishlistItems);
      
      // Update UI
      updateWishlistButtons(productId);
      
      // If on wishlist page, reload
      if (document.getElementById('wishlistPage').classList.contains('active')) {
        loadWishlist();
      }
    }

    function addToWishlistInDB(product) {
      if (!currentUser) return;
      
      db.collection('users').doc(currentUser.uid).collection('wishlist').doc(product.id).set({
        productId: product.id,
        addedAt: new Date()
      })
      .catch((error) => {
        console.error('Error adding to wishlist:', error);
      });
    }

    function removeFromWishlistInDB(productId) {
      if (!currentUser) return;
      
      db.collection('users').doc(currentUser.uid).collection('wishlist').doc(productId).delete()
      .catch((error) => {
        console.error('Error removing from wishlist:', error);
      });
    }

    function loadWishlist() {
      // NEW: First try to load from cache
      const cachedWishlist = getFromCache(CACHE_KEYS.WISHLIST);
      if (cachedWishlist && cachedWishlist.length > 0) {
        wishlistItems = cachedWishlist;
        displayWishlistItems();
      }

      if (!currentUser) {
        document.getElementById('emptyWishlist').style.display = 'block';
        document.getElementById('wishlistItems').innerHTML = '';
        return;
      }
      
      db.collection('users').doc(currentUser.uid).collection('wishlist').get()
        .then((querySnapshot) => {
          const wishlistContainer = document.getElementById('wishlistItems');
          const emptyWishlist = document.getElementById('emptyWishlist');
          
          wishlistContainer.innerHTML = '';
          wishlistItems = [];
          
          if (querySnapshot.empty) {
            emptyWishlist.style.display = 'block';
            // Clear cache if no items
            clearCache(CACHE_KEYS.WISHLIST);
            return;
          }
          
          emptyWishlist.style.display = 'none';
          
          querySnapshot.forEach((doc) => {
            const productId = doc.data().productId;
            const product = allProducts.find(p => p.id === productId);
            
            if (product) {
              wishlistItems.push(product);
            }
          });
          
          // Save to cache
          saveToCache(CACHE_KEYS.WISHLIST, wishlistItems);
          
          // Display wishlist items
          displayWishlistItems();
        })
        .catch((error) => {
          console.error('Error loading wishlist:', error);
          showToast('Error loading wishlist', 'error');
          
          // If Firebase fails but we have cached data, use that
          if (cachedWishlist && cachedWishlist.length > 0) {
            showToast('Using cached wishlist data', 'success');
            displayWishlistItems();
          }
        });
    }

    function displayWishlistItems() {
      const wishlistContainer = document.getElementById('wishlistItems');
      const emptyWishlist = document.getElementById('emptyWishlist');
      
      wishlistContainer.innerHTML = '';
      
      if (wishlistItems.length === 0) {
        emptyWishlist.style.display = 'block';
        return;
      }
      
      emptyWishlist.style.display = 'none';
      
      wishlistItems.forEach(product => {
        const card = createProductCard(product, wishlistContainer);
        card.style.maxWidth = '300px';
      });
    }

    function updateWishlistButtons(productId) {
      // Update product card buttons
      document.querySelectorAll(`.wishlist-btn[onclick*="${productId}"]`).forEach(btn => {
        const isActive = isInWishlist(productId);
        btn.classList.toggle('active', isActive);
        btn.querySelector('svg').setAttribute('fill', isActive ? 'currentColor' : 'none');
      });
      
      // Update detail page button
      const detailBtn = document.getElementById('detailWishlistBtn');
      if (detailBtn && currentProduct && currentProduct.id === productId) {
        detailBtn.textContent = isInWishlist(productId) ? 'Remove from Wishlist' : 'Add to Wishlist';
        detailBtn.className = isInWishlist(productId) ? 'btn secondary active' : 'btn secondary';
      }
    }

    // Order Functions
    function loadUserOrders() {
      // NEW: First try to load from cache
      const cachedOrders = getFromCache(CACHE_KEYS.ORDERS);
      if (cachedOrders && cachedOrders.length > 0) {
        currentOrders = cachedOrders;
        displayOrders();
      }

      if (!currentUser) {
        document.getElementById('noOrders').style.display = 'block';
        document.getElementById('ordersList').innerHTML = '';
        return;
      }
      
      db.collection('orders')
        .where('userId', '==', currentUser.uid)
        .orderBy('createdAt', 'desc')
        .get()
        .then((querySnapshot) => {
          const ordersList = document.getElementById('ordersList');
          const noOrders = document.getElementById('noOrders');
          
          ordersList.innerHTML = '';
          currentOrders = [];
          
          if (querySnapshot.empty) {
            noOrders.style.display = 'block';
            ordersNotification.style.display = 'none';
            // Clear cache if no orders
            clearCache(CACHE_KEYS.ORDERS);
            return;
          }
          
          noOrders.style.display = 'none';
          ordersNotification.style.display = 'flex';
          ordersNotification.textContent = querySnapshot.size;
          
          querySnapshot.forEach((doc) => {
            const order = { id: doc.id, ...doc.data() };
            currentOrders.push(order);
          });
          
          // Save to cache
          saveToCache(CACHE_KEYS.ORDERS, currentOrders);
          
          // Display orders
          displayOrders();
        })
        .catch((error) => {
          console.error('Error loading orders:', error);
          showToast('Error loading orders', 'error');
          
          // If Firebase fails but we have cached data, use that
          if (cachedOrders && cachedOrders.length > 0) {
            showToast('Using cached orders data', 'success');
            displayOrders();
          }
        });
    }

    function displayOrders() {
      const ordersList = document.getElementById('ordersList');
      const noOrders = document.getElementById('noOrders');
      
      ordersList.innerHTML = '';
      
      if (currentOrders.length === 0) {
        noOrders.style.display = 'block';
        ordersNotification.style.display = 'none';
        return;
      }
      
      noOrders.style.display = 'none';
      ordersNotification.style.display = 'flex';
      ordersNotification.textContent = currentOrders.length;
      
      currentOrders.forEach(order => {
        createOrderCard(order, ordersList);
      });
    }

    function createOrderCard(order, container) {
      const card = document.createElement('div');
      card.className = 'order-card';
      card.onclick = () => showOrderDetail(order.id);
      
      const product = order.product || {};
      const statusClass = `status-${order.status || 'confirmed'}`;
      
      card.innerHTML = `
        <div class="order-header">
          <div>
            <div class="order-id">Order #${order.id.substring(0, 8)}</div>
            <div class="order-date">Placed on ${formatDate(order.createdAt?.toDate())}</div>
            ${order.estimatedDelivery ? `<div class="order-estimated">Estimated delivery: ${formatDate(order.estimatedDelivery?.toDate())}</div>` : ''}
          </div>
          <div class="order-status ${statusClass}">${(order.status || 'confirmed').toUpperCase()}</div>
        </div>
        <div class="order-details">
          <div class="order-product-image" style="background-image: url('${product.images?.[0] || 'https://images.unsplash.com/photo-1505740420928-5e560c06d30e'}')"></div>
          <div class="order-product-info">
            <div class="order-product-title">${product.name || 'Product'}</div>
            <div class="order-product-price">₹${order.totalAmount || '0'}</div>
            <div class="order-product-meta">Qty: ${order.quantity || 1} • Size: ${order.size || 'M'}</div>
          </div>
        </div>
        <div class="order-actions">
          ${order.status === 'confirmed' ? `<button class="btn secondary" onclick="event.stopPropagation(); cancelOrder('${order.id}')">Cancel Order</button>` : ''}
          <button class="btn" onclick="event.stopPropagation(); showOrderDetail('${order.id}')">View Details</button>
        </div>
      `;
      
      container.appendChild(card);
    }

    function showOrderDetail(orderId) {
      const order = currentOrders.find(o => o.id === orderId);
      if (!order) return;
      
      currentOrderDetails = order;
      const orderDetailContent = document.getElementById('orderDetailContent');
      
      if (!orderDetailContent) return;
      
      const product = order.product || {};
      const address = order.shippingAddress || {};
      
      orderDetailContent.innerHTML = `
        <div class="order-detail-section">
          <div class="order-detail-label">Order Information</div>
          <div class="order-detail-value">
            <strong>Order ID:</strong> ${order.id}<br>
            <strong>Order Date:</strong> ${formatDate(order.createdAt?.toDate())}<br>
            <strong>Status:</strong> <span class="order-status status-${order.status || 'confirmed'}">${(order.status || 'confirmed').toUpperCase()}</span>
          </div>
        </div>
        
        <div class="order-detail-section">
          <div class="order-detail-label">Product Details</div>
          <div class="order-detail-product">
            <div class="order-detail-image" style="background-image: url('${product.images?.[0] || 'https://images.unsplash.com/photo-1505740420928-5e560c06d30e'}')"></div>
            <div class="order-detail-product-info">
              <div class="order-product-title">${product.name || 'Product'}</div>
              <div class="order-product-price">₹${order.totalAmount || '0'}</div>
              <div class="order-product-meta">Qty: ${order.quantity || 1} • Size: ${order.size || 'M'}</div>
            </div>
          </div>
        </div>
        
        <div class="order-detail-section">
          <div class="order-detail-label">Shipping Address</div>
          <div class="order-detail-value">
            ${address.fullName || ''}<br>
            ${address.house || ''}<br>
            ${address.city || ''}, ${address.state || ''} - ${address.pincode || ''}<br>
            Phone: ${address.mobile || ''}
          </div>
        </div>
        
        <div class="order-detail-section">
          <div class="order-detail-label">Payment Information</div>
          <div class="order-detail-value">
            <strong>Payment Method:</strong> ${order.paymentMethod === 'cod' ? 'Cash on Delivery' : 'Prepaid'}<br>
            <strong>Total Amount:</strong> ₹${order.totalAmount || '0'}
          </div>
        </div>
        
        ${order.status === 'confirmed' ? `
        <div class="order-actions" style="margin-top: 20px;">
          <button class="btn error" onclick="cancelOrder('${order.id}')">Cancel Order</button>
        </div>
        ` : ''}
      `;
      
      showPage('orderDetailPage');
    }

    function showMyOrders() {
      loadUserOrders();
    }

    function cancelOrder(orderId) {
      currentOrderId = orderId;
      document.getElementById('cancellationModal').classList.add('active');
    }

    function showCancelConfirmModal() {
      const order = currentOrders.find(o => o.id === currentOrderId);
      if (!order) return;
      
      // Calculate refund amount
      const orderTotal = order.totalAmount || 0;
      const charges = order.paymentMethod === 'cod' ? 0 : Math.round(orderTotal * 0.02); // 2% payment gateway charges
      const refundAmount = orderTotal - charges;
      
      document.getElementById('refundOrderTotal').textContent = `₹${orderTotal}`;
      document.getElementById('refundCharges').textContent = `₹${charges}`;
      document.getElementById('refundTotal').textContent = `₹${refundAmount}`;
      
      document.getElementById('cancellationModal').classList.remove('active');
      document.getElementById('cancelConfirmModal').classList.add('active');
    }

    function processOrderCancellation() {
      if (!currentOrderId) return;
      
      // Update order status in database
      db.collection('orders').doc(currentOrderId).update({
        status: 'cancelled',
        cancelledAt: new Date()
      })
      .then(() => {
        showToast('Order cancelled successfully', 'success');
        document.getElementById('cancelConfirmModal').classList.remove('active');
        
        // Update cache
        const updatedOrders = currentOrders.map(order => 
          order.id === currentOrderId ? { ...order, status: 'cancelled', cancelledAt: new Date() } : order
        );
        saveToCache(CACHE_KEYS.ORDERS, updatedOrders);
        
        // Reload orders
        loadUserOrders();
        
        // If on order detail page, go back to orders
        if (document.getElementById('orderDetailPage').classList.contains('active')) {
          showPage('myOrdersPage');
        }
      })
      .catch((error) => {
        showToast('Error cancelling order: ' + error.message, 'error');
      });
    }

    // Checkout Functions
    function startCheckout(productId) {
      const product = allProducts.find(p => p.id === productId);
      if (!product) return;
      
      currentProduct = product;
      selectedSize = 'S';
      selectedQuantity = 1;
      
      // Update order page
      document.getElementById('spTitle').textContent = product.name;
      document.getElementById('spPrice').textContent = `₹${product.price}`;
      document.getElementById('spDesc').textContent = product.description || '';
      document.getElementById('spFullDesc').textContent = product.fullDescription || product.description || '';
      
      // Update gallery
      const galleryMain = document.getElementById('galleryMain');
      if (product.images && product.images.length > 0) {
        galleryMain.style.backgroundImage = `url('${product.images[0]}')`;
        
        // Add carousel dots if multiple images
        if (product.images.length > 1) {
          const dotsContainer = galleryMain.querySelector('.carousel-dots');
          dotsContainer.innerHTML = '';
          
          product.images.forEach((_, index) => {
            const dot = document.createElement('div');
            dot.className = `carousel-dot ${index === 0 ? 'active' : ''}`;
            dot.onclick = () => changeProductImage(index);
            dotsContainer.appendChild(dot);
          });
        }
      }
      
      // Setup size selection
      document.querySelectorAll('.size-option').forEach(option => {
        option.addEventListener('click', function() {
          document.querySelectorAll('.size-option').forEach(o => o.classList.remove('selected'));
          this.classList.add('selected');
          selectedSize = this.dataset.value;
          document.getElementById('sizeValidationError').classList.remove('show');
        });
      });
      
      // Setup quantity controls
      document.querySelector('.qty-minus').addEventListener('click', () => {
        if (selectedQuantity > 1) {
          selectedQuantity--;
          document.getElementById('qtySelect').value = selectedQuantity;
        }
      });
      
      document.querySelector('.qty-plus').addEventListener('click', () => {
        if (selectedQuantity < 10) {
          selectedQuantity++;
          document.getElementById('qtySelect').value = selectedQuantity;
        }
      });
      
      // Setup navigation buttons
      document.getElementById('toUserInfo').onclick = proceedToUserInfo;
      document.getElementById('backToProducts').onclick = () => showPage('productsPage');
      
      showPage('orderPage');
    }

    function changeProductImage(index) {
      if (!currentProduct || !currentProduct.images) return;
      
      const galleryMain = document.getElementById('galleryMain');
      galleryMain.style.backgroundImage = `url('${currentProduct.images[index]}')`;
      
      // Update dots
      document.querySelectorAll('.carousel-dot').forEach((dot, i) => {
        dot.classList.toggle('active', i === index);
      });
    }

    function proceedToUserInfo() {
      // Validate size selection
      if (!selectedSize) {
        document.getElementById('sizeValidationError').classList.add('show');
        return;
      }
      
      showPage('userPage');
      
      // Load saved user info if available
      if (currentUser) {
        db.collection('users').doc(currentUser.uid).get()
          .then((doc) => {
            if (doc.exists) {
              const userData = doc.data();
              if (userData.defaultAddress) {
                const address = userData.defaultAddress;
                document.getElementById('fullname').value = address.fullName || '';
                document.getElementById('mobile').value = address.mobile || '';
                document.getElementById('pincode').value = address.pincode || '';
                document.getElementById('city').value = address.city || '';
                document.getElementById('state').value = address.state || '';
                document.getElementById('house').value = address.house || '';
              }
            }
          });
      }
      
      // Setup navigation buttons
      document.getElementById('toPayment').onclick = proceedToPayment;
      document.getElementById('editOrder').onclick = () => showPage('orderPage');
      document.getElementById('saveUserInfo').onclick = saveUserInfo;
    }

    function saveUserInfo() {
      userInfo = {
        fullName: document.getElementById('fullname').value,
        mobile: document.getElementById('mobile').value,
        pincode: document.getElementById('pincode').value,
        city: document.getElementById('city').value,
        state: document.getElementById('state').value,
        house: document.getElementById('house').value
      };
      
      // Validate required fields
      if (!userInfo.fullName || !userInfo.mobile || !userInfo.pincode || !userInfo.city || !userInfo.state || !userInfo.house) {
        showToast('Please fill all required fields', 'error');
        return;
      }
      
      // Save to database if user is logged in
      if (currentUser) {
        db.collection('users').doc(currentUser.uid).set({
          defaultAddress: userInfo
        }, { merge: true })
        .then(() => {
          showToast('Address saved successfully', 'success');
        })
        .catch((error) => {
          console.error('Error saving address:', error);
        });
      }
      
      showToast('Information saved', 'success');
    }

    function proceedToPayment() {
      // Validate user info
      if (!userInfo.fullName || !userInfo.mobile || !userInfo.pincode || !userInfo.city || !userInfo.state || !userInfo.house) {
        showToast('Please fill all required fields in Your Info page', 'error');
        showPage('userPage');
        return;
      }
      
      // Calculate order summary
      const productPrice = currentProduct.price * selectedQuantity;
      const finalDeliveryCharge = productPrice > 999 ? 0 : deliveryCharge;
      const totalAmount = productPrice + finalDeliveryCharge;
      
      document.getElementById('sumProduct').textContent = currentProduct.name;
      document.getElementById('sumQty').textContent = selectedQuantity;
      document.getElementById('sumPrice').textContent = `₹${productPrice}`;
      document.getElementById('sumDel').textContent = finalDeliveryCharge === 0 ? 'FREE' : `₹${finalDeliveryCharge}`;
      document.getElementById('sumTotal').textContent = `₹${totalAmount}`;
      
      // Setup navigation buttons
      document.getElementById('confirmOrder').onclick = confirmOrder;
      document.getElementById('payBack').onclick = () => showPage('userPage');
      
      showPage('paymentPage');
    }

    function confirmOrder() {
      if (!currentUser) {
        showLoginModal();
        showToast('Please login to place an order', 'error');
        return;
      }
      
      const paymentMethod = document.querySelector('input[name="pay"]:checked').value;
      const productPrice = currentProduct.price * selectedQuantity;
      const finalDeliveryCharge = productPrice > 999 ? 0 : deliveryCharge;
      const totalAmount = productPrice + finalDeliveryCharge;
      
      // Create order object
      const order = {
        userId: currentUser.uid,
        product: currentProduct,
        quantity: selectedQuantity,
        size: selectedSize,
        totalAmount: totalAmount,
        paymentMethod: paymentMethod,
        shippingAddress: userInfo,
        status: 'confirmed',
        createdAt: new Date(),
        estimatedDelivery: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000) // 7 days from now
      };
      
      // Save order to database
      db.collection('orders').add(order)
        .then((docRef) => {
          // Send confirmation email
          sendOrderConfirmationEmail(order, docRef.id);
          
          // Show success page
          showPage('successPage');
          
          // Setup success page buttons
          document.getElementById('goHome').onclick = () => showPage('homePage');
          document.getElementById('viewOrders').onclick = () => {
            showPage('myOrdersPage');
            loadUserOrders();
          };
          
          showToast('Order placed successfully!', 'success');
        })
        .catch((error) => {
          showToast('Error placing order: ' + error.message, 'error');
        });
    }

    function sendOrderConfirmationEmail(order, orderId) {
      const templateParams = {
        to_name: order.shippingAddress.fullName,
        order_id: orderId,
        product_name: order.product.name,
        total_amount: order.totalAmount,
        to_email: currentUser.email
      };
      
      emailjs.send('service_your_service_id', 'template_order_confirmation', templateParams)
        .then((response) => {
          console.log('Email sent successfully:', response);
        })
        .catch((error) => {
          console.error('Error sending email:', error);
        });
    }

    // Category Functions
    function loadCategories() {
      // NEW: First try to load from cache
      const cachedCategories = getFromCache(CACHE_KEYS.CATEGORIES);
      if (cachedCategories) {
        console.log('Loading categories from cache');
        displayCategories(cachedCategories);
      } else {
        console.log('No cached categories found');
      }

      db.collection('categories').where('active', '==', true).get()
        .then((querySnapshot) => {
          categories = [];
          querySnapshot.forEach((doc) => {
            const category = { id: doc.id, ...doc.data() };
            categories.push(category);
          });
          
          // NEW: Save to cache
          saveToCache(CACHE_KEYS.CATEGORIES, categories);
          
          // Display categories
          displayCategories(categories);
        })
        .catch((error) => {
          console.error('Error loading categories:', error);
          
          // If Firebase fails but we have cached data, use that
          if (cachedCategories && cachedCategories.length > 0) {
            showToast('Using cached categories data', 'success');
          }
        });
    }

    function displayCategories(categories) {
      const categoriesContainer = document.getElementById('categoriesContainer');
      const categoryCirclesContainer = document.getElementById('categoryCirclesContainer');
      
      if (categoriesContainer) categoriesContainer.innerHTML = '';
      if (categoryCirclesContainer) categoryCirclesContainer.innerHTML = '';
      
      categories.forEach(category => {
        // Create category pill
        if (categoriesContainer) {
          const pill = document.createElement('div');
          pill.className = 'category-pill';
          pill.textContent = category.name;
          pill.onclick = () => filterProductsByCategory(category.id);
          categoriesContainer.appendChild(pill);
        }
        
        // Create category circle
        if (categoryCirclesContainer) {
          const circle = document.createElement('div');
          circle.className = 'category-circle';
          circle.onclick = () => filterProductsByCategory(category.id);
          
          circle.innerHTML = `
            <div class="category-circle-image" style="background-image: url('${category.image || 'https://images.unsplash.com/photo-1505740420928-5e560c06d30e'}')"></div>
            <div class="category-circle-name">${category.name}</div>
          `;
          
          categoryCirclesContainer.appendChild(circle);
        }
      });
    }

    function filterProductsByCategory(categoryId) {
      const category = categories.find(c => c.id === categoryId);
      if (!category) return;
      
      // Update active category
      document.querySelectorAll('.category-pill').forEach(pill => {
        pill.classList.remove('active');
      });
      document.querySelectorAll('.category-pill').forEach(pill => {
        if (pill.textContent === category.name) {
          pill.classList.add('active');
        }
      });
      
      // Filter products
      const filteredProducts = allProducts.filter(product => product.category === categoryId);
      const productGrid = document.getElementById('productGrid');
      
      if (!productGrid) return;
      
      productGrid.innerHTML = '';
      
      if (filteredProducts.length === 0) {
        productGrid.innerHTML = '<div class="card-panel center">No products found in this category</div>';
      } else {
        filteredProducts.forEach(product => {
          createProductCard(product, productGrid);
        });
      }
    }

    // Banner Carousel Functions
    function loadBannerImages() {
      // For now, use placeholder images
      bannerImages = [
        'https://images.unsplash.com/photo-1607082350899-7e105aa886ae',
        'https://images.unsplash.com/photo-1556742049-0cfed4f6a45d',
        'https://images.unsplash.com/photo-1556742044-3c6cbf8eace2'
      ];
      
      const bannerTrack = document.getElementById('bannerTrack');
      const bannerControls = document.getElementById('bannerControls');
      
      if (!bannerTrack || !bannerControls) return;
      
      bannerTrack.innerHTML = '';
      bannerControls.innerHTML = '';
      
      bannerImages.forEach((image, index) => {
        // Create banner slide
        const slide = document.createElement('div');
        slide.className = 'banner-slide';
        slide.style.backgroundImage = `url('${image}')`;
        bannerTrack.appendChild(slide);
        
        // Create banner dot
        const dot = document.createElement('div');
        dot.className = `banner-dot ${index === 0 ? 'active' : ''}`;
        dot.onclick = () => goToBannerSlide(index);
        bannerControls.appendChild(dot);
      });
    }

    function startBannerCarousel() {
      bannerInterval = setInterval(() => {
        currentBannerIndex = (currentBannerIndex + 1) % bannerImages.length;
        goToBannerSlide(currentBannerIndex);
      }, 5000); // Change slide every 5 seconds
    }

    function goToBannerSlide(index) {
      currentBannerIndex = index;
      const bannerTrack = document.getElementById('bannerTrack');
      
      if (!bannerTrack) return;
      
      bannerTrack.style.transform = `translateX(-${index * 100}%)`;
      
      // Update dots
      document.querySelectorAll('.banner-dot').forEach((dot, i) => {
        dot.classList.toggle('active', i === index);
      });
    }

    // Search Functions
    function setupSearch() {
      const homeSearchInput = document.getElementById('homeSearchInput');
      const searchInput = document.getElementById('searchInput');
      
      if (homeSearchInput) {
        homeSearchInput.addEventListener('input', (e) => handleSearch(e.target.value, 'home'));
      }
      
      if (searchInput) {
        searchInput.addEventListener('input', (e) => handleSearch(e.target.value, 'products'));
      }
    }

    function handleSearch(query, context) {
      if (!query.trim()) {
        if (context === 'home') {
          document.getElementById('homeSearchResults').style.display = 'none';
          document.getElementById('homeProductGrid').style.display = 'grid';
        }
        return;
      }
      
      const filteredProducts = allProducts.filter(product => 
        product.name.toLowerCase().includes(query.toLowerCase()) ||
        (product.description && product.description.toLowerCase().includes(query.toLowerCase())) ||
        (product.category && product.category.toLowerCase().includes(query.toLowerCase()))
      );
      
      if (context === 'home') {
        const homeSearchResults = document.getElementById('homeSearchResults');
        const homeProductGrid = document.getElementById('homeProductGrid');
        
        homeSearchResults.style.display = 'grid';
        homeProductGrid.style.display = 'none';
        homeSearchResults.innerHTML = '';
        
        if (filteredProducts.length === 0) {
          homeSearchResults.innerHTML = '<div class="card-panel center">No products found</div>';
        } else {
          filteredProducts.forEach(product => {
            createProductCard(product, homeSearchResults);
          });
        }
      } else if (context === 'products') {
        const productGrid = document.getElementById('productGrid');
        
        if (!productGrid) return;
        
        productGrid.innerHTML = '';
        
        if (filteredProducts.length === 0) {
          productGrid.innerHTML = '<div class="card-panel center">No products found</div>';
        } else {
          filteredProducts.forEach(product => {
            createProductCard(product, productGrid);
          });
        }
      }
    }

    // Price Filter Functions
    function setupPriceFilter() {
      const minPriceSlider = document.getElementById('minPriceSlider');
      const maxPriceSlider = document.getElementById('maxPriceSlider');
      const minPrice = document.getElementById('minPrice');
      const maxPrice = document.getElementById('maxPrice');
      const applyPriceFilter = document.getElementById('applyPriceFilter');
      const resetPriceFilter = document.getElementById('resetPriceFilter');
      const minPriceValue = document.getElementById('minPriceValue');
      const maxPriceValue = document.getElementById('maxPriceValue');
      
      if (!minPriceSlider || !maxPriceSlider) return;
      
      // Update price values when sliders change
      minPriceSlider.addEventListener('input', () => {
        minPriceValue.textContent = `₹${minPriceSlider.value}`;
        minPrice.value = minPriceSlider.value;
      });
      
      maxPriceSlider.addEventListener('input', () => {
        maxPriceValue.textContent = `₹${maxPriceSlider.value}`;
        maxPrice.value = maxPriceSlider.value;
      });
      
      // Update sliders when input values change
      minPrice.addEventListener('input', () => {
        minPriceSlider.value = minPrice.value;
        minPriceValue.textContent = `₹${minPrice.value}`;
      });
      
      maxPrice.addEventListener('input', () => {
        maxPriceSlider.value = maxPrice.value;
        maxPriceValue.textContent = `₹${maxPrice.value}`;
      });
      
      // Apply filter
      applyPriceFilter.addEventListener('click', applyPriceFilterFunction);
      
      // Reset filter
      resetPriceFilter.addEventListener('click', resetPriceFilterFunction);
    }

    function applyPriceFilterFunction() {
      const minPrice = parseInt(document.getElementById('minPrice').value) || 0;
      const maxPrice = parseInt(document.getElementById('maxPrice').value) || 5000;
      
      const filteredProducts = allProducts.filter(product => {
        const price = product.price;
        return price >= minPrice && price <= maxPrice;
      });
      
      const productGrid = document.getElementById('productGrid');
      
      if (!productGrid) return;
      
      productGrid.innerHTML = '';
      
      if (filteredProducts.length === 0) {
        productGrid.innerHTML = '<div class="card-panel center">No products found in this price range</div>';
      } else {
        filteredProducts.forEach(product => {
          createProductCard(product, productGrid);
        });
      }
    }

    function resetPriceFilterFunction() {
      document.getElementById('minPrice').value = '0';
      document.getElementById('maxPrice').value = '5000';
      document.getElementById('minPriceSlider').value = '0';
      document.getElementById('maxPriceSlider').value = '5000';
      document.getElementById('minPriceValue').textContent = '₹0';
      document.getElementById('maxPriceValue').textContent = '₹5000';
      
      // Reload all products
      const productGrid = document.getElementById('productGrid');
      if (!productGrid) return;
      
      productGrid.innerHTML = '';
      allProducts.forEach(product => {
        createProductCard(product, productGrid);
      });
    }

    // Account Functions
    function loadAccountData() {
      if (!currentUser) return;
      
      // Profile information is already loaded in updateAuthUI
      // Load notification preferences
      db.collection('users').doc(currentUser.uid).get()
        .then((doc) => {
          if (doc.exists) {
            const userData = doc.data();
            
            // Set notification preferences
            if (userData.notifications) {
              document.getElementById('emailNotifications').checked = userData.notifications.email || true;
              document.getElementById('smsNotifications').checked = userData.notifications.sms || true;
            }
            
            // Set phone number if available
            if (userData.phone) {
              document.getElementById('profilePhone').value = userData.phone;
            }
          }
        })
        .catch((error) => {
          console.error('Error loading account data:', error);
        });
      
      // Setup update profile button
      document.getElementById('updateProfile').onclick = updateProfile;
      
      // Setup notification toggles
      document.getElementById('emailNotifications').addEventListener('change', saveNotificationPreferences);
      document.getElementById('smsNotifications').addEventListener('change', saveNotificationPreferences);
    }

    function updateProfile() {
      if (!currentUser) return;
      
      const name = document.getElementById('profileName').value;
      const phone = document.getElementById('profilePhone').value;
      
      db.collection('users').doc(currentUser.uid).set({
        name: name,
        phone: phone
      }, { merge: true })
      .then(() => {
        showToast('Profile updated successfully', 'success');
        
        // Update UI
        document.getElementById('userName').textContent = name;
        document.getElementById('userAvatar').textContent = name.charAt(0).toUpperCase();
        document.getElementById('mobileUserName').textContent = name;
        document.getElementById('accountPageName').textContent = name;
        document.getElementById('accountPageAvatar').textContent = name.charAt(0).toUpperCase();
        
        // Update cache
        const cachedUserData = getFromCache(CACHE_KEYS.USER_DATA) || {};
        cachedUserData.name = name;
        cachedUserData.phone = phone;
        saveToCache(CACHE_KEYS.USER_DATA, cachedUserData);
      })
      .catch((error) => {
        showToast('Error updating profile: ' + error.message, 'error');
      });
    }

    function saveNotificationPreferences() {
      if (!currentUser) return;
      
      const emailNotifications = document.getElementById('emailNotifications').checked;
      const smsNotifications = document.getElementById('smsNotifications').checked;
      
      db.collection('users').doc(currentUser.uid).set({
        notifications: {
          email: emailNotifications,
          sms: smsNotifications
        }
      }, { merge: true })
      .then(() => {
        showToast('Notification preferences saved', 'success');
      })
      .catch((error) => {
        console.error('Error saving notification preferences:', error);
      });
    }

    // Newsletter Functions
    function handleNewsletterSubscription() {
      const email = document.getElementById('newsletterEmail').value;
      
      if (!email) {
        showToast('Please enter your email address', 'error');
        return;
      }
      
      // Save to database
      db.collection('newsletter').add({
        email: email,
        subscribedAt: new Date()
      })
      .then(() => {
        showToast('Thank you for subscribing!', 'success');
        document.getElementById('newsletterEmail').value = '';
      })
      .catch((error) => {
        showToast('Error subscribing: ' + error.message, 'error');
      });
    }

    // Social Sharing Functions
    function shareProduct(platform, event) {
      if (event) event.stopPropagation();
      
      const product = currentProduct;
      if (!product) return;
      
      const productUrl = `${window.location.origin}?product=${product.id}`;
      const text = `Check out ${product.name} on Buyzo Cart for just ₹${product.price}!`;
      
      let shareUrl = '';
      
      switch (platform) {
        case 'facebook':
          shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(productUrl)}`;
          break;
        case 'twitter':
          shareUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(productUrl)}`;
          break;
        case 'whatsapp':
          shareUrl = `https://wa.me/?text=${encodeURIComponent(text + ' ' + productUrl)}`;
          break;
        default:
          // For product ID sharing (from product card)
          const productToShare = allProducts.find(p => p.id === platform);
          if (productToShare) {
            const productUrl = `${window.location.origin}?product=${platform}`;
            const text = `Check out ${productToShare.name} on Buyzo Cart for just ₹${productToShare.price}!`;
            
            if (navigator.share) {
              navigator.share({
                title: productToShare.name,
                text: text,
                url: productUrl
              })
              .catch((error) => {
                console.log('Error sharing:', error);
                copyToClipboard(productUrl);
                showToast('Product link copied to clipboard!', 'success');
              });
            } else {
              copyToClipboard(productUrl);
              showToast('Product link copied to clipboard!', 'success');
            }
          }
          return;
      }
      
      window.open(shareUrl, '_blank');
    }

    function copyProductLink() {
      const shareLink = document.getElementById('productShareLink');
      copyToClipboard(shareLink.value);
      showToast('Product link copied to clipboard!', 'success');
    }

    function copyToClipboard(text) {
      const textarea = document.createElement('textarea');
      textarea.value = text;
      document.body.appendChild(textarea);
      textarea.select();
      document.execCommand('copy');
      document.body.removeChild(textarea);
    }

    // Image Zoom Functions
    function openImageZoom() {
      const mainImage = document.getElementById('detailMainImage');
      const imageUrl = mainImage.style.backgroundImage.replace('url("', '').replace('")', '');
      
      document.getElementById('zoomImage').src = imageUrl;
      document.getElementById('zoomImage').style.transform = 'scale(1)';
      document.getElementById('imageZoomModal').classList.add('active');
    }

    // Utility Functions
    function showToast(message, type = 'success') {
      toast.querySelector('.toast-message').textContent = message;
      toast.className = `toast ${type}`;
      toast.classList.add('show');
      
      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }

    function formatDate(date) {
      if (!date) return 'N/A';
      
      return new Intl.DateTimeFormat('en-IN', {
        day: '2-digit',
        month: 'short',
        year: 'numeric'
      }).format(date);
    }

    function showAlert(title, message, confirmCallback = null) {
      document.getElementById('alertTitle').textContent = title;
      document.getElementById('alertMessage').textContent = message;
      document.getElementById('alertModal').classList.add('active');
      
      if (confirmCallback) {
        document.getElementById('alertConfirm').onclick = () => {
          confirmCallback();
          document.getElementById('alertModal').classList.remove('active');
        };
      } else {
        document.getElementById('alertConfirm').onclick = () => {
          document.getElementById('alertModal').classList.remove('active');
        };
      }
    }

    // Initialize the rotating hero messages
    function initHeroMessages() {
      const messages = document.querySelectorAll('#heroMessages span');
      let currentIndex = 0;
      
      setInterval(() => {
        messages.forEach(msg => msg.classList.remove('active'));
        currentIndex = (currentIndex + 1) % messages.length;
        messages[currentIndex].classList.add('active');
      }, 3000);
    }

    // Make functions globally available
    window.showPage = showPage;
    window.showProductDetail = showProductDetail;
    window.startCheckout = startCheckout;
    window.toggleWishlist = toggleWishlist;
    window.shareProduct = shareProduct;
    window.checkAuthAndShowPage = checkAuthAndShowPage;
    window.showMyOrders = showMyOrders;
    window.showOrderDetail = showOrderDetail;
    window.cancelOrder = cancelOrder;
    window.openImageZoom = openImageZoom;
    window.logout = logout;
    window.filterProductsByCategory = filterProductsByCategory;
    window.closeMenu = closeMenu;
  </script>
</body>
</html>