<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Buyzo Cart — Modern Shop</title>
  <meta name="description" content="Buyzo Cart — clean, mobile‑first shop template with product cards, step checkout, and policy modals."/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://images.unsplash.com"/>
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>
  <style>
    :root {
      --bg: #f8fafc;
      --card: #ffffff;
      --accent: #2563eb;
      --accent-hover: #1d4ed8;
      --muted: #64748b;
      --muted-light: #94a3b8;
      --success: #22c55e;
      --error: #ef4444;
      --shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      --shadow-hover: 0 6px 16px rgba(0, 0, 0, 0.08);
      --ring: #dbeafe;
      --ink: #0f172a;
      --ink-2: #334155;
      --border: #e2e8f0;
      --radius: 12px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg);
      color: var(--ink);
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    /* Header */
    header {
      background: var(--card);
      box-shadow: var(--shadow);
      padding: 16px 24px;
      position: sticky;
      top: 0;
      z-index: 50;
      border-bottom: 1px solid var(--border);
    }

    .header-inner {
      max-width: 1100px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      gap: 16px;
      justify-content: space-between;
    }

    .brand {
      font-weight: 800;
      color: var(--ink);
      font-size: 20px;
      white-space: nowrap;
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
    }

    .brand .chip {
      background: var(--accent);
      color: #fff;
      font-weight: 700;
      padding: 6px 10px;
      border-radius: 8px;
      font-size: 14px;
    }

    .search-wrap {
      flex: 1;
      display: flex;
      max-width: 500px;
      margin: 16px 0;
    }

    .search-wrap input {
      flex: 1;
      padding: 12px 16px;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      font-family: inherit;
      font-size: 14px;
      transition: all 0.2s ease;
    }

    .search-wrap input:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px var(--ring);
    }

    .cta {
      display: flex;
      gap: 10px;
      position: relative;
    }

    .btn {
      background: var(--accent);
      color: #fff;
      border: 0;
      padding: 10px 16px;
      border-radius: var(--radius);
      cursor: pointer;
      font-weight: 600;
      font-size: 14px;
      transition: all 0.2s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    .btn:hover {
      background: var(--accent-hover);
      transform: translateY(-1px);
    }

    .btn.secondary {
      background: #f1f5f9;
      color: var(--ink-2);
    }

    .btn.secondary:hover {
      background: #e2e8f0;
      transform: translateY(-1px);
    }

    .btn.error {
      background: var(--error);
    }

    .btn.error:hover {
      background: #dc2626;
    }

    .btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    /* Notification Badge */
    .notification-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background-color: var(--error);
      color: white;
      border-radius: 50%;
      width: 18px;
      height: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: bold;
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }

    /* Container */
    .container {
      max-width: 1100px;
      margin: 28px auto;
      padding: 0 20px;
      min-height: 70vh;
    }

    /* Hero */
    .hero {
      background: linear-gradient(135deg, #f0f9ff 0%, #ffffff 100%);
      border: 1px solid var(--border);
      box-shadow: var(--shadow);
      border-radius: var(--radius);
      padding: 24px;
      margin-bottom: 24px;
    }

    .hero h1 {
      margin: 0 0 8px 0;
      font-size: 24px;
      font-weight: 700;
    }

    .hero p {
      margin: 0;
      color: var(--muted);
      font-size: 16px;
    }

    /* Steps */
    .steps {
      display: flex;
      gap: 8px;
      justify-content: center;
      margin: 24px 0;
      flex-wrap: wrap;
    }

    .step-pill {
      background: #fff;
      padding: 10px 16px;
      border-radius: 999px;
      border: 1px solid var(--border);
      font-weight: 600;
      color: var(--ink-2);
      cursor: pointer;
      user-select: none;
      transition: all 0.2s ease;
      font-size: 14px;
    }

    .step-pill:hover {
      border-color: var(--accent);
    }

    .step-pill.disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .step-pill.disabled:hover {
      border-color: var(--border);
    }

    /* Grid - ALWAYS 2 columns */
    .grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
    }

    .card {
      background: var(--card);
      border-radius: var(--radius);
      overflow: hidden;
      box-shadow: var(--shadow);
      display: flex;
      flex-direction: column;
      border: 1px solid var(--border);
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-hover);
    }

    .img {
      height: 220px;
      background: #f1f5f9;
      background-position: center;
      background-size: cover;
    }

    .card-body {
      padding: 16px;
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .title {
      font-weight: 600;
      margin-bottom: 6px;
      font-size: 16px;
    }

    .price {
      font-weight: 700;
      color: var(--ink);
      margin-bottom: 8px;
      font-size: 18px;
    }

    .badge {
      font-size: 14px;
      color: var(--muted);
      margin-bottom: 12px;
    }

    /* Pages */
    .page {
      display: none;
    }

    .page.active {
      display: block;
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .card-panel {
      background: var(--card);
      border-radius: var(--radius);
      padding: 20px;
      box-shadow: var(--shadow);
      margin-bottom: 16px;
      border: 1px solid var(--border);
    }

    .card-panel h3 {
      margin-top: 0;
      margin-bottom: 12px;
      font-size: 18px;
      font-weight: 600;
    }

    label {
      display: block;
      font-size: 14px;
      color: var(--muted);
      margin-bottom: 6px;
      font-weight: 500;
    }

    input, select, textarea {
      width: 100%;
      padding: 12px;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      background: #fff;
      outline: none;
      font-family: inherit;
      font-size: 14px;
      transition: all 0.2s ease;
    }

    input:focus, select:focus, textarea:focus {
      box-shadow: 0 0 0 3px var(--ring);
      border-color: var(--accent);
    }

    .row {
      display: flex;
      gap: 16px;
    }

    .col {
      flex: 1;
    }

    .summary {
      background: #f8fafc;
      padding: 16px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
    }

    .center {
      text-align: center;
    }

    footer {
      margin-top: 48px;
      text-align: center;
      color: var(--muted);
      padding: 28px 0;
      border-top: 1px solid var(--border);
    }

    /* Thumbnails */
    .thumbs {
      display: flex;
      gap: 10px;
      margin-top: 12px;
      flex-wrap: wrap;
    }

    .thumb {
      width: 60px;
      height: 60px;
      border-radius: 8px;
      background-size: cover;
      background-position: center;
      border: 2px solid transparent;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .thumb:hover {
      transform: scale(1.05);
    }

    .thumb.selected {
      border-color: var(--accent);
    }

    .gallery-main {
      height: 340px;
      background-size: cover;
      background-position: center;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      position: relative;
      overflow: hidden;
    }

    .product-img-slider {
      height: 220px;
      background-size: cover;
      background-position: center;
      transition: background-image 0.3s ease;
      cursor: pointer;
    }

    /* Social Media Icons */
    .social-links {
      display: flex;
      justify-content: center;
      gap: 16px;
      margin-top: 20px;
    }

    .social-icon {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--accent);
      color: white;
      transition: all 0.3s ease;
    }

    .social-icon:hover {
      transform: translateY(-3px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
      background: var(--accent-hover);
    }

    .social-icon svg {
      width: 20px;
      height: 20px;
    }

    /* Product Detail Page */
    .product-detail-page {
      padding: 20px;
    }
    
    .product-detail-container {
      display: flex;
      gap: 30px;
      flex-wrap: wrap;
    }
    
    .product-detail-gallery {
      flex: 1;
      min-width: 300px;
      position: relative;
    }
    
    .product-detail-info {
      flex: 1;
      min-width: 300px;
    }
    
    .product-detail-main-image {
      width: 100%;
      height: 400px;
      background-size: cover;
      background-position: center;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      margin-bottom: 16px;
      position: relative;
      overflow: hidden;
    }
    
    .product-detail-thumbnails {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    
    .product-detail-thumbnail {
      width: 80px;
      height: 80px;
      border-radius: 8px;
      background-size: cover;
      background-position: center;
      border: 2px solid var(--border);
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .product-detail-thumbnail:hover,
    .product-detail-thumbnail.active {
      border-color: var(--accent);
      transform: scale(1.05);
    }
    
    .product-detail-title {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 8px;
    }
    
    .product-detail-price {
      font-size: 28px;
      font-weight: 700;
      color: var(--accent);
      margin-bottom: 12px;
    }
    
    .product-detail-desc {
      color: var(--muted);
      margin-bottom: 20px;
      font-size: 16px;
    }
    
    .product-detail-full-desc {
      margin-bottom: 24px;
      line-height: 1.6;
      color: var(--ink-2);
    }
    
    .product-detail-meta {
      background: #f8fafc;
      padding: 16px;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      margin-bottom: 24px;
    }
    
    .product-detail-meta h4 {
      margin: 0 0 12px 0;
      color: var(--accent);
      font-size: 16px;
    }
    
    .back-to-products {
      display: inline-flex;
      align-items: center;
      margin-bottom: 20px;
      color: var(--accent);
      font-weight: 600;
      cursor: pointer;
      padding: 8px 16px;
      border-radius: var(--radius);
      background: #f1f5f9;
      transition: all 0.2s ease;
    }
    
    .back-to-products:hover {
      background: #e2e8f0;
      color: var(--accent-hover);
    }

    /* Similar Products Section */
    .similar-products {
      margin-top: 40px;
      padding-top: 24px;
      border-top: 1px solid var(--border);
    }
    
    .similar-title {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 16px;
      color: var(--ink);
    }

    /* Carousel Controls for Product Detail */
    .detail-carousel-control {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.8);
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 18px;
      color: var(--ink);
      transition: all 0.2s ease;
      z-index: 10;
    }

    .detail-carousel-control:hover {
      background: rgba(255, 255, 255, 1);
    }

    .detail-carousel-control.prev {
      left: 10px;
    }

    .detail-carousel-control.next {
      right: 10px;
    }

    .detail-carousel-dots {
      position: absolute;
      bottom: 15px;
      left: 0;
      right: 0;
      display: flex;
      justify-content: center;
      gap: 8px;
      z-index: 10;
    }

    .detail-carousel-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.5);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .detail-carousel-dot.active {
      background: rgba(255, 255, 255, 1);
      transform: scale(1.2);
    }

    /* Policy Pages */
    .policy-page {
      padding: 20px;
      max-width: 800px;
      margin: 0 auto;
    }
    
    .policy-content {
      background: var(--card);
      border-radius: var(--radius);
      padding: 24px;
      box-shadow: var(--shadow);
      margin-bottom: 24px;
      border: 1px solid var(--border);
    }
    
    .policy-content h2 {
      margin-top: 0;
      color: var(--accent);
      border-bottom: 2px solid var(--border);
      padding-bottom: 12px;
      margin-bottom: 20px;
    }
    
    .policy-content h3 {
      margin: 24px 0 12px;
      color: var(--ink);
    }
    
    .policy-content p {
      margin-bottom: 16px;
      line-height: 1.6;
    }
    
    .policy-content ul, .policy-content ol {
      margin: 16px 0;
      padding-left: 24px;
    }
    
    .policy-content li {
      margin-bottom: 8px;
    }
    
    .back-button {
      display: inline-flex;
      align-items: center;
      margin-bottom: 20px;
      color: var(--accent);
      font-weight: 600;
      cursor: pointer;
    }
    
    .back-button:hover {
      color: var(--accent-hover);
    }

    /* Product Details Enhancement */
    .product-details {
      margin: 16px 0;
      padding: 16px;
      background: #f8fafc;
      border-radius: var(--radius);
      border: 1px solid var(--border);
    }
    
    .product-details h4 {
      margin: 0 0 12px 0;
      color: var(--accent);
      font-size: 16px;
    }
    
    .product-details p {
      margin: 0;
      color: var(--ink-2);
      line-height: 1.6;
    }

    /* Category Navigation */
    .categories {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin: 16px 0 24px;
      justify-content: center;
    }
    
    .category-pill {
      background: #fff;
      padding: 8px 16px;
      border-radius: 20px;
      border: 1px solid var(--border);
      font-weight: 500;
      color: var(--ink-2);
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 14px;
      white-space: nowrap;
    }
    
    .category-pill:hover, .category-pill.active {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
    }
    
    .category-pill.active {
      font-weight: 600;
    }

    /* Carousel Controls */
    .carousel-control {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.8);
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 18px;
      color: var(--ink);
      transition: all 0.2s ease;
      z-index: 10;
    }

    .carousel-control:hover {
      background: rgba(255, 255, 255, 1);
    }

    .carousel-control.prev {
      left: 10px;
    }

    .carousel-control.next {
      right: 10px;
    }

    .carousel-dots {
      position: absolute;
      bottom: 15px;
      left: 0;
      right: 0;
      display: flex;
      justify-content: center;
      gap: 8px;
      z-index: 10;
    }

    .carousel-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.5);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .carousel-dot.active {
      background: rgba(255, 255, 255, 1);
      transform: scale(1.2);
    }

    /* About Us Section */
    .about-us {
      margin-top: 40px;
      padding: 20px;
      background: #f8fafc;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      text-align: center;
    }

    .about-us h3 {
      margin-bottom: 12px;
      color: var(--accent);
    }

    .about-us p {
      color: var(--ink-2);
      max-width: 600px;
      margin: 0 auto;
    }

    /* My Orders Page */
    .orders-container {
      max-width: 800px;
      margin: 0 auto;
    }
    
    .order-card {
      background: var(--card);
      border-radius: var(--radius);
      padding: 20px;
      box-shadow: var(--shadow);
      margin-bottom: 20px;
      border: 1px solid var(--border);
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .order-card:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-hover);
    }
    
    .order-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
      padding-bottom: 12px;
      border-bottom: 1px solid var(--border);
    }
    
    .order-id {
      font-weight: 600;
      color: var(--accent);
    }
    
    .order-date {
      color: var(--muted);
      font-size: 14px;
    }
    
    .order-estimated {
      color: var(--success);
      font-size: 14px;
      font-weight: 500;
      margin-top: 4px;
    }
    
    .order-status {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
    }
    
    .status-confirmed {
      background: #dcfce7;
      color: #166534;
    }
    
    .status-shipped {
      background: #dbeafe;
      color: #1e40af;
    }
    
    .status-delivered {
      background: #dcfce7;
      color: #166534;
    }
    
    .status-cancelled {
      background: #fee2e2;
      color: #991b1b;
    }
    
    .order-details {
      display: flex;
      gap: 16px;
      margin-bottom: 16px;
    }
    
    .order-product-image {
      width: 80px;
      height: 80px;
      border-radius: 8px;
      background-size: cover;
      background-position: center;
      border: 1px solid var(--border);
    }
    
    .order-product-info {
      flex: 1;
    }
    
    .order-product-title {
      font-weight: 600;
      margin-bottom: 6px;
    }
    
    .order-product-price {
      color: var(--accent);
      font-weight: 700;
      margin-bottom: 6px;
    }
    
    .order-product-meta {
      color: var(--muted);
      font-size: 14px;
    }
    
    .order-actions {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
    }

    /* Order Detail Page */
    .order-detail-page {
      background: var(--card);
      border-radius: var(--radius);
      padding: 24px;
      box-shadow: var(--shadow);
      margin-bottom: 24px;
    }
    
    .order-detail-section {
      margin-bottom: 20px;
      padding-bottom: 20px;
      border-bottom: 1px solid var(--border);
    }
    
    .order-detail-section:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
    }
    
    .order-detail-label {
      font-weight: 600;
      color: var(--muted);
      margin-bottom: 6px;
      font-size: 14px;
    }
    
    .order-detail-value {
      font-size: 16px;
      color: var(--ink);
    }
    
    .order-detail-image {
      width: 120px;
      height: 120px;
      border-radius: 8px;
      background-size: cover;
      background-position: center;
      border: 1px solid var(--border);
      margin-right: 16px;
    }
    
    .order-detail-product {
      display: flex;
      align-items: center;
      margin-bottom: 16px;
    }
    
    .order-detail-product-info {
      flex: 1;
    }

    /* Horizontal Product Slider */
    .product-slider {
      margin: 30px 0;
      position: relative;
    }
    
    .slider-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }
    
    .slider-title {
      font-size: 20px;
      font-weight: 700;
    }
    
    .slider-controls {
      display: flex;
      gap: 8px;
    }
    
    .slider-btn {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: var(--card);
      border: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .slider-btn:hover {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
    }
    
    .slider-container {
      overflow-x: auto;
      scroll-behavior: smooth;
      scrollbar-width: none; /* Firefox */
      -ms-overflow-style: none; /* IE and Edge */
    }
    
    .slider-container::-webkit-scrollbar {
      display: none; /* Chrome, Safari and Opera */
    }
    
    .slider-track {
      display: flex;
      gap: 16px;
      padding: 4px;
    }
    
    .slider-item {
      flex: 0 0 auto;
      width: 200px;
      background: var(--card);
      border-radius: var(--radius);
      overflow: hidden;
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
      transition: all 0.3s ease;
      cursor: pointer;
    }
    
    .slider-item:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-hover);
    }
    
    .slider-item-img {
      height: 150px;
      background-size: cover;
      background-position: center;
    }
    
    .slider-item-body {
      padding: 12px;
    }
    
    .slider-item-title {
      font-weight: 600;
      font-size: 14px;
      margin-bottom: 6px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .slider-item-price {
      font-weight: 700;
      color: var(--accent);
      font-size: 16px;
    }

    /* Toast Notification */
    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: var(--card);
      color: var(--ink);
      padding: 16px 20px;
      border-radius: var(--radius);
      box-shadow: var(--shadow-hover);
      display: flex;
      align-items: center;
      gap: 10px;
      z-index: 1000;
      transform: translateY(100px);
      opacity: 0;
      transition: all 0.3s ease;
    }
    
    .toast.show {
      transform: translateY(0);
      opacity: 1;
    }
    
    .toast.success {
      border-left: 4px solid var(--success);
    }
    
    .toast.error {
      border-left: 4px solid var(--error);
    }
    
    .toast-icon {
      font-size: 20px;
    }
    
    .toast.success .toast-icon {
      color: var(--success);
    }
    
    .toast.error .toast-icon {
      color: var(--error);
    }

    /* Cancellation Modal */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 2000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    
    .modal-overlay.active {
      opacity: 1;
      visibility: visible;
    }
    
    .cancellation-modal {
      background: var(--card);
      border-radius: var(--radius);
      padding: 24px;
      box-shadow: var(--shadow-hover);
      max-width: 500px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
    }
    
    .cancellation-modal h3 {
      margin-top: 0;
      margin-bottom: 16px;
      color: var(--ink);
    }
    
    .cancellation-reason {
      margin-bottom: 12px;
      padding: 12px;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .cancellation-reason:hover {
      border-color: var(--accent);
      background: #f8fafc;
    }
    
    .cancellation-reason.selected {
      border-color: var(--accent);
      background: var(--ring);
    }
    
    .cancellation-reason input {
      margin-right: 8px;
      width: auto;
    }
    
    .cancellation-actions {
      display: flex;
      gap: 12px;
      margin-top: 20px;
      justify-content: flex-end;
    }

    /* Alert Modal - Updated with Cancel and Yes buttons */
    .alert-modal {
      background: var(--card);
      border-radius: var(--radius);
      padding: 24px;
      box-shadow: var(--shadow-hover);
      max-width: 500px;
      width: 90%;
      text-align: center;
    }
    
    .alert-modal h3 {
      margin-top: 0;
      margin-bottom: 16px;
      color: var(--ink);
    }
    
    .alert-modal p {
      margin-bottom: 20px;
      line-height: 1.6;
    }
    
    .alert-modal .alert-icon {
      font-size: 48px;
      color: var(--error);
      margin-bottom: 16px;
    }
    
    /* New styles for alert modal buttons */
    .alert-modal-buttons {
      display: flex;
      gap: 12px;
      justify-content: center;
      margin-top: 20px;
    }

    /* Quantity Input Controls */
    .quantity-control {
      display: flex;
      align-items: center;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      overflow: hidden;
      width: 100%;
    }
    
    .quantity-control button {
      background: #f1f5f9;
      border: none;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 16px;
      transition: all 0.2s ease;
    }
    
    .quantity-control button:hover {
      background: #e2e8f0;
    }
    
    .quantity-control input {
      flex: 1;
      text-align: center;
      border: none;
      border-left: 1px solid var(--border);
      border-right: 1px solid var(--border);
      border-radius: 0;
      padding: 10px;
      margin: 0;
    }

    /* Delivery Congratulations */
    .delivery-congrats {
      background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
      border: 1px solid #22c55e;
      border-radius: var(--radius);
      padding: 16px;
      margin-top: 16px;
      text-align: center;
      color: #166534;
      font-weight: 600;
    }
    
    .delivery-congrats-icon {
      font-size: 24px;
      margin-bottom: 8px;
    }

    /* Refund Request Section */
    .refund-section {
      background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
      border: 1px solid #f59e0b;
      border-radius: var(--radius);
      padding: 16px;
      margin-top: 16px;
    }
    
    .refund-title {
      font-size: 16px;
      font-weight: 600;
      color: #92400e;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .refund-note {
      color: #92400e;
      font-size: 14px;
      margin-bottom: 12px;
    }
    
    .refund-time-left {
      background: #fef3c7;
      border: 1px solid #f59e0b;
      border-radius: 20px;
      padding: 6px 12px;
      font-size: 12px;
      font-weight: 600;
      color: #92400e;
      display: inline-block;
      margin-bottom: 12px;
    }

    /* Mobile Menu Icon */
    .menu-icon {
      display: none;
      flex-direction: column;
      justify-content: space-between;
      width: 24px;
      height: 18px;
      cursor: pointer;
    }
    
    .menu-icon span {
      height: 2px;
      width: 100%;
      background-color: var(--ink);
      border-radius: 2px;
      transition: all 0.3s ease;
    }
    
    /* Mobile Menu */
    .mobile-menu {
      position: fixed;
      top: 0;
      left: -280px;
      width: 280px;
      height: 100vh;
      background: var(--card);
      box-shadow: var(--shadow-hover);
      z-index: 1000;
      transition: left 0.3s ease;
      overflow-y: auto;
    }
    
    .mobile-menu.active {
      left: 0;
    }
    
    .menu-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px 20px;
      border-bottom: 1px solid var(--border);
    }
    
    .menu-close {
      font-size: 24px;
      cursor: pointer;
      color: var(--muted);
    }
    
    .menu-items {
      padding: 16px 0;
    }
    
    .menu-item {
      display: flex;
      align-items: center;
      padding: 12px 20px;
      color: var(--ink);
      transition: all 0.2s ease;
      cursor: pointer;
    }
    
    .menu-item:hover {
      background: #f1f5f9;
      color: var(--accent);
    }
    
    .menu-item svg {
      margin-right: 12px;
      width: 18px;
      height: 18px;
    }
    
    .menu-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: 999;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    
    .menu-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    /* Product Slider Enhancements */
    .product-slider-container {
      position: relative;
      margin: 20px 0;
    }
    
    .product-slider-wrapper {
      overflow: hidden;
      position: relative;
      border-radius: var(--radius);
    }
    
    .product-slider-track {
      display: flex;
      transition: transform 0.3s ease;
    }
    
    .product-slide {
      flex: 0 0 auto;
      width: 100%;
      height: 400px;
      background-size: cover;
      background-position: center;
    }
    
    .product-slider-nav {
      position: absolute;
      bottom: 20px;
      left: 0;
      right: 0;
      display: flex;
      justify-content: center;
      gap: 8px;
      z-index: 10;
    }
    
    .product-slider-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.5);
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .product-slider-dot.active {
      background: rgba(255, 255, 255, 1);
      transform: scale(1.2);
    }
    
    .product-slider-arrow {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.8);
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 18px;
      color: var(--ink);
      transition: all 0.2s ease;
      z-index: 10;
    }
    
    .product-slider-arrow:hover {
      background: rgba(255, 255, 255, 1);
    }
    
    .product-slider-arrow.prev {
      left: 10px;
    }
    
    .product-slider-arrow.next {
      right: 10px;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .header-inner {
        flex-wrap: wrap;
      }
      
      .search-wrap {
        margin-left: 0;
        order: 3;
        width: 100%;
        max-width: 100%;
      }
      
      .row {
        flex-direction: column;
      }
      
      /* Keep 2 columns on mobile */
      .grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
      }
      
      .steps {
        gap: 6px;
      }
      
      .step-pill {
        font-size: 12px;
        padding: 8px 12px;
      }
      
      .policy-content {
        padding: 16px;
      }
      
      .categories {
        overflow-x: auto;
        padding-bottom: 8px;
        justify-content: flex-start;
      }

      .carousel-control {
        width: 32px;
        height: 32px;
        font-size: 14px;
      }
      
      .product-detail-container {
        flex-direction: column;
      }
      
      .product-detail-main-image {
        height: 300px;
      }
      
      .order-details {
        flex-direction: column;
      }
      
      .order-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
      }
      
      .order-actions {
        justify-content: flex-start;
      }
      
      .cancellation-modal {
        padding: 16px;
      }
      
      .cancellation-actions {
        flex-direction: column;
      }
      
      .alert-modal {
        padding: 16px;
      }
      
      .alert-modal-buttons {
        flex-direction: column;
      }
      
      .quantity-control button {
        width: 36px;
        height: 36px;
      }
      
      /* Show menu icon on mobile */
      .menu-icon {
        display: flex;
      }
      
      /* Hide some CTA buttons on mobile to make space */
      .cta .btn:not(:last-child) {
        display: none;
      }
    }

    @media (max-width: 480px) {
      .container {
        padding: 0 16px;
      }
      
      .hero {
        padding: 20px;
      }
      
      .card-panel {
        padding: 16px;
      }
      
      .product-detail-main-image {
        height: 250px;
      }
      
      .product-detail-thumbnail {
        width: 60px;
        height: 60px;
      }
      
      /* Adjust grid for very small screens */
      .grid {
        grid-template-columns: 1fr;
        gap: 12px;
      }
    }

    /* Copyright Section */
    .copyright {
      text-align: center;
      padding: 20px;
      background-color: var(--card);
      color: var(--muted);
      font-size: 14px;
      border-top: 1px solid var(--border);
    }
  
/* === Clean Animated Banners CSS === */
.hero-messages {
  margin-top: 10px;
  font-size: 16px;
  color: var(--muted);
  font-weight: 600;
  display: flex;
  justify-content: center;
  gap: 24px;
  overflow: hidden;
  position: relative;
}
.hero-messages span {
  opacity: 0;
  position: absolute;
  transition: opacity 0.6s ease;
}
.hero-messages span.active {
  opacity: 1;
  position: relative;
}

.highlight-strip {
  margin-top: 16px;
  padding: 10px 16px;
  border-radius: 8px;
  background: linear-gradient(90deg,#2563eb,#1d4ed8);
  color: white;
  font-weight: 600;
  text-align: center;
  animation: pulseStrip 4s infinite;
  cursor: pointer;
}
@keyframes pulseStrip {
  0%,100% { box-shadow: 0 0 0 rgba(37,99,235,0); }
  50% { box-shadow: 0 0 16px rgba(37,99,235,0.35); }
}

/* Search Results Grid */
#homeSearchResults {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 16px;
  margin-top: 20px;
}

/* Trending Now Section */
.trending-section {
  margin: 30px 0;
}

.trending-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
}

.trending-title {
  font-size: 20px;
  font-weight: 700;
}


#productGrid, #homeSearchResults {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 16px;
}

</style>

<style>
/* Highlighted product on products page */
.product-highlight {
  border: 2px solid #f97316 !important;
  box-shadow: 0 8px 24px rgba(249,115,22,0.12) !important;
  transform: translateY(-6px) !important;
}
</style>

</head>
<body>
  <!-- Mobile Menu Overlay -->
  <div class="menu-overlay" id="menuOverlay"></div>
  
  <!-- Mobile Menu - Updated with individual policy links and wishlist -->
  <div class="mobile-menu" id="mobileMenu">
    <div class="menu-header">
      <div class="brand">
        <span class="chip">BUYZO</span>
        <span>Cart</span>
      </div>
      <div class="menu-close" id="menuClose">×</div>
    </div>
    <div class="menu-items">
      <div class="menu-item" onclick="showPage('homePage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
          <polyline points="9 22 9 12 15 12 15 22"></polyline>
        </svg>
        Home
      </div>
      <div class="menu-item" onclick="showPage('productsPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="3" y="3" width="7" height="7"></rect>
          <rect x="14" y="3" width="7" height="7"></rect>
          <rect x="14" y="14" width="7" height="7"></rect>
          <rect x="3" y="14" width="7" height="7"></rect>
        </svg>
        Products
      </div>
      <div class="menu-item" onclick="showMyOrders(); showPage('myOrdersPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="9" cy="21" r="1"></circle>
          <circle cx="20" cy="21" r="1"></circle>
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
        </svg>
        My Orders
      </div>
      <div class="menu-item" onclick="showPage('wishlistPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
        </svg>
        Wishlist
      </div>
      <div class="menu-item" onclick="showPage('cancellationPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="15" y1="9" x2="9" y2="15"></line>
          <line x1="9" y1="9" x2="15" y2="15"></line>
        </svg>
        Refund & Cancellation
      </div>
      <div class="menu-item" onclick="showPage('termsPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
          <polyline points="10 9 9 9 8 9"></polyline>
        </svg>
        Terms & Conditions
      </div>
      <div class="menu-item" onclick="showPage('shippingPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 15a5 5 0 0 1 5-5h8a5 5 0 0 1 5 5v0a5 5 0 0 1-5 5H8a5 5 0 0 1-5-5v0z"></path>
          <path d="M3 15V9a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v6"></path>
          <path d="M9 19h6"></path>
        </svg>
        Shipping Policy
      </div>
      <div class="menu-item" onclick="showPage('privacyPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
        </svg>
        Privacy Policy
      </div>
      <div class="menu-item" onclick="showPage('contactPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
          <polyline points="22,6 12,13 2,6"></polyline>
        </svg>
        Contact Us
      </div>
    </div>
  </div>

  <header>
    <div class="header-inner">
      <div class="menu-icon" id="menuIcon">
        <span></span>
        <span></span>
        <span></span>
      </div>
      <div class="brand" aria-label="Buyzo Cart brand" onclick="showPage('homePage')">
        <span class="chip">BUYZO</span>
        <span>Cart</span>
      </div>
      <div class="cta">
        <button class="btn secondary" id="openContactTop" title="Contact">Contact</button>
        <button class="btn secondary" id="openMyOrdersTop" title="My Orders">My Orders
          <span id="ordersNotification" class="notification-badge" style="display:none"></span>
        </button>
        <button class="btn secondary" id="openWishlistTop" title="Wishlist">Wishlist
          <span id="wishlistNotification" class="notification-badge" style="display:none"></span>
        </button>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- Home Page -->
    <section class="page active" id="homePage">
      
      <section class="hero">
        <h1>Welcome to <span style="color:var(--accent)">Buyzo Cart</span></h1>
        <p>Clean, fast checkout. Hand‑picked products. Fully responsive UI.</p>

        <!-- Rotating subtle messages -->
        <div class="hero-messages" id="heroMessages">
          <span class="active">🔥 Big Sale Today</span>
          <span>🚚 Free Shipping over ₹999</span>
          <span>✨ New Arrivals Just Dropped</span>
        </div>

        <!-- Highlight CTA strip -->
        <div class="highlight-strip" onclick="showPage('productsPage')">
          Limited Time Offer: Flat 40% OFF on all Fashion Items — <u>Shop Now →</u>
        </div>
      </section>

      <!-- TRENDING NOW SECTION (moved to top) -->
      <div class="trending-section">
        <div class="trending-header">
          <h2 class="trending-title">Trending Now</h2>
        </div>
        <div class="slider-container">
          <div class="slider-track" id="productSlider"></div>
        </div>
      </div>

      <!-- SEARCH BAR (added below Trending Now) -->
      <div class="search-wrap">
        <input id="homeSearchInput" placeholder="Search products (e.g. 'Sneakers', 'T-shirt', 'Earbuds')" />
      </div>

      <!-- Search Results Grid -->
      <div id="homeSearchResults" style="display:none;"></div>

      <div class="steps center">
        <div class="step-pill" id="pill-products">1 • Products</div>
        <div class="step-pill disabled" id="pill-order">2 • Order Details</div>
        <div class="step-pill disabled" id="pill-user">3 • Your Info</div>
        <div class="step-pill disabled" id="pill-pay">4 • Payment</div>
      </div>

      <div class="card-panel" style="display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap">
        <h2 style="margin:0">Featured Products</h2>
      </div>

      <!-- Featured Products Grid -->
      <div class="grid" id="homeProductGrid">
        <!-- Product cards will be loaded here -->
      </div>
    </section>

    <!-- Products Page -->
    <section class="page" id="productsPage">
      <div class="card-panel" style="display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap">
        <h2 style="margin:0">All Products</h2>
      </div>

      <!-- Search bar -->
      <div class="search-wrap">
        <input id="searchInput" placeholder="Search products (e.g. 'Sneakers', 'T-shirt', 'Earbuds')" />
      </div>

      <!-- Category Navigation -->
      <div class="categories" id="categoriesContainer">
        <!-- Categories will be loaded from Firebase by admin -->
      </div>

      <div class="grid" id="productGrid">
        <!-- Product cards will be loaded here -->
      </div>
    </section>

    <!-- Product Detail Page -->
    <section class="page" id="productDetailPage">
      <div class="product-detail-page">
        <div class="back-to-products" onclick="showPage('productsPage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Products
        </div>
        
        <div class="product-detail-container">
          <div class="product-detail-gallery">
            <div class="product-detail-main-image" id="detailMainImage">
              <button class="detail-carousel-control prev">&#10094;</button>
              <button class="detail-carousel-control next">&#10095;</button>
              <div class="detail-carousel-dots" id="detailCarouselDots"></div>
            </div>
            <div class="product-detail-thumbnails" id="detailThumbnails"></div>
          </div>
          
          <div class="product-detail-info">
            <h1 class="product-detail-title" id="detailTitle"></h1>
            <div class="product-detail-price" id="detailPrice"></div>
            <div class="product-detail-desc" id="detailDesc"></div>
            <div class="product-detail-full-desc" id="detailFullDesc"></div>
            
            <div class="product-detail-meta">
              <h4>Product Details</h4>
              <div id="detailMeta"></div>
            </div>
            
            <div style="display:flex;gap:12px;flex-wrap:wrap;">
              <button class="btn" id="detailOrderBtn">Order Now</button>
              <button class="btn secondary" id="detailWishlistBtn">Add to Wishlist</button>
              <button class="btn secondary" onclick="showPage('productsPage')">Continue Shopping</button>
            </div>
          </div>
        </div>

        <!-- Similar Products Section -->
        <div class="similar-products">
          <h2 class="similar-title">Similar Products</h2>
          <div class="slider-container">
            <div class="slider-track" id="similarProductsSlider"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Order Details Page -->
    <section class="page" id="orderPage">
      <div class="card-panel">
        <h3 style="margin-top:0">Order Details</h3>
        <p style="color:var(--muted)">Choose size/quantity and confirm product before entering contact or payment details.</p>

        <div id="selectedProductCard" class="card" style="margin-bottom:16px">
          <div style="display:flex;gap:16px;flex-direction:column">
            <div id="galleryMain" class="gallery-main">
              <button class="carousel-control prev">&#10094;</button>
              <button class="carousel-control next">&#10095;</button>
              <div class="carousel-dots"></div>
            </div>
          </div>
          <div class="card-body">
            <div class="title" id="spTitle"></div>
            <div class="price" id="spPrice"></div>
            <div class="badge" id="spDesc"></div>
            
            <!-- Product Details Section -->
            <div class="product-details">
              <h4>Product Details</h4>
              <p id="spFullDesc"></p>
            </div>

            <div style="margin-top:auto">
              <label>Size</label>
              <select id="sizeSelect"><option value="">Select size</option></select>

            <div style="height:12px"></div>
              <label>Quantity</label>
              <!-- Replaced with plus/minus quantity control -->
              <div class="quantity-control">
                <button class="qty-minus">-</button>
                <input type="number" id="qtySelect" min="1" value="1" readonly>
                <button class="qty-plus">+</button>
              </div>

              <div style="height:16px"></div>
              <div style="display:flex;gap:10px;flex-wrap:wrap">
                <button id="toUserInfo" class="btn" style="flex:1">Continue → Provide Your Info</button>
                <button id="backToProducts" class="btn secondary" style="flex:1">Back to Products</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- User Info Page -->
    <section class="page" id="userPage">
      <div class="card-panel">
        <h3 style="margin-top:0">Your Contact & Delivery Address</h3>
        <p style="color:var(--muted)">We do not use saved addresses. Please provide a fresh delivery address for this order.</p>

        <div style="display:flex;gap:16px;flex-direction:column">
          <div>
            <label>Full Name *</label>
            <input id="fullname" placeholder="Enter full name" />
          </div>
          <div class="row">
            <div class="col"><label>Mobile Number *</label><input id="mobile" placeholder="10-digit mobile number" /></div>
            <div class="col"><label>Pincode *</label><input id="pincode" placeholder="Pincode" /></div>
          </div>
          <div class="row">
            <div class="col"><label>City *</label><input id="city" /></div>
            <div class="col"><label>State *</label><input id="state" /></div>
          </div>
          <div>
            <label>House / Street *</label>
            <input id="house" />
          </div>
          <div style="display:flex;gap:10px;margin-top:16px;flex-wrap:wrap">
            <button id="toPayment" class="btn" style="flex:1">Continue to Payment</button>
            <button id="editOrder" class="btn secondary" style="flex:1">Edit Order Details</button>
            <button id="saveUserInfo" class="btn secondary" style="flex:1">Save Information</button>
          </div>
          <div style="margin-top:16px;color:var(--muted);font-size:14px">
            <strong>Note:</strong> If you prefer to change products, click "Edit Order Details" or use "Products" to go back.
          </div>
        </div>
      </div>
    </section>

    <!-- Payment Page -->
    <section class="page" id="paymentPage">
      <div class="card-panel">
        <h3 style="margin-top:0">Payment Method</h3>
        <div style="display:flex;gap:12px;flex-wrap:wrap;margin-bottom:16px">
          <label style="flex:1;display:flex;align-items:center;gap:8px;padding:12px;border:1px solid var(--border);border-radius:var(--radius);cursor:pointer;">
            <input type="radio" name="pay" value="prepaid" checked /> Prepaid (UPI / Card)
          </label>
          <label style="flex:1;display:flex;align-items:center;gap:8px;padding:12px;border:1px solid var(--border);border-radius:var(--radius);cursor:pointer;">
            <input type="radio" name="pay" value="cod" /> Cash on Delivery (Note: may increase processing time)
          </label>
        </div>
        
        <div class="summary">
          <div style="display:flex;justify-content:space-between;margin-bottom:8px"><div>Product</div><div id="sumProduct">-</div></div>
          <div style="display:flex;justify-content:space-between;margin-bottom:8px"><div>Qty</div><div id="sumQty">-</div></div>
          <div style="display:flex;justify-content:space-between;margin-bottom:8px"><div>Price</div><div id="sumPrice">-</div></div>
          <div style="display:flex;justify-content:space-between;margin-bottom:12px;padding-bottom:8px;border-bottom:1px dashed var(--border)"><div>Delivery</div><div id="sumDel">₹50</div></div>
          <div style="display:flex;justify-content:space-between;font-weight:700;margin-top:8px;font-size:18px"><div>Total</div><div id="sumTotal">-</div></div>
        </div>
        
        <div style="height:16px"></div>
        <div style="display:flex;gap:12px;flex-wrap:wrap">
          <button id="confirmOrder" class="btn" style="flex:1">Confirm & Place Order</button>
          <button id="payBack" class="btn secondary" style="flex:1">Back</button>
        </div>
      </div>
    </section>

    <!-- Order Success (hidden) -->
    <section class="page center" id="successPage">
      <div class="card-panel" style="max-width:520px;margin:32px auto;padding:32px">
        <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="var(--success)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin:0 auto 16px">
          <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
          <polyline points="22 4 12 14.01 9 11.01"></polyline>
        </svg>
        <div style="font-size:24px;font-weight:700;color:var(--success);margin-bottom:8px">Thank You for Your Order!</div>
        <div style="margin-top:10px;color:var(--muted)">Your order has been placed successfully! We will confirm and process your order. Tracking will be shared once supplier ships it.</div>
        <div style="margin-top:24px;display:flex;gap:12px;justify-content:center;flex-wrap:wrap">
          <button id="goHome" class="btn">Back to Home</button>
          <button id="viewOrders" class="btn secondary">View My Orders</button>
        </div>
      </div>
    </section>

    <!-- My Orders Page -->
    <section class="page" id="myOrdersPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        
        <div class="orders-container">
          <h2>My Orders</h2>
          <p style="color:var(--muted);margin-bottom:24px">View and manage your recent orders</p>
          
          <div id="ordersList">
            <!-- Orders will be dynamically inserted here -->
          </div>
          
          <div id="noOrders" class="card-panel center" style="display:none">
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--muted-light)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="9" cy="21" r="1"></circle>
              <circle cx="20" cy="21" r="1"></circle>
              <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
            </svg>
            <h3 style="margin:16px 0 8px;color:var(--muted)">No orders yet</h3>
            <p style="color:var(--muted-light)">You haven't placed any orders yet. Start shopping to see your orders here.</p>
            <button class="btn" style="margin-top:16px" onclick="showPage('productsPage')">Start Shopping</button>
            </div>
        </div>
      </div>
    </section>

    <!-- Order Detail Page -->
    <section class="page" id="orderDetailPage">
      <div class="policy-page">
        <div class="back-button" onclick="showMyOrders(); showPage('myOrdersPage');">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to My Orders
        </div>
        
        <div class="orders-container">
          <h2>Order Details</h2>
          
          <div class="order-detail-page" id="orderDetailContent">
            <!-- Order details will be dynamically inserted here -->
          </div>
        </div>
      </div>
    </section>

    <!-- Wishlist Page -->
    <section class="page" id="wishlistPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        
        <div class="orders-container">
          <h2>My Wishlist</h2>
          <p style="color:var(--muted);margin-bottom:24px">Your favorite products</p>
          
          <div id="wishlistGrid" class="grid">
            <!-- Wishlist items will be dynamically inserted here -->
          </div>
          
          <div id="noWishlist" class="card-panel center" style="display:none">
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--muted-light)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
            <h3 style="margin:16px 0 8px;color:var(--muted)">Your wishlist is empty</h3>
            <p style="color:var(--muted-light)">Start adding products to your wishlist to see them here.</p>
            <button class="btn" style="margin-top:16px" onclick="showPage('productsPage')">Start Shopping</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Policy Pages -->
    <section class="page" id="contactPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        <div class="policy-content">
          <h2>Contact Us</h2>
          <p>We're here to help with any questions or concerns about your order or our products.</p>
          
          <h3>Our Address</h3>
          <p>Jwalapur, Haridwar, Uttarakhand - 249401<br>India</p>
          
          <h3>Customer Support Hours</h3>
          <p>Monday to Saturday: 10:00 AM to 7:00 PM IST<br>
          Sunday: Closed</p>
          
          <h3>Email</h3>
          <p>For order-related queries: <a href="mailto:buyzocartshop@gmail.com">buyzocartshop@gmail.com</a></p>

          <h3>Telegram Support</h3>
          <p>For quick assistance: <a href="https://t.me/Buyzocartsupport" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M9.999 15.17 9.95 20c.64 0 .92-.27 1.26-.59l3.02-2.88 6.25 4.55c1.15.63 1.97.3 2.26-1.06L23.95 3.47c.37-1.48-.54-2.06-1.65-1.7L1.62 9.63c-1.45.57-1.43 1.36-.25 1.72l5.91 1.84 13.69-8.65c.65-.4 1.25-.18.76.25"/></svg></a></p>
          
          <h3>Response Time</h3>
          <p>We strive to respond to all emails within <strong>24 business hours</strong>.</p>
          
          <h3>Order Issues</h3>
          <p>When contacting us about an order, please include your order ID for faster resolution.</p>
        </div>
      </div>
    </section>

    <section class="page" id="cancellationPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin" round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        <div class="policy-content">
          <h2>Refund & Cancellation Policy</h2>
          <p>At Buyzo, we value our customers and aim to provide a smooth shopping experience.</p>

          <h3>Order Cancellation</h3>
          <p>Orders can be cancelled within <strong>24 hours</strong> of placing them. Once the order is processed/shipped, cancellation requests will not be accepted.</p>

          <h3>Refunds</h3>
          <p>If you cancel your order within the allowed time, the amount will be refunded to your original payment method within <strong>5–7 working days</strong>.</p>

          <h3>Payment Gateway Charges</h3>
          <p>Please note that payment gateway charges (approx <strong>2–3% of the order value</strong>) are non-refundable. For example, if you placed an order of ₹100 and cancelled it, the refund amount will be ₹97–₹98. This deduction is due to Razorpay's non-refundable transaction fee.</p>

          <h3>Contact Us</h3>
  <p>
          For refund or cancellation requests, please contact us at:<br>
          Email: <strong>buyzocartshop@gmail.com</strong><br>
          Telegram: <a href="https://t.me/Buyzocartsupport" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M9.999 15.17 9.95 20c.64 0 .92-.27 1.26-.59l3.02-2.88 6.25 4.55c1.15.63 1.97.3 2.26-1.06L23.95 3.47c.37-1.48-.54-2.06-1.65-1.7L1.62 9.63c-1.45.57-1.43 1.36-.25 1.72l5.91 1.84 13.69-8.65c.65-.4 1.25-.18.76.25"/></svg></a>
          </p>
        </div>
      </div>
    </section>

    <section class="page" id="termsPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        <div class="policy-content">
          <h2>Terms & Conditions</h2>
          <p>Welcome to <strong>Buyzo Cart</strong>. By placing an order on our website, you agree to the terms below.</p>
          
          <h3>1. Service Model</h3>
          <p>We operate a <strong>dropshipping</strong> model. Products are sourced from third‑party suppliers and shipped directly to you. Images shown are for representation and minor variations may occur.</p>
          
          <h3>2. Orders & Pricing</h3>
          <p>All prices are in INR and inclusive of applicable taxes unless stated. An order is confirmed only after successful payment authorization. We reserve the right to cancel and refund any order due to stock, pricing, or verification issues.</p>
          
          <h3>3. Delivery</h3>
          <p>Estimated delivery time is displayed at checkout. Delays may occur due to courier logistics or festivals. We are not liable for delays once the order is handed over to the courier.</p>
          
          <h3>4. Customer Responsibilities</h3>
          <p>Please provide accurate contact details and delivery address. Incorrect information may cause delays or non‑delivery.</p>
          
          <h3>5. Prohibited Use</h3>
          <p>Do not misuse the website, attempt unauthorized access, or submit fraudulent orders.</p>
          
          <h3>6. Liability</h3>
          <p>To the maximum extent permitted by law, our liability is limited to the order value paid by you.</p>
          
          <h3>7. Contact</h3>
          <p>For any support, email us at <a href="mailto:buyzocartshop@gmail.com">buyzocartshop@gmail.com</a></p>
        </div>
      </div>
    </section>

    <section class="page" id="shippingPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height:20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        <div class="policy-content">
          <h2>Shipping Policy</h2>
          
          <h3>1. Processing Time</h3>
          <p>Orders are processed within <strong>1-2 business days</strong> after payment confirmation. Business days are Monday to Saturday, excluding public holidays.</p>
          
          <h3>2. Shipping Timeline</h3>
          <p>Delivery usually takes 5–10 working days depending on location.</p>
          
          <h3>3. Shipping Methods</h3>
          <ul>
            <li><strong>Standard Shipping</strong>: 5-7 business days (₹50)</li>
            <li><strong>Express Shipping</strong>: 2-4 business days (₹150)</li>
          </ul>
          
          <h3>4. Shipping Areas</h3>
          <p>We currently ship to all major cities and towns across India. For remote locations, additional delivery time may be required.</p>
          
          <h3>5. Order Tracking</h3>
          <p>Once your order is shipped, you will receive a confirmation email with tracking information. You can track your order using the provided tracking number.</p>
          
          <h3>6. Undeliverable Orders</h3>
          <p>If a delivery attempt fails due to incorrect address or recipient unavailable, the package will be returned to us. Additional shipping charges will apply for redelivery.</p>
          
          <h3>7. International Shipping</h3>
          <p>Currently, we only ship within India. International shipping is not available.</p>
        </div>
      </div>
    </section>

    <section class="page" id="privacyPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        <div class="policy-content">
          <h2>Privacy Policy</h2>
          <p>At Buyzo Cart, we are committed to protecting your privacy and ensuring the security of your personal information.</p>
          
          <h3>1. Information We Collect</h3>
          <p>We collect information that you provide directly to us, including:</p>
          <ul>
            <li>Name, email address, phone number, and shipping address</li>
            <li>Payment information (processed securely by our payment partners)</li>
            <li>Order history and preferences</li>
          </ul>
          
          <h3>2. How We Use Your Information</h3>
          <p>We use your information to:</p>
          <ul>
            <li>Process and fulfill your orders</li>
            <li>Communicate with you about orders, products, and promotions</li>
            <li>Improve our website and customer experience</li>
            <li>Prevent fraud and enhance security</li>
          </ul>
          
          <h3>3. Information Sharing</h3>
          <p>We do not sell your personal information to third parties. We may share your information with:</p>
          <ul>
            <li>Shipping partners to deliver your orders</li>
            <li>Payment processors to complete transactions</li>
            <li>Service providers who assist our operations</li>
          </ul>
          
          <h3>4. Data Security</h3>
          <p>We implement appropriate security measures to protect your personal information against unauthorized access, alteration, or destruction.</p>
          
          <h3>5. Your Rights</h3>
          <p>You have the right to access, correct, or delete your personal information. You can also opt-out of marketing communications at any time.</p>
          
          <h3>6. Cookies</h3>
          <p>Our website uses cookies to enhance your shopping experience and analyze site traffic. You can adjust your browser settings to refuse cookies.</p>
          
          <h3>7. Policy Updates</h3>
          <p>We may update this policy periodically. The updated version will be posted on our website with the effective date.</p>
          
          <h3>8. Contact Us</h3>
          <p>For privacy-related questions, contact us at <a href="mailto:buyzocartshop@gmail.com">buyzocartshop@gmail.com</a></p>
        </div>
      </div>
    </section>

    <footer>
      <div style="max-width:900px;margin:0 auto;color:var(--muted)">
        <div style="font-weight:700;color:var(--accent);font-size:18px">Buyzo Cart</div>
        
        <!-- About Us Section -->
        <div class="about-us">
          <h3>About Us</h3>
          <p>Buyzo is a dropshipping platform from Haridwar, Uttarakhand. We provide affordable and trendy clothing directly to your doorstep.</p>
        </div>
        
        <div style="font-size:14px;margin-top:16px">We perform dropshipping using third‑party suppliers. This site does not impersonate any marketplace.</div>
        
        <!-- Social Media Links - Updated with official icons -->
        <div class="social-links">
          <a href="https://www.instagram.com/buyzo.cart?igsh=MW5lMmpqcnYwOXduaA==" target="_blank" class="social-icon" title="Instagram"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M7.75 2h8.5A5.75 5.75 0 0 1 22 7.75v8.5A5.75 5.75 0 0 1 16.25 22h-8.5A5.75 5.75 0 0 1 2 16.25v-8.5A5.75 5.75 0 0 1 7.75 2ZM12 7a5 5 0 1 0 0 10 5 5 0 0 0 0-10Zm0 1.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 0 1 0-7Zm5.25-.75a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5Z"/></svg></a>
          <a href="https://www.facebook.com/share/1ErTUZySbt/" target="_blank" class="social-icon" title="Facebook"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M22 12a10 10 0 1 0-11.5 9.9v-7h-2v-3h2v-2.3c0-2 1.2-3.2 3-3.2.9 0 1.8.1 1.8.1v2h-1c-1 0-1.3.6-1.3 1.2V12h2.6l-.4 3h-2.2v7A10 10 0 0 0 22 12"/></svg></a>
          <a href="https://t.me/buyzocartshop" target="_blank" class="social-icon" title="Telegram"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M9.999 15.17 9.95 20c.64 0 .92-.27 1.26-.59l3.02-2.88 6.25 4.55c1.15.63 1.97.3 2.26-1.06L23.95 3.47c.37-1.48-.54-2.06-1.65-1.7L1.62 9.63c-1.45.57-1.43 1.36-.25 1.72l5.91 1.84 13.69-8.65c.65-.4 1.25-.18.76.25"/></svg></a>
          
<a href="https://www.youtube.com/@BuyzoCard" target="_blank" class="social-icon" title="YouTube">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
    <path d="M23.5 6.2a2.9 2.9 0 0 0-2-2C19.6 3.5 12 3.5 12 3.5s-7.6 0-9.5.7a2.9 2.9 0 0 0-2 2A30 30 0 0 0 0 12a30 30 0 0 0 .5 5.8 2.9 2.9 0 0 0 2 2c1.9.7 9.5.7 9.5.7s7.6 0 9.5-.7a2.9 2.9 0 0 0 2-2A30 30 0 0 0 24 12a30 30 0 0 0-.5-5.8zM10 15.5V8.5l6 3.5-6 3.5z"/>
  </svg>
</a>

        </div>
        
        <div style="margin-top:16px;font-size:14px">
          <a href="#" onclick="showPage('contactPage'); return false;">Contact Us</a> •
          <a href="#" onclick="showPage('cancellationPage'); return false;">Refund & Cancellation Policy</a> •
          <a href="#" onclick="showPage('termsPage'); return false;">Terms & Conditions</a> •
          <a href="#" onclick="showPage('shippingPage'); return false;">Shipping Policy</a> •
          <a href="#" onclick="showPage('privacyPage'); return false;">Privacy Policy</a>
        </div>
      </div>
    </footer>
  </main>

  <!-- Copyright Section -->
  <div class="copyright">
    © 2023 Buyzo Cart. All rights reserved.
  </div>

  <!-- Toast Notification -->
  <div id="toast" class="toast">
    <div class="toast-icon">✓</div>
    <div id="toast-message"></div>
  </div>

  <!-- Cancellation Modal -->
  <div class="modal-overlay" id="cancellationModal">
    <div class="cancellation-modal">
      <h3>Select Reason for Cancellation</h3>
      <div id="cancellationReasons">
        <label class="cancellation-reason">
          <input type="radio" name="cancelReason" value="Changed my mind"> Changed my mind
        </label>
        <label class="cancellation-reason">
          <input type="radio" name="cancelReason" value="Product not required anymore"> Product not required anymore
        </label>
        <label class="cancellation-reason">
          <input type="radio" name="cancelReason" value="Found a better price elsewhere"> Found a better price elsewhere
        </label>
        <label class="cancellation-reason">
          <input type="radio" name="cancelReason" value="Delivery time is too long"> Delivery time is too long
        </label>
        <label class="cancellation-reason">
          <input type="radio" name="cancelReason" value="Ordered by mistake"> Ordered by mistake
        </label>
        <label class="cancellation-reason">
          <input type="radio" name="cancelReason" value="Other reason"> Other reason
        </label>
      </div>
      <div class="cancellation-actions">
        <button class="btn secondary" id="cancelModalClose">Cancel</button>
        <button class="btn error" id="cancelModalConfirm">Confirm Cancellation</button>
      </div>
    </div>
  </div>

  <!-- Alert Modal - Updated with Cancel and Yes buttons -->
  <div class="modal-overlay" id="alertModal">
    <div class="alert-modal">
      <div class="alert-icon">⚠️</div>
      <h3>Payment Gateway Charges</h3>
      <p id="alertMessage">Please note that payment gateway charges (approx ₹8) are non-refundable if you cancel this order. Do you want to proceed?</p>
      <div class="alert-modal-buttons">
        <button class="btn secondary" id="alertModalCancel">Cancel</button>
        <button class="btn" id="alertModalConfirm">Yes</button>
      </div>
    </div>
  </div>

  <!-- Refund Request Modal -->
  <div class="modal-overlay" id="refundModal">
    <div class="cancellation-modal">
      <h3>Request Product Refund</h3>
      <p style="color:var(--muted);margin-bottom:16px">Please provide details for your refund request. Refunds are only available within 3 days of delivery.</p>
      
      <div>
        <label>Reason for Refund *</label>
        <select id="refundReason">
          <option value="">Select a reason</option>
          <option value="Product damaged">Product damaged</option>
          <option value="Wrong product received">Wrong product received</option>
          <option value="Product not as described">Product not as described</option>
          <option value="Size issue">Size issue</option>
          <option value="Changed my mind">Changed my mind</option>
          <option value="Other">Other</option>
        </select>
      </div>
      
      <div style="margin-top:16px">
        <label>Additional Details</label>
        <textarea id="refundDetails" placeholder="Please provide any additional information about your refund request" rows="3"></textarea>
      </div>
      
      <div class="cancellation-actions">
        <button class="btn secondary" id="refundModalClose">Cancel</button>
        <button class="btn" id="refundModalConfirm">Submit Refund Request</button>
      </div>
    </div>
  </div>

  <script>
    // Firebase configuration and initialization
    const firebaseConfig = {
      apiKey: "AIzaSyAeB7VzIxJaNYagUPoKd-kN5HXmLbS2-Vw",
      authDomain: "videomanager-23d98.firebaseapp.com",
      databaseURL: "https://videomanager-23d98-default-rtdb.firebaseio.com",
      projectId: "videomanager-23d98",
      storageBucket: "videomanager-23d98.firebasestorage.app",
      messagingSenderId: "847321523576",
      appId: "1:847321523576:web:bda3f5026e3e163603548d",
      measurementId: "G-YBSJ1KMPV4"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    
    // Initialize Realtime Database
    const realtimeDB = firebase.database();

    /***********************
     * Demo product dataset (mixed categories) - Added more products
     ***********************/
    let PRODUCTS = [];
    let productsLoaded = false;

    // Function to load products from Realtime Database with offline support
    function loadProductsFromRealtimeDB() {
      // First try to load from localStorage
      const cachedProducts = localStorage.getItem('cached_products');
      if (cachedProducts) {
        try {
          PRODUCTS = JSON.parse(cachedProducts);
          renderHomePreview();
          renderProductSlider();
          productsLoaded = true;
        } catch (e) {
          console.error("Error parsing cached products:", e);
        }
      }

      // Then try to load from Realtime Database
      const productsRef = realtimeDB.ref('products');
      productsRef.on('value', (snapshot) => {
        const products = [];
        snapshot.forEach((childSnapshot) => {
          const productData = childSnapshot.val();
          // Map the product data to the expected structure
          products.push({
            id: childSnapshot.key,
            title: productData.name || 'No Name',
            price: productData.price || 0,
            desc: productData.description || '',
            fullDesc: productData.fullDesc || productData.description || '',
            images: productData.images ? productData.images : (productData.image ? [productData.image] : []),
            sizes: productData.sizes || ['S', 'M', 'L'],
            category: productData.category || 'Uncategorized'
          });
        });
        
        // Update the PRODUCTS array
        PRODUCTS = products;
        
        // Cache to localStorage
        localStorage.setItem('cached_products', JSON.stringify(PRODUCTS));
        
        // Update UI if not already loaded
        if (!productsLoaded) {
          renderHomePreview();
          renderProductSlider();
          productsLoaded = true;
        } else {
          // Update the home preview if products are updated
          renderHomePreview();
        }
        
        console.log("Products loaded from Realtime Database");
      }, (error) => {
        console.error("Error loading products from Realtime Database:", error);
        // If Realtime Database fails and we don't have cached products, use the demo data
        if (!cachedProducts) {
          PRODUCTS = getDemoProducts();
          renderHomePreview();
          renderProductSlider();
          productsLoaded = true;
        }
      });
    }

    // Fallback demo products in case Realtime Database is not available
    function getDemoProducts() {
      return [
        {id:"1",title:"Wireless Earbuds Pro",price:1299,desc:"ENC mic, 24h battery",fullDesc:"High-quality wireless earbuds with environmental noise cancellation microphone and 24 hours of battery life. Perfect for calls, music, and podcasts.",images:[
          "https://images.unsplash.com/photo-1598335622921-7c1b84a3c2bf?auto=format&fit=crop&w=1000&q=60",
          "https://images.unsplash.com/photo-1518445691220-6b95fcd0a2df?auto=format&fit=crop&w=1000&q=60",
          "https://images.unsplash.com/photo-1518441902113-c1d0d0f70ed2?auto=format&fit=crop&w=1000&q=60"
        ],sizes:["—","—"], category:"Men's Acc"},
        {id:"2",title:"Classic Cotton T‑Shirt",price:499,desc:"100% cotton, regular fit",fullDesc:"Comfortable 100% cotton t-shirt with regular fit. Available in multiple colors. Perfect for everyday wear.",images:[
          "https://images.unsplash.com/photo-1520971282009-2c7e9f7d8dbe?auto=format&fit=crop&w=1000&q=60",
          "https://images.unsplash.com/photo-1512436991641-6745cdb1723f?auto=format&fit=crop&w=1000&q=60"
        ],sizes:["S","M","L","XL"], category:"Topwear"},
        {id:"3",title:"Running Sneakers",price:1999,desc:"Comfortable running shoes",fullDesc:"High-quality running sneakers with cushioned soles for maximum comfort during workouts or casual wear.",images:[
          "https://images.unsplash.com/photo-1542291026-7eec264c27ff?auto=format&fit=crop&w=1000&q=60"
        ],sizes:["7","8","9","10"], category:"Footwear"},
        {id:"4",title:"Smart Watch",price:3499,desc:"Fitness tracker with heart rate monitor",fullDesc:"Advanced smartwatch with fitness tracking, heart rate monitoring, and smartphone connectivity features.",images:[
          "https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&fit=crop&w=1000&q=60"
        ],sizes:["—","—"], category:"Men's Acc"}
      ];
    }

    // state
    let selectedProduct = null;
    let orderDraft = {productId:null, size:null, qty:1, fullname:'',mobile:'',pincode:'',city:'',state:'',house:'',payment:'prepaid',timestamp:null};
    let currentCategory = 'all';
    let currentImageIndex = 0;
    let detailImageIndex = 0;
    let selectedCancelOrderIndex = null;
    let alertModalConfirmCallback = null;
    let ordersViewed = false;
    let selectedRefundOrderIndex = null;
    let wishlist = [];
    let savedUserInfo = {};
    let selectedOrderIndex = null;

    // elements
    const productGrid = document.getElementById('productGrid');
    const homeProductGrid = document.getElementById('homeProductGrid');
    const searchInput = document.getElementById('searchInput');
    const homeSearchInput = document.getElementById('homeSearchInput');
    const homeSearchResults = document.getElementById('homeSearchResults');
    const productSlider = document.getElementById('productSlider');
    const ordersNotification = document.getElementById('ordersNotification');
    const wishlistNotification = document.getElementById('wishlistNotification');
    const menuIcon = document.getElementById('menuIcon');
    const mobileMenu = document.getElementById('mobileMenu');
    const menuOverlay = document.getElementById('menuOverlay');
    const menuClose = document.getElementById('menuClose');

    // Load wishlist from localStorage
    function loadWishlist() {
      const savedWishlist = localStorage.getItem('wishlist');
      if (savedWishlist) {
        wishlist = JSON.parse(savedWishlist);
        updateWishlistNotification();
      }
    }

    // Save wishlist to localStorage
    function saveWishlist() {
      localStorage.setItem('wishlist', JSON.stringify(wishlist));
      updateWishlistNotification();
    }

    // Load user info from localStorage
    function loadUserInfo() {
      const savedInfo = localStorage.getItem('userInfo');
      if (savedInfo) {
        savedUserInfo = JSON.parse(savedInfo);
      }
    }

    // Save user info to localStorage
    function saveUserInfoToStorage() {
      const userInfo = {
        fullname: document.getElementById('fullname').value,
        mobile: document.getElementById('mobile').value,
        pincode: document.getElementById('pincode').value,
        city: document.getElementById('city').value,
        state: document.getElementById('state').value,
        house: document.getElementById('house').value
      };
      
      localStorage.setItem('userInfo', JSON.stringify(userInfo));
      savedUserInfo = userInfo;
      showToast('User information saved successfully!', 'success');
    }

    // Pre-fill user info form
    function prefillUserInfo() {
      if (savedUserInfo.fullname) {
        document.getElementById('fullname').value = savedUserInfo.fullname;
      }
      if (savedUserInfo.mobile) {
        document.getElementById('mobile').value = savedUserInfo.mobile;
      }
      if (savedUserInfo.pincode) {
        document.getElementById('pincode').value = savedUserInfo.pincode;
      }
      if (savedUserInfo.city) {
        document.getElementById('city').value = savedUserInfo.city;
      }
      if (savedUserInfo.state) {
        document.getElementById('state').value = savedUserInfo.state;
      }
      if (savedUserInfo.house) {
        document.getElementById('house').value = savedUserInfo.house;
      }
    }

    // Update wishlist notification badge
    function updateWishlistNotification() {
      if (wishlist.length > 0) {
        wishlistNotification.style.display = 'flex';
        wishlistNotification.textContent = wishlist.length;
      } else {
        wishlistNotification.style.display = 'none';
      }
    }

    // Add product to wishlist
    function addToWishlist(productId) {
      if (!wishlist.includes(productId)) {
        wishlist.push(productId);
        saveWishlist();
        showToast('Product added to wishlist!', 'success');
      } else {
        showToast('Product is already in your wishlist!', 'error');
      }
    }

    // Remove product from wishlist
    function removeFromWishlist(productId) {
      const index = wishlist.indexOf(productId);
      if (index > -1) {
        wishlist.splice(index, 1);
        saveWishlist();
        showToast('Product removed from wishlist!', 'success');
        return true;
      }
      return false;
    }

    // Render wishlist page
    function renderWishlist() {
      const wishlistGrid = document.getElementById('wishlistGrid');
      const noWishlist = document.getElementById('noWishlist');
      
      wishlistGrid.innerHTML = '';
      
      if (wishlist.length === 0) {
        noWishlist.style.display = 'block';
        return;
      }
      
      noWishlist.style.display = 'none';
      
      // Filter products to only show those in the wishlist
      const wishlistProducts = PRODUCTS.filter(p => wishlist.includes(p.id));
      
      wishlistProducts.forEach(p => {
        const card = document.createElement('div'); 
        card.className='card';
        const imgUrl = p.images && p.images.length? p.images[0] : '';
        card.innerHTML = `
          <div class="product-img-slider" data-id="${p.id}" data-images='${JSON.stringify(p.images)}' data-idx="0" style="background-image:url('${imgUrl}')"></div>
          <div class="card-body">
            <div class="title">${p.title}</div>
            <div class="price">₹${p.price} <span style="font-weight:500;color:var(--muted-light);font-size:14px;margin-left:6px;text-decoration:line-through">₹${Math.round(p.price*1.5)}</span></div>
            <div class="badge">${p.desc}</div>
            <div style="margin-top:auto;display:flex;gap:10px;flex-wrap:wrap">
              <button class="btn orderBtn" data-id="${p.id}">Order Now</button>
              <button class="btn error removeWishlistBtn" data-id="${p.id}">Remove</button>
            </div>
          </div>
        `;
        wishlistGrid.appendChild(card);
      });
      
      // Add click events to order buttons
      document.querySelectorAll('.orderBtn').forEach(btn => {
        btn.addEventListener('click', function() {
          const productId = this.getAttribute('data-id');
          startOrder(productId);
        });
      });
      
      // Add click events to remove buttons
      document.querySelectorAll('.removeWishlistBtn').forEach(btn => {
        btn.addEventListener('click', function() {
          const productId = this.getAttribute('data-id');
          if (removeFromWishlist(productId)) {
            renderWishlist();
          }
        });
      });
    }

    // Mobile menu functions
    function openMenu() {
      mobileMenu.classList.add('active');
      menuOverlay.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeMenu() {
      mobileMenu.classList.remove('active');
      menuOverlay.classList.remove('active');
      document.body.style.overflow = 'auto';
    }

    // Event listeners for mobile menu
    menuIcon.addEventListener('click', openMenu);
    menuClose.addEventListener('click', closeMenu);
    menuOverlay.addEventListener('click', closeMenu);

    // Show toast notification
    function showToast(message, type = 'success') {
      const toast = document.getElementById('toast');
      const toastMessage = document.getElementById('toast-message');
      
      toastMessage.textContent = message;
      toast.className = `toast ${type}`;
      toast.classList.add('show');
      
      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }

    // Update notification badge
    function updateOrdersNotification() {
      const orders = JSON.parse(localStorage.getItem('demo_orders') || '[]');
      if (orders.length > 0 && !ordersViewed) {
        ordersNotification.style.display = 'flex';
        ordersNotification.textContent = orders.length;
      } else {
        ordersNotification.style.display = 'none';
      }
    }

    // Show alert modal
    function showAlertModal(message, confirmCallback) {
      const alertModal = document.getElementById('alertModal');
      const alertMessage = document.getElementById('alertMessage');
      
      alertMessage.textContent = message;
      alertModal.classList.add('active');
      alertModalConfirmCallback = confirmCallback || null;
    }

    // Close alert modal
    function closeAlertModal() {
      const alertModal = document.getElementById('alertModal');
      alertModal.classList.remove('active');
      alertModalConfirmCallback = null;
    }

    // Show refund modal
    function showRefundModal(index) {
      selectedRefundOrderIndex = index;
      const modal = document.getElementById('refundModal');
      modal.classList.add('active');
      
      // Clear any previously entered data
      document.getElementById('refundReason').value = '';
      document.getElementById('refundDetails').value = '';
    }

    // Close refund modal
    function closeRefundModal() {
      const modal = document.getElementById('refundModal');
      modal.classList.remove('active');
      selectedRefundOrderIndex = null;
    }

    // Submit refund request
    function submitRefundRequest() {
      const reason = document.getElementById('refundReason').value;
      const details = document.getElementById('refundDetails').value;
      
      if (!reason) {
        alert('Please select a reason for your refund request.');
        return;
      }
      
      const orders = JSON.parse(localStorage.getItem('demo_orders') || '[]');
      const order = orders[selectedRefundOrderIndex];
      
      // Save refund request to Firebase Realtime Database
      const refundRequest = {
        orderId: orders.length - selectedRefundOrderIndex,
        productId: order.productId,
        productTitle: PRODUCTS.find(p => p.id === order.productId)?.title || 'Unknown Product',
        reason: reason,
        details: details,
        customerName: order.fullname,
        customerMobile: order.mobile,
        timestamp: new Date().toISOString(),
        status: 'pending'
      };
      
      // Push to Firebase Realtime Database
      realtimeDB.ref('refundRequests').push(refundRequest)
        .then(() => {
          // Mark order as refund requested in localStorage
          orders[selectedRefundOrderIndex].refundRequested = true;
          orders[selectedRefundOrderIndex].refundRequestDate = new Date().toISOString();
          localStorage.setItem('demo_orders', JSON.stringify(orders));
          
          showToast('Your refund request has been submitted successfully! We will process it within 24 hours.', 'success');
          closeRefundModal();
          showMyOrders(); // Refresh the orders view
        })
        .catch((error) => {
          console.error('Error saving refund request:', error);
          showToast('There was an error submitting your refund request. Please try again.', 'error');
        });
    }

    // Render home preview
    function renderHomePreview() {
      if (!homeProductGrid) return;
      homeProductGrid.innerHTML = '';
      
      // Take the first 4 products
      const productsToShow = PRODUCTS.slice(0, 4);
      
      productsToShow.forEach(p => {
        const card = document.createElement('div');
        card.className = 'card';
        const imgUrl = p.images && p.images.length ? p.images[0] : '';
        card.innerHTML = `
          <div class="product-img-slider" data-id="${p.id}" data-images='${JSON.stringify(p.images)}' data-idx="0" style="background-image:url('${imgUrl}')"></div>
          <div class="card-body">
            <div class="title">${p.title}</div>
            <div class="price">₹${p.price}</div>
            <div style="margin-top:auto;display:flex;gap:10px;flex-wrap:wrap">
              <button class="btn orderBtn" data-id="${p.id}">Order Now</button>
              <button class="btn secondary viewBtn" data-id="${p.id}">View Details</button>
            </div>
          </div>
        `;
        
        // Add click events to buttons
        card.querySelector('.orderBtn').addEventListener('click', function(e) {
          e.stopPropagation();
          startOrder(p.id);
        });
        
        card.querySelector('.viewBtn').addEventListener('click', function(e) {
          e.stopPropagation();
          showProductDetail(p.id);
        });
        
        card.addEventListener('click', () => {
          showProductDetail(p.id);
        });
        
        homeProductGrid.appendChild(card);
      });
    }

    // Render product slider
    function renderProductSlider() {
      if (!productSlider) return;
      productSlider.innerHTML = '';
      
      // Use all products for the slider
      PRODUCTS.forEach(p => {
        const item = document.createElement('div');
        item.className = 'slider-item';
        const imgUrl = p.images && p.images.length ? p.images[0] : '';
        item.innerHTML = `
          <div class="slider-item-img" style="background-image:url('${imgUrl}')"></div>
          <div class="slider-item-body">
            <div class="slider-item-title">${p.title}</div>
            <div class="slider-item-price">₹${p.price}</div>
          </div>
        `;
        
        item.addEventListener('click', () => {
          showProductDetail(p.id);
        });
        
        productSlider.appendChild(item);
      });
    }

    // Render products grid with search and category filtering
    function renderProducts() {
      if (!productGrid) return;
      productGrid.innerHTML = '';
      
      // Filter products based on search and category
      const searchTerm = searchInput ? searchInput.value.toLowerCase() : '';
      const filteredProducts = PRODUCTS.filter(p => {
        const matchesSearch = p.title.toLowerCase().includes(searchTerm) || 
                             p.desc.toLowerCase().includes(searchTerm);
        const matchesCategory = currentCategory === 'all' || p.category === currentCategory;
        return matchesSearch && matchesCategory;
      });
      
      if (filteredProducts.length === 0) {
        productGrid.innerHTML = '<div class="card-panel center"><p>No products found. Try a different search term.</p></div>';
        return;
      }
      
      filteredProducts.forEach(p => {
        const card = document.createElement('div');
        card.className = 'card';
        const imgUrl = p.images && p.images.length ? p.images[0] : '';
        card.innerHTML = `
          <div class="product-img-slider" data-id="${p.id}" data-images='${JSON.stringify(p.images)}' data-idx="0" style="background-image:url('${imgUrl}')"></div>
          <div class="card-body">
            <div class="title">${p.title}</div>
            <div class="price">₹${p.price} <span style="font-weight:500;color:var(--muted-light);font-size:14px;margin-left:6px;text-decoration:line-through">₹${Math.round(p.price*1.5)}</span></div>
            <div class="badge">${p.desc}</div>
            <div style="margin-top:auto;display:flex;gap:10px;flex-wrap:wrap">
              <button class="btn orderBtn" data-id="${p.id}">Order Now</button>
              <button class="btn secondary viewBtn" data-id="${p.id}">View Details</button>
            </div>
          </div>
        `;
        productGrid.appendChild(card);
      });
      
      // Add click events to order buttons
      document.querySelectorAll('.orderBtn').forEach(btn => {
        btn.addEventListener('click', function() {
          const productId = this.getAttribute('data-id');
          startOrder(productId);
        });
      });
      
      // Add click events to view buttons
      document.querySelectorAll('.viewBtn').forEach(btn => {
        btn.addEventListener('click', function() {
          const productId = this.getAttribute('data-id');
          showProductDetail(productId);
        });
      });
      
      // Add click events to product cards
      document.querySelectorAll('.card').forEach(card => {
        card.addEventListener('click', function(e) {
          // Only trigger if the click wasn't on a button
          if (!e.target.closest('button')) {
            const productId = this.querySelector('.product-img-slider').getAttribute('data-id');
            showProductDetail(productId);
          }
        });
      });
    }

    // Render home search results
    function renderHomeSearchResults() {
      if (!homeSearchResults) return;
      
      const searchTerm = homeSearchInput ? homeSearchInput.value.toLowerCase() : '';
      if (searchTerm.trim() === '') {
        homeSearchResults.style.display = 'none';
        homeProductGrid.style.display = 'grid';
        return;
      }
      
      homeSearchResults.style.display = 'grid';
      homeProductGrid.style.display = 'none';
      homeSearchResults.innerHTML = '';
      
      const filteredProducts = PRODUCTS.filter(p => {
        return p.title.toLowerCase().includes(searchTerm) || 
               p.desc.toLowerCase().includes(searchTerm);
      });
      
      if (filteredProducts.length === 0) {
        homeSearchResults.innerHTML = '<div class="card-panel center"><p>No products found. Try a different search term.</p></div>';
        return;
      }
      
      filteredProducts.forEach(p => {
        const card = document.createElement('div');
        card.className = 'card';
        const imgUrl = p.images && p.images.length ? p.images[0] : '';
        card.innerHTML = `
          <div class="product-img-slider" data-id="${p.id}" data-images='${JSON.stringify(p.images)}' data-idx="0" style="background-image:url('${imgUrl}')"></div>
          <div class="card-body">
            <div class="title">${p.title}</div>
            <div class="price">₹${p.price} <span style="font-weight:500;color:var(--muted-light);font-size:14px;margin-left:6px;text-decoration:line-through">₹${Math.round(p.price*1.5)}</span></div>
            <div class="badge">${p.desc}</div>
            <div style="margin-top:auto;display:flex;gap:10px;flex-wrap:wrap">
              <button class="btn orderBtn" data-id="${p.id}">Order Now</button>
              <button class="btn secondary viewBtn" data-id="${p.id}">View Details</button>
            </div>
          </div>
        `;
        
        // Add click events to buttons
        card.querySelector('.orderBtn').addEventListener('click', function(e) {
          e.stopPropagation();
          startOrder(p.id);
        });
        
        card.querySelector('.viewBtn').addEventListener('click', function(e) {
          e.stopPropagation();
          showProductDetail(p.id);
        });
        
        card.addEventListener('click', () => {
          showProductDetail(p.id);
        });
        
        homeSearchResults.appendChild(card);
      });
    }

    // Show product detail page
    function showProductDetail(productId) {
      const product = PRODUCTS.find(p => p.id === productId);
      if (!product) return;
      
      selectedProduct = product;
      detailImageIndex = 0;
      
      // Update product detail page
      document.getElementById('detailTitle').textContent = product.title;
      document.getElementById('detailPrice').textContent = `₹${product.price}`;
      document.getElementById('detailDesc').textContent = product.desc;
      document.getElementById('detailFullDesc').textContent = product.fullDesc;
      
      // Update product details meta
      const detailMeta = document.getElementById('detailMeta');
      detailMeta.innerHTML = `
        <p><strong>Category:</strong> ${product.category || 'Uncategorized'}</p>
        <p><strong>Available Sizes:</strong> ${product.sizes.join(', ')}</p>
        <p><strong>Material:</strong> High-quality materials for comfort and durability</p>
      `;
      
      // Update product images
      const detailMainImage = document.getElementById('detailMainImage');
      const detailThumbnails = document.getElementById('detailThumbnails');
      
      if (product.images && product.images.length > 0) {
        detailMainImage.style.backgroundImage = `url('${product.images[0]}')`;
        detailThumbnails.innerHTML = '';
        
        product.images.forEach((img, index) => {
          const thumb = document.createElement('div');
          thumb.className = `product-detail-thumbnail ${index === 0 ? 'active' : ''}`;
          thumb.style.backgroundImage = `url('${img}')`;
          thumb.addEventListener('click', () => {
            detailImageIndex = index;
            detailMainImage.style.backgroundImage = `url('${img}')`;
            document.querySelectorAll('.product-detail-thumbnail').forEach(t => t.classList.remove('active'));
            thumb.classList.add('active');
            updateCarouselDots();
          });
          detailThumbnails.appendChild(thumb);
        });
        
        // Update carousel dots
        updateCarouselDots();
      }
      
      // Update similar products
      renderSimilarProducts(productId);
      
      // Add event listeners to buttons
      document.getElementById('detailOrderBtn').onclick = () => startOrder(productId);
      document.getElementById('detailWishlistBtn').onclick = () => addToWishlist(productId);
      
      showPage('productDetailPage');
    }

    // Update carousel dots for product detail
    function updateCarouselDots() {
      const product = selectedProduct;
      if (!product || !product.images) return;
      
      const dotsContainer = document.getElementById('detailCarouselDots');
      dotsContainer.innerHTML = '';
      
      product.images.forEach((_, index) => {
        const dot = document.createElement('div');
        dot.className = `detail-carousel-dot ${index === detailImageIndex ? 'active' : ''}`;
        dot.addEventListener('click', () => {
          detailImageIndex = index;
          const detailMainImage = document.getElementById('detailMainImage');
          detailMainImage.style.backgroundImage = `url('${product.images[index]}')`;
          document.querySelectorAll('.product-detail-thumbnail').forEach(t => t.classList.remove('active'));
          document.querySelectorAll('.product-detail-thumbnail')[index].classList.add('active');
          updateCarouselDots();
        });
        dotsContainer.appendChild(dot);
      });
    }

    // Render similar products
    function renderSimilarProducts(currentProductId) {
      const similarSlider = document.getElementById('similarProductsSlider');
      similarSlider.innerHTML = '';
      
      // Get products from the same category (excluding current product)
      const currentProduct = PRODUCTS.find(p => p.id === currentProductId);
      const similarProducts = PRODUCTS.filter(p => 
        p.id !== currentProductId && 
        p.category === currentProduct.category
      ).slice(0, 6); // Limit to 6 products
      
      if (similarProducts.length === 0) {
        // If no similar products, show any other products
        similarProducts.push(...PRODUCTS.filter(p => p.id !== currentProductId).slice(0, 6));
      }
      
      similarProducts.forEach(p => {
        const item = document.createElement('div');
        item.className = 'slider-item';
        const imgUrl = p.images && p.images.length ? p.images[0] : '';
        item.innerHTML = `
          <div class="slider-item-img" style="background-image:url('${imgUrl}')"></div>
          <div class="slider-item-body">
            <div class="slider-item-title">${p.title}</div>
            <div class="slider-item-price">₹${p.price}</div>
          </div>
        `;
        
        item.addEventListener('click', () => {
          showProductDetail(p.id);
        });
        
        similarSlider.appendChild(item);
      });
    }

    // Start order process
    function startOrder(productId) {
      const product = PRODUCTS.find(p => p.id === productId);
      if (!product) return;
      
      selectedProduct = product;
      orderDraft.productId = productId;
      orderDraft.qty = 1;
      orderDraft.size = product.sizes && product.sizes.length > 0 ? product.sizes[0] : '—';
      currentImageIndex = 0;
      
      // Update selected product card
      document.getElementById('spTitle').textContent = product.title;
      document.getElementById('spPrice').textContent = `₹${product.price}`;
      document.getElementById('spDesc').textContent = product.desc;
      document.getElementById('spFullDesc').textContent = product.fullDesc;
      
      // Update size options
      const sizeSelect = document.getElementById('sizeSelect');
      sizeSelect.innerHTML = '';
      if (product.sizes && product.sizes.length > 0) {
        product.sizes.forEach(size => {
          const option = document.createElement('option');
          option.value = size;
          option.textContent = size;
          sizeSelect.appendChild(option);
        });
        sizeSelect.value = orderDraft.size;
      } else {
        sizeSelect.innerHTML = '<option value="—">—</option>';
      }
      
      // Update product images
      const galleryMain = document.getElementById('galleryMain');
      if (product.images && product.images.length > 0) {
        galleryMain.style.backgroundImage = `url('${product.images[0]}')`;
        
        // Update carousel dots
        const dotsContainer = galleryMain.querySelector('.carousel-dots');
        dotsContainer.innerHTML = '';
        
        product.images.forEach((_, index) => {
          const dot = document.createElement('div');
          dot.className = `carousel-dot ${index === 0 ? 'active' : ''}`;
          dot.addEventListener('click', () => {
            currentImageIndex = index;
            galleryMain.style.backgroundImage = `url('${product.images[index]}')`;
            updateCarouselDots();
          });
          dotsContainer.appendChild(dot);
        });
      }
      
      showPage('orderPage');
    }

    // Update carousel dots
    function updateCarouselDots() {
      const product = selectedProduct;
      if (!product || !product.images) return;
      
      const dotsContainer = document.querySelector('.carousel-dots');
      dotsContainer.innerHTML = '';
      
      product.images.forEach((_, index) => {
        const dot = document.createElement('div');
        dot.className = `carousel-dot ${index === currentImageIndex ? 'active' : ''}`;
        dot.addEventListener('click', () => {
          currentImageIndex = index;
          const galleryMain = document.getElementById('galleryMain');
          galleryMain.style.backgroundImage = `url('${product.images[index]}')`;
          updateCarouselDots();
        });
        dotsContainer.appendChild(dot);
      });
    }

    // Show page function
    function showPage(pageId) {
      document.querySelectorAll('.page').forEach(page => {
        page.classList.remove('active');
      });
      document.getElementById(pageId).classList.add('active');
      
      // Scroll to top
      window.scrollTo(0, 0);
      
      // Close mobile menu if open
      closeMenu();
      
      // If showing products page, render it
      if (pageId === 'productsPage') {
        renderProducts();
      }
      
      // If showing home page, render it
      if (pageId === 'homePage') {
        renderHomePreview();
        homeSearchResults.style.display = 'none';
        homeProductGrid.style.display = 'grid';
      }
      
      // If showing wishlist page, render it
      if (pageId === 'wishlistPage') {
        renderWishlist();
      }
      
      // If showing user page, pre-fill with saved info
      if (pageId === 'userPage') {
        prefillUserInfo();
      }
      
      // If showing my orders page, render it
      if (pageId === 'myOrdersPage') {
        showMyOrders();
      }
    }

    // Show my orders
    function showMyOrders() {
      ordersViewed = true;
      updateOrdersNotification();
      
      const ordersList = document.getElementById('ordersList');
      const noOrders = document.getElementById('noOrders');
      const orders = JSON.parse(localStorage.getItem('demo_orders') || '[]');
      
      ordersList.innerHTML = '';
      
      if (orders.length === 0) {
        noOrders.style.display = 'block';
        return;
      }
      
      noOrders.style.display = 'none';
      
      // Show orders in reverse order (newest first)
      orders.reverse().forEach((order, index) => {
        const product = PRODUCTS.find(p => p.id === order.productId);
        if (!product) return;
        
        const orderCard = document.createElement('div');
        orderCard.className = 'order-card';
        orderCard.setAttribute('data-index', orders.length - 1 - index); // Store original index
        
        // Format date
        const orderDate = new Date(order.timestamp);
        const formattedDate = orderDate.toLocaleDateString('en-IN', {
          day: 'numeric',
          month: 'short',
          year: 'numeric'
        });
        
        // Determine status and estimated delivery
        const statusInfo = getOrderStatusInfo(order);
        
        orderCard.innerHTML = `
          <div class="order-header">
            <div>
              <div class="order-id">Order #${orders.length - index}</div>
              <div class="order-date">Placed on ${formattedDate}</div>
              <div class="order-estimated">${statusInfo.estimated}</div>
            </div>
            <div class="order-status ${statusInfo.class}">${statusInfo.text}</div>
          </div>
          <div class="order-details">
            <div class="order-product-image" style="background-image:url('${product.images && product.images.length > 0 ? product.images[0] : ''}')"></div>
            <div class="order-product-info">
              <div class="order-product-title">${product.title}</div>
              <div class="order-product-price">₹${product.price} × ${order.qty}</div>
              <div class="order-product-meta">Size: ${order.size} | Payment: ${order.payment === 'cod' ? 'Cash on Delivery' : 'Prepaid'}</div>
              <div class="order-product-meta">Delivery to: ${order.house}, ${order.city}, ${order.pincode}</div>
            </div>
          </div>
          <div class="order-actions">
            ${statusInfo.canCancel ? `<button class="btn error cancelOrderBtn">Cancel Order</button>` : ''}
            ${statusInfo.canRefund ? `<button class="btn secondary refundBtn">Request Refund</button>` : ''}
            <button class="btn secondary viewOrderBtn">View Details</button>
          </div>
        `;
        
        ordersList.appendChild(orderCard);
        
        // Add event listeners
        orderCard.querySelector('.viewOrderBtn').addEventListener('click', () => {
          showOrderDetail(orders.length - 1 - index);
        });
        
        if (statusInfo.canCancel) {
          orderCard.querySelector('.cancelOrderBtn').addEventListener('click', (e) => {
            e.stopPropagation();
            showCancellationModal(orders.length - 1 - index);
          });
        }
        
        if (statusInfo.canRefund) {
          orderCard.querySelector('.refundBtn').addEventListener('click', (e) => {
            e.stopPropagation();
            showRefundModal(orders.length - 1 - index);
          });
        }
        
        // Make the whole card clickable
        orderCard.addEventListener('click', (e) => {
          // Only trigger if the click wasn't on a button
          if (!e.target.closest('button')) {
            showOrderDetail(orders.length - 1 - index);
          }
        });
      });
    }

    // Get order status information
    function getOrderStatusInfo(order) {
      const orderDate = new Date(order.timestamp);
      const now = new Date();
      const daysSinceOrder = Math.floor((now - orderDate) / (1000 * 60 * 60 * 24));
      
      // Determine status based on days since order
      let status, estimated, canCancel, canRefund;
      
      if (order.status === 'cancelled') {
        status = { text: 'Cancelled', class: 'status-cancelled', estimated: 'Order was cancelled' };
        canCancel = false;
        canRefund = false;
      } else if (order.status === 'refundRequested') {
        status = { text: 'Refund Requested', class: 'status-cancelled', estimated: 'Refund request submitted' };
        canCancel = false;
        canRefund = false;
      } else if (daysSinceOrder < 1) {
        status = { text: 'Confirmed', class: 'status-confirmed', estimated: 'Estimated delivery: 5-7 days' };
        canCancel = true;
        canRefund = false;
      } else if (daysSinceOrder < 3) {
        status = { text: 'Shipped', class: 'status-shipped', estimated: 'Estimated delivery: 3-5 days' };
        canCancel = false;
        canRefund = false;
      } else if (daysSinceOrder < 7) {
        status = { text: 'In Transit', class: 'status-shipped', estimated: 'Estimated delivery: 1-2 days' };
        canCancel = false;
        canRefund = false;
      } else {
        status = { text: 'Delivered', class: 'status-delivered', estimated: 'Delivered on ' + new Date(orderDate.getTime() + 7 * 24 * 60 * 60 * 1000).toLocaleDateString('en-IN') };
        canCancel = false;
        canRefund = daysSinceOrder <= 10; // Allow refund within 3 days of delivery
      }
      
      return {
        text: status.text,
        class: status.class,
        estimated: status.estimated,
        canCancel: canCancel,
        canRefund: canRefund
      };
    }

    // Show order detail
    function showOrderDetail(index) {
      selectedOrderIndex = index;
      const orders = JSON.parse(localStorage.getItem('demo_orders') || '[]');
      const order = orders[index];
      
      if (!order) return;
      
      const product = PRODUCTS.find(p => p.id === order.productId);
      if (!product) return;
      
      const orderDetailContent = document.getElementById('orderDetailContent');
      const statusInfo = getOrderStatusInfo(order);
      
      // Format dates
      const orderDate = new Date(order.timestamp);
      const formattedOrderDate = orderDate.toLocaleDateString('en-IN', {
        day: 'numeric',
        month: 'long',
        year: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
      });
      
      const estimatedDeliveryDate = new Date(orderDate.getTime() + 7 * 24 * 60 * 60 * 1000);
      const formattedDeliveryDate = estimatedDeliveryDate.toLocaleDateString('en-IN', {
        day: 'numeric',
        month: 'long',
        year: 'numeric'
      });
      
      orderDetailContent.innerHTML = `
        <div class="order-detail-section">
          <div class="order-detail-label">Order Status</div>
          <div class="order-status ${statusInfo.class}" style="display:inline-block">${statusInfo.text}</div>
          <div style="margin-top:8px;color:var(--muted)">${statusInfo.estimated}</div>
        </div>
        
        <div class="order-detail-section">
          <div class="order-detail-label">Order Details</div>
          <div class="order-detail-product">
            <div class="order-detail-image" style="background-image:url('${product.images && product.images.length > 0 ? product.images[0] : ''}')"></div>
            <div class="order-detail-product-info">
              <div style="font-weight:600;font-size:18px">${product.title}</div>
              <div style="color:var(--accent);font-weight:700;font-size:20px;margin:8px 0">₹${product.price} × ${order.qty} = ₹${product.price * order.qty}</div>
              <div style="color:var(--muted)">Size: ${order.size} | Payment: ${order.payment === 'cod' ? 'Cash on Delivery' : 'Prepaid'}</div>
            </div>
          </div>
        </div>
        
        <div class="order-detail-section">
          <div class="order-detail-label">Delivery Address</div>
          <div class="order-detail-value">
            ${order.fullname}<br>
            ${order.house}<br>
            ${order.city}, ${order.state} - ${order.pincode}<br>
            Mobile: ${order.mobile}
          </div>
        </div>
        
        <div class="order-detail-section">
          <div class="order-detail-label">Order Information</div>
          <div class="order-detail-value">
            <div><strong>Order ID:</strong> #${orders.length - index}</div>
            <div><strong>Order Date:</strong> ${formattedOrderDate}</div>
            <div><strong>Estimated Delivery:</strong> ${formattedDeliveryDate}</div>
            <div><strong>Payment Method:</strong> ${order.payment === 'cod' ? 'Cash on Delivery' : 'Prepaid (UPI/Card)'}</div>
          </div>
        </div>
        
        ${statusInfo.canCancel || statusInfo.canRefund ? `
        <div class="order-detail-section">
          <div class="order-detail-label">Order Actions</div>
          <div style="display:flex;gap:12px;flex-wrap:wrap">
            ${statusInfo.canCancel ? `<button class="btn error" id="detailCancelOrderBtn">Cancel Order</button>` : ''}
            ${statusInfo.canRefund ? `<button class="btn secondary" id="detailRefundBtn">Request Refund</button>` : ''}
          </div>
        </div>
        ` : ''}
        
        ${order.status === 'cancelled' ? `
        <div class="refund-section">
          <div class="refund-title">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="12" y1="8" x2="12" y2="16"></line>
              <line x1="8" y1="12" x2="16" y2="12"></line>
            </svg>
            Order Cancelled
          </div>
          <div class="refund-note">This order was cancelled. If you paid online, your refund will be processed within 5-7 business days.</div>
        </div>
        ` : ''}
        
        ${order.status === 'refundRequested' ? `
        <div class="refund-section">
          <div class="refund-title">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path>
              <polyline points="14 2 14 8 20 8"></polyline>
              <line x1="16" y1="13" x2="8" y2="13"></line>
              <line x1="16" y1="17" x2="8" y2="17"></line>
              <polyline points="10 9 9 9 8 9"></polyline>
            </svg>
            Refund Request Submitted
          </div>
          <div class="refund-note">Your refund request has been submitted. We will process it within 24 hours and contact you for further details.</div>
        </div>
        ` : ''}
        
        ${statusInfo.text === 'Delivered' ? `
        <div class="delivery-congrats">
          <div class="delivery-congrats-icon">🎉</div>
          <div>Your order has been delivered! We hope you enjoy your purchase.</div>
        </div>
        ` : ''}
      `;
      
      // Add event listeners to action buttons
      if (statusInfo.canCancel) {
        document.getElementById('detailCancelOrderBtn').addEventListener('click', () => {
          showCancellationModal(index);
        });
      }
      
      if (statusInfo.canRefund) {
        document.getElementById('detailRefundBtn').addEventListener('click', () => {
          showRefundModal(index);
        });
      }
      
      showPage('orderDetailPage');
    }

    // Show cancellation modal
    function showCancellationModal(index) {
      selectedCancelOrderIndex = index;
      const modal = document.getElementById('cancellationModal');
      modal.classList.add('active');
      
      // Clear any previously selected reason
      document.querySelectorAll('input[name="cancelReason"]').forEach(radio => {
        radio.checked = false;
      });
    }

    // Close cancellation modal
    function closeCancellationModal() {
      const modal = document.getElementById('cancellationModal');
      modal.classList.remove('active');
      selectedCancelOrderIndex = null;
    }

    // Cancel order
    function cancelOrder() {
      const reason = document.querySelector('input[name="cancelReason"]:checked');
      if (!reason) {
        alert('Please select a reason for cancellation.');
        return;
      }
      
      const orders = JSON.parse(localStorage.getItem('demo_orders') || '[]');
      const order = orders[selectedCancelOrderIndex];
      
      // Check if order can be cancelled (within 24 hours)
      const orderDate = new Date(order.timestamp);
      const now = new Date();
      const hoursSinceOrder = (now - orderDate) / (1000 * 60 * 60);
      
      if (hoursSinceOrder > 24) {
        showToast('This order can no longer be cancelled as it has been more than 24 hours since placement.', 'error');
        closeCancellationModal();
        return;
      }
      
      // Update order status
      orders[selectedCancelOrderIndex].status = 'cancelled';
      orders[selectedCancelOrderIndex].cancellationReason = reason.value;
      orders[selectedCancelOrderIndex].cancellationDate = new Date().toISOString();
      
      // Save to localStorage
      localStorage.setItem('demo_orders', JSON.stringify(orders));
      
      showToast('Order cancelled successfully!', 'success');
      closeCancellationModal();
      
      // Refresh orders view
      if (document.getElementById('orderDetailPage').classList.contains('active')) {
        showOrderDetail(selectedCancelOrderIndex);
      } else {
        showMyOrders();
      }
    }

    // Initialize the app
    function init() {
      // Load data
      loadProductsFromRealtimeDB();
      loadWishlist();
      loadUserInfo();
      
      // Set up event listeners for navigation
      document.getElementById('openContactTop').addEventListener('click', () => showPage('contactPage'));
      document.getElementById('openMyOrdersTop').addEventListener('click', () => {
        showMyOrders();
        showPage('myOrdersPage');
      });
      document.getElementById('openWishlistTop').addEventListener('click', () => showPage('wishlistPage'));
      
      // Set up search functionality
      if (searchInput) {
        searchInput.addEventListener('input', renderProducts);
      }
      
      if (homeSearchInput) {
        homeSearchInput.addEventListener('input', renderHomeSearchResults);
      }
      
      // Set up order process navigation
      document.getElementById('toUserInfo').addEventListener('click', () => {
        // Save size and quantity
        orderDraft.size = document.getElementById('sizeSelect').value;
        orderDraft.qty = parseInt(document.getElementById('qtySelect').value);
        showPage('userPage');
      });
      
      document.getElementById('backToProducts').addEventListener('click', () => showPage('productsPage'));
      
      document.getElementById('toPayment').addEventListener('click', () => {
        // Save user info
        orderDraft.fullname = document.getElementById('fullname').value;
        orderDraft.mobile = document.getElementById('mobile').value;
        orderDraft.pincode = document.getElementById('pincode').value;
        orderDraft.city = document.getElementById('city').value;
        orderDraft.state = document.getElementById('state').value;
        orderDraft.house = document.getElementById('house').value;
        
        // Validate required fields
        if (!orderDraft.fullname || !orderDraft.mobile || !orderDraft.pincode || 
            !orderDraft.city || !orderDraft.state || !orderDraft.house) {
          showToast('Please fill in all required fields.', 'error');
          return;
        }
        
        // Validate mobile number
        if (orderDraft.mobile.length !== 10 || isNaN(orderDraft.mobile)) {
          showToast('Please enter a valid 10-digit mobile number.', 'error');
          return;
        }
        
        // Validate pincode
        if (orderDraft.pincode.length !== 6 || isNaN(orderDraft.pincode)) {
          showToast('Please enter a valid 6-digit pincode.', 'error');
          return;
        }
        
        // Update payment page summary
        const product = PRODUCTS.find(p => p.id === orderDraft.productId);
        if (product) {
          document.getElementById('sumProduct').textContent = product.title;
          document.getElementById('sumQty').textContent = orderDraft.qty;
          document.getElementById('sumPrice').textContent = `₹${product.price * orderDraft.qty}`;
          const total = product.price * orderDraft.qty + 50; // 50 delivery charge
          document.getElementById('sumTotal').textContent = `₹${total}`;
        }
        
        showPage('paymentPage');
      });
      
      document.getElementById('editOrder').addEventListener('click', () => showPage('orderPage'));
      document.getElementById('saveUserInfo').addEventListener('click', saveUserInfoToStorage);
      
      document.getElementById('payBack').addEventListener('click', () => showPage('userPage'));
      
      // Set up carousel controls for order page
      document.querySelector('.carousel-control.prev').addEventListener('click', () => {
        if (!selectedProduct || !selectedProduct.images) return;
        currentImageIndex = (currentImageIndex - 1 + selectedProduct.images.length) % selectedProduct.images.length;
        document.getElementById('galleryMain').style.backgroundImage = `url('${selectedProduct.images[currentImageIndex]}')`;
        updateCarouselDots();
      });
      
      document.querySelector('.carousel-control.next').addEventListener('click', () => {
        if (!selectedProduct || !selectedProduct.images) return;
        currentImageIndex = (currentImageIndex + 1) % selectedProduct.images.length;
        document.getElementById('galleryMain').style.backgroundImage = `url('${selectedProduct.images[currentImageIndex]}')`;
        updateCarouselDots();
      });
      
      // Set up carousel controls for product detail page
      document.querySelector('.detail-carousel-control.prev').addEventListener('click', () => {
        if (!selectedProduct || !selectedProduct.images) return;
        detailImageIndex = (detailImageIndex - 1 + selectedProduct.images.length) % selectedProduct.images.length;
        document.getElementById('detailMainImage').style.backgroundImage = `url('${selectedProduct.images[detailImageIndex]}')`;
        document.querySelectorAll('.product-detail-thumbnail').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.product-detail-thumbnail')[detailImageIndex].classList.add('active');
        updateCarouselDots();
      });
      
      document.querySelector('.detail-carousel-control.next').addEventListener('click', () => {
        if (!selectedProduct || !selectedProduct.images) return;
        detailImageIndex = (detailImageIndex + 1) % selectedProduct.images.length;
        document.getElementById('detailMainImage').style.backgroundImage = `url('${selectedProduct.images[detailImageIndex]}')`;
        document.querySelectorAll('.product-detail-thumbnail').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.product-detail-thumbnail')[detailImageIndex].classList.add('active');
        updateCarouselDots();
      });
      
      // Set up quantity controls
      document.querySelector('.qty-minus').addEventListener('click', () => {
        const qtyInput = document.getElementById('qtySelect');
        let qty = parseInt(qtyInput.value);
        if (qty > 1) {
          qty--;
          qtyInput.value = qty;
        }
      });
      
      document.querySelector('.qty-plus').addEventListener('click', () => {
        const qtyInput = document.getElementById('qtySelect');
        let qty = parseInt(qtyInput.value);
        qty++;
        qtyInput.value = qty;
      });
      
      // Set up modal controls
      document.getElementById('cancelModalClose').addEventListener('click', closeCancellationModal);
      document.getElementById('cancelModalConfirm').addEventListener('click', cancelOrder);
      
      document.getElementById('alertModalCancel').addEventListener('click', closeAlertModal);
      document.getElementById('alertModalConfirm').addEventListener('click', () => {
        if (alertModalConfirmCallback) {
          alertModalConfirmCallback();
        }
        closeAlertModal();
      });
      
      document.getElementById('refundModalClose').addEventListener('click', closeRefundModal);
      document.getElementById('refundModalConfirm').addEventListener('click', submitRefundRequest);
      
      // Set up success page navigation
      document.getElementById('goHome').addEventListener('click', () => showPage('homePage'));
      document.getElementById('viewOrders').addEventListener('click', () => {
        showMyOrders();
        showPage('myOrdersPage');
      });
      
      // Set up confirm order button with the new alert modal
      document.getElementById('confirmOrder').addEventListener('click', () => {
        // Get payment method
        const paymentMethod = document.querySelector('input[name="pay"]:checked').value;
        orderDraft.payment = paymentMethod;
        orderDraft.timestamp = new Date().toISOString();
        
        // Show confirmation modal with the exact message
        showAlertModal(
          "Please note: Payment gateway charges (approx ₹8) are non-refundable if you cancel this order. Do you want to proceed?",
          () => {
            // User clicked Yes - proceed with order placement
            placeOrder();
          }
        );
      });
      
      // Set up rotating hero messages
      let messageIndex = 0;
      const heroMessages = document.querySelectorAll('#heroMessages span');
      
      if (heroMessages.length > 0) {
        setInterval(() => {
          heroMessages.forEach(msg => msg.classList.remove('active'));
          messageIndex = (messageIndex + 1) % heroMessages.length;
          heroMessages[messageIndex].classList.add('active');
        }, 4000);
      }
      
      // Initial render
      renderHomePreview();
      renderProductSlider();
      updateOrdersNotification();
    }

    // Place order function
    function placeOrder() {
      // Save order to localStorage
      const orders = JSON.parse(localStorage.getItem('demo_orders') || '[]');
      orders.push({...orderDraft});
      localStorage.setItem('demo_orders', JSON.stringify(orders));
      
      // Show success page
      showPage('successPage');
      
      // Reset order draft
      orderDraft = {productId:null, size:null, qty:1, fullname:'',mobile:'',pincode:'',city:'',state:'',house:'',payment:'prepaid',timestamp:null};
      
      // Update orders notification
      ordersViewed = false;
      updateOrdersNotification();
    }

    // Initialize the app when DOM is loaded
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>