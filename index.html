<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Buyzo Cart — Modern Shop</title>
  <meta name="description" content="Buyzo Cart — clean, mobile‑first shop template with product cards, step checkout, and policy modals."/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://images.unsplash.com"/>
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth-compat.js"></script>
  <!-- EmailJS SDK -->
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  <style>
    :root {
      --bg: #ffffff;
      --card: #ffffff;
      --accent: #2563eb;
      --accent-hover: #1d4ed8;
      --muted: #64748b;
      --muted-light: #94a3b8;
      --success: #22c55e;
      --error: #ef4444;
      --shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      --shadow-hover: 0 6px 16px rgba(0, 0, 0, 0.08);
      --ring: #dbeafe;
      --ink: #0f172a;
      --ink-2: #334155;
      --border: #e2e8f0;
      --radius: 12px;
      --transition: all 0.3s ease;
    }

    [data-theme="dark"] {
      --bg: #0f172a;
      --card: #1e293b;
      --accent: #3b82f6;
      --accent-hover: #2563eb;
      --muted: #94a3b8;
      --muted-light: #64748b;
      --success: #22c55e;
      --error: #ef4444;
      --shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      --shadow-hover: 0 6px 16px rgba(0, 0, 0, 0.3);
      --ring: #1e3a8a;
      --ink: #f1f5f9;
      --ink-2: #cbd5e1;
      --border: #334155;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg);
      color: var(--ink);
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      transition: var(--transition);
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    /* Header */
    header {
      background: var(--card);
      box-shadow: var(--shadow);
      padding: 16px 24px;
      position: sticky;
      top: 0;
      z-index: 50;
      border-bottom: 1px solid var(--border);
      transition: var(--transition);
    }

    .header-inner {
      max-width: 1100px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      gap: 16px;
      justify-content: space-between;
    }

    .brand {
      font-weight: 800;
      color: var(--ink);
      font-size: 20px;
      white-space: nowrap;
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
    }

    .brand .chip {
      background: var(--accent);
      color: #fff;
      font-weight: 700;
      padding: 6px 10px;
      border-radius: 8px;
      font-size: 14px;
    }

    .search-wrap {
      flex: 1;
      display: flex;
      max-width: 500px;
      margin: 16px 0;
    }

    .search-wrap input {
      flex: 1;
      padding: 12px 16px;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      font-family: inherit;
      font-size: 14px;
      transition: all 0.2s ease;
      background: var(--card);
      color: var(--ink);
    }

    .search-wrap input:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px var(--ring);
    }

    .cta {
      display: flex;
      gap: 10px;
      position: relative;
      align-items: center;
    }

    .btn {
      background: var(--accent);
      color: #fff;
      border: 0;
      padding: 10px 16px;
      border-radius: var(--radius);
      cursor: pointer;
      font-weight: 600;
      font-size: 14px;
      transition: all 0.2s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    .btn:hover {
      background: var(--accent-hover);
      transform: translateY(-1px);
    }

    .btn.secondary {
      background: #f1f5f9;
      color: var(--ink-2);
    }

    .btn.secondary:hover {
      background: #e2e8f0;
      transform: translateY(-1px);
    }

    .btn.error {
      background: var(--error);
    }

    .btn.error:hover {
      background: #dc2626;
    }

    .btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    /* Theme Toggle Button */
    .theme-toggle {
      background: none;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 8px;
      border-radius: 50%;
      transition: all 0.2s ease;
      color: var(--ink);
    }

    .theme-toggle:hover {
      background: var(--border);
    }

    .theme-toggle svg {
      width: 20px;
      height: 20px;
    }

    .theme-toggle .moon-icon {
      display: none;
    }

    [data-theme="dark"] .theme-toggle .sun-icon {
      display: none;
    }

    [data-theme="dark"] .theme-toggle .moon-icon {
      display: block;
    }

    /* Notification Badge */
    .notification-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background-color: var(--error);
      color: white;
      border-radius: 50%;
      width: 18px;
      height: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: bold;
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }

    /* Container */
    .container {
      max-width: 1100px;
      margin: 28px auto;
      padding: 0 20px;
      min-height: 70vh;
    }

    /* Hero */
    .hero {
      background: linear-gradient(135deg, #f0f9ff 0%, #ffffff 100%);
      border: 1px solid var(--border);
      box-shadow: var(--shadow);
      border-radius: var(--radius);
      padding: 24px;
      margin-bottom: 24px;
      transition: var(--transition);
    }

    [data-theme="dark"] .hero {
      background: linear-gradient(135deg, #1e3a8a 0%, #0f172a 100%);
    }

    .hero h1 {
      margin: 0 0 8px 0;
      font-size: 24px;
      font-weight: 700;
    }

    .hero p {
      margin: 0;
      color: var(--muted);
      font-size: 16px;
    }

    /* Steps */
    .steps {
      display: flex;
      gap: 8px;
      justify-content: center;
      margin: 24px 0;
      flex-wrap: wrap;
    }

    .step-pill {
      background: #fff;
      padding: 10px 16px;
      border-radius: 999px;
      border: 1px solid var(--border);
      font-weight: 600;
      color: var(--ink-2);
      cursor: pointer;
      user-select: none;
      transition: all 0.2s ease;
      font-size: 14px;
    }

    .step-pill:hover {
      border-color: var(--accent);
    }

    .step-pill.disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .step-pill.disabled:hover {
      border-color: var(--border);
    }

    /* NEW: Enhanced Product Grid */
    .product-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
    }

    .product-card {
      background: var(--card);
      border-radius: var(--radius);
      overflow: hidden;
      box-shadow: var(--shadow);
      display: flex;
      flex-direction: column;
      border: 1px solid var(--border);
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
    }

    .product-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-hover);
    }

    .product-card-image {
      height: 180px;
      background-position: center;
      background-size: cover;
      position: relative;
    }

    .product-card-badge {
      position: absolute;
      top: 10px;
      left: 10px;
      background: #ff4444;
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: 700;
      z-index: 2;
    }

    .product-card-body {
      padding: 16px;
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .product-card-title {
      font-weight: 600;
      margin-bottom: 6px;
      font-size: 16px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .product-card-rating {
      display: flex;
      align-items: center;
      margin-bottom: 8px;
      font-size: 14px;
    }

    .product-card-stars {
      color: #ffc107;
      margin-right: 4px;
    }

    .product-card-review-count {
      color: var(--muted);
    }

    .product-card-price {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
    }

    .product-card-current-price {
      font-weight: 700;
      color: var(--ink);
      font-size: 18px;
    }

    .product-card-original-price {
      text-decoration: line-through;
      color: var(--muted);
      font-size: 14px;
    }

    .product-card-actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 12px;
    }

    .action-btn {
      background: none;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 8px;
      border-radius: 50%;
      transition: all 0.2s ease;
    }

    .action-btn:hover {
      background: #f1f5f9;
    }

    .wishlist-btn {
      color: var(--muted);
    }

    .wishlist-btn.active {
      color: var(--error);
    }

    .share-btn {
      color: var(--muted);
    }

    /* Pages */
    .page {
      display: none;
    }

    .page.active {
      display: block;
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .card-panel {
      background: var(--card);
      border-radius: var(--radius);
      padding: 20px;
      box-shadow: var(--shadow);
      margin-bottom: 16px;
      border: 1px solid var(--border);
      transition: var(--transition);
    }

    .card-panel h3 {
      margin-top: 0;
      margin-bottom: 12px;
      font-size: 18px;
      font-weight: 600;
    }

    label {
      display: block;
      font-size: 14px;
      color: var(--muted);
      margin-bottom: 6px;
      font-weight: 500;
    }

    input, select, textarea {
      width: 100%;
      padding: 12px;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      background: var(--card);
      outline: none;
      font-family: inherit;
      font-size: 14px;
      transition: all 0.2s ease;
      color: var(--ink);
    }

    input:focus, select:focus, textarea:focus {
      box-shadow: 0 0 0 3px var(--ring);
      border-color: var(--accent);
    }

    .row {
      display: flex;
      gap: 16px;
    }

    .col {
      flex: 1;
    }

    .summary {
      background: #f8fafc;
      padding: 16px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
    }

    [data-theme="dark"] .summary {
      background: #1e293b;
    }

    .center {
      text-align: center;
    }

    footer {
      margin-top: 48px;
      text-align: center;
      color: var(--muted);
      padding: 28px 0;
      border-top: 1px solid var(--border);
      transition: var(--transition);
    }

    /* Thumbnails */
    .thumbs {
      display: flex;
      gap: 10px;
      margin-top: 12px;
      flex-wrap: wrap;
    }

    .thumb {
      width: 60px;
      height: 60px;
      border-radius: 8px;
      background-size: cover;
      background-position: center;
      border: 2px solid transparent;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .thumb:hover {
      transform: scale(1.05);
    }

    .thumb.selected {
      border-color: var(--accent);
    }

    /* FIX FOR PROBLEM 1: Remove blue background from order page slider */
    #orderPage .gallery-main {
      background-color: transparent !important;
    }

    .gallery-main {
      height: 340px;
      background-size: contain;
      background-position: center;
      background-repeat: no-repeat;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      position: relative;
      overflow: hidden;
    }

    /* Product Detail Page */
    .product-detail-page {
      padding: 20px;
    }
    
    .product-detail-container {
      display: flex;
      gap: 30px;
      flex-wrap: wrap;
    }
    
    .product-detail-gallery {
      flex: 1;
      min-width: 300px;
      position: relative;
    }
    
    .product-detail-info {
      flex: 1;
      min-width: 300px;
    }
    
    .product-detail-main-image {
      width: 100%;
      height: 400px;
      background-size: contain;
      background-position: center;
      background-repeat: no-repeat;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      margin-bottom: 16px;
      position: relative;
      overflow: hidden;
      cursor: zoom-in;
    }
    
    .product-detail-thumbnails {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    
    .product-detail-thumbnail {
      width: 80px;
      height: 80px;
      border-radius: 8px;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      border: 2px solid var(--border);
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .product-detail-thumbnail:hover,
    .product-detail-thumbnail.active {
      border-color: var(--accent);
      transform: scale(1.05);
    }
    
    .product-detail-title {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 8px;
    }
    
    .product-detail-price {
      font-size: 28px;
      font-weight: 700;
      color: var(--accent);
      margin-bottom: 12px;
    }
    
    .product-detail-desc {
      color: var(--muted);
      margin-bottom: 20px;
      font-size: 16px;
    }
    
    .product-detail-full-desc {
      margin-bottom: 24px;
      line-height: 1.6;
      color: var(--ink-2);
    }
    
    .product-detail-meta {
      background: #f8fafc;
      padding: 16px;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      margin-bottom: 24px;
    }

    [data-theme="dark"] .product-detail-meta {
      background: #1e293b;
    }
    
    .product-detail-meta h4 {
      margin: 0 0 12px 0;
      color: var(--accent);
      font-size: 16px;
    }
    
    .back-to-products {
      display: inline-flex;
      align-items: center;
      margin-bottom: 20px;
      color: var(--accent);
      font-weight: 600;
      cursor: pointer;
      padding: 8px 16px;
      border-radius: var(--radius);
      background: #f1f5f9;
      transition: all 0.2s ease;
    }

    [data-theme="dark"] .back-to-products {
      background: #1e293b;
    }
    
    .back-to-products:hover {
      background: #e2e8f0;
      color: var(--accent-hover);
    }

    /* Similar Products Section */
    .similar-products {
      margin-top: 40px;
      padding-top: 24px;
      border-top: 1px solid var(--border);
    }
    
    .similar-title {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 16px;
      color: var(--ink);
    }

    /* Carousel Controls for Product Detail */
    .detail-carousel-control {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.8);
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 18px;
      color: var(--ink);
      transition: all 0.2s ease;
      z-index: 10;
    }

    .detail-carousel-control:hover {
      background: rgba(255, 255, 255, 1);
    }

    .detail-carousel-control.prev {
      left: 10px;
    }

    .detail-carousel-control.next {
      right: 10px;
    }

    .detail-carousel-dots {
      position: absolute;
      bottom: 15px;
      left: 0;
      right: 0;
      display: flex;
      justify-content: center;
      gap: 8px;
      z-index: 10;
    }

    .detail-carousel-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.5);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .detail-carousel-dot.active {
      background: rgba(255, 255, 255, 1);
      transform: scale(1.2);
    }

    /* Policy Pages */
    .policy-page {
      padding: 20px;
      max-width: 800px;
      margin: 0 auto;
    }
    
    .policy-content {
      background: var(--card);
      border-radius: var(--radius);
      padding: 24px;
      box-shadow: var(--shadow);
      margin-bottom: 24px;
      border: 1px solid var(--border);
    }
    
    .policy-content h2 {
      margin-top: 0;
      color: var(--accent);
      border-bottom: 2px solid var(--border);
      padding-bottom: 12px;
      margin-bottom: 20px;
    }
    
    .policy-content h3 {
      margin: 24px 0 12px;
      color: var(--ink);
    }
    
    .policy-content p {
      margin-bottom: 16px;
      line-height: 1.6;
    }
    
    .policy-content ul, .policy-content ol {
      margin: 16px 0;
      padding-left: 24px;
    }
    
    .policy-content li {
      margin-bottom: 8px;
    }
    
    .back-button {
      display: inline-flex;
      align-items: center;
      margin-bottom: 20px;
      color: var(--accent);
      font-weight: 600;
      cursor: pointer;
    }
    
    .back-button:hover {
      color: var(--accent-hover);
    }

    /* Category Navigation */
    .categories {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin: 16px 0 24px;
      justify-content: center;
    }
    
    .category-pill {
      background: #fff;
      padding: 8px 16px;
      border-radius: 20px;
      border: 1px solid var(--border);
      font-weight: 500;
      color: var(--ink-2);
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 14px;
      white-space: nowrap;
    }
    
    .category-pill:hover, .category-pill.active {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
    }
    
    .category-pill.active {
      font-weight: 600;
    }

    /* Carousel Controls */
    .carousel-control {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.8);
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 18px;
      color: var(--ink);
      transition: all 0.2s ease;
      z-index: 10;
    }

    .carousel-control:hover {
      background: rgba(255, 255, 255, 1);
    }

    .carousel-control.prev {
      left: 10px;
    }

    .carousel-control.next {
      right: 10px;
    }

    .carousel-dots {
      position: absolute;
      bottom: 15px;
      left: 0;
      right: 0;
      display: flex;
      justify-content: center;
      gap: 8px;
      z-index: 10;
    }

    .carousel-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.5);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .carousel-dot.active {
      background: rgba(255, 255, 255, 1);
      transform: scale(1.2);
    }

    /* About Us Section */
    .about-us {
      margin-top: 40px;
      padding: 20px;
      background: #f8fafc;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      text-align: center;
    }

    [data-theme="dark"] .about-us {
      background: #1e293b;
    }

    .about-us h3 {
      margin-bottom: 12px;
      color: var(--accent);
    }

    .about-us p {
      color: var(--ink-2);
      max-width: 600px;
      margin: 0 auto;
    }

    /* My Orders Page */
    .orders-container {
      max-width: 800px;
      margin: 0 auto;
    }
    
    .order-card {
      background: var(--card);
      border-radius: var(--radius);
      padding: 20px;
      box-shadow: var(--shadow);
      margin-bottom: 20px;
      border: 1px solid var(--border);
      cursor: pointer;
      transition: all 0.3s ease;
      user-select: none;
    }
    
    .order-card:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-hover);
    }
    
    .order-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
      padding-bottom: 12px;
      border-bottom: 1px solid var(--border);
    }
    
    .order-id {
      font-weight: 600;
      color: var(--accent);
    }
    
    .order-date {
      color: var(--muted);
      font-size: 14px;
    }
    
    .order-estimated {
      color: var(--success);
      font-size: 14px;
      font-weight: 500;
      margin-top: 4px;
    }
    
    .order-status {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
    }
    
    .status-confirmed {
      background: #dcfce7;
      color: #166534;
    }
    
    .status-shipped {
      background: #dbeafe;
      color: #1e40af;
    }
    
    .status-delivered {
      background: #dcfce7;
      color: #166534;
    }
    
    .status-cancelled {
      background: #fee2e2;
      color: #991b1b;
    }
    
    .order-details {
      display: flex;
      gap: 16px;
      margin-bottom: 16px;
    }
    
    .order-product-image {
      width: 80px;
      height: 80px;
      border-radius: 8px;
      background-size: contain;
      background-position: center;
      background-repeat: no-repeat;
      border: 1px solid var(--border);
    }
    
    .order-product-info {
      flex: 1;
    }
    
    .order-product-title {
      font-weight: 600;
      margin-bottom: 6px;
    }
    
    .order-product-price {
      color: var(--accent);
      font-weight: 700;
      margin-bottom: 6px;
    }
    
    .order-product-meta {
      color: var(--muted);
      font-size: 14px;
    }
    
    .order-actions {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
    }

    /* Order Detail Page */
    .order-detail-page {
      background: var(--card);
      border-radius: var(--radius);
      padding: 24px;
      box-shadow: var(--shadow);
      margin-bottom: 24px;
    }
    
    .order-detail-section {
      margin-bottom: 20px;
      padding-bottom: 20px;
      border-bottom: 1px solid var(--border);
    }
    
    .order-detail-section:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
    }
    
    .order-detail-label {
      font-weight: 600;
      color: var(--muted);
      margin-bottom: 6px;
      font-size: 14px;
    }
    
    .order-detail-value {
      font-size: 16px;
      color: var(--ink);
    }
    
    .order-detail-image {
      width: 120px;
      height: 120px;
      border-radius: 8px;
      background-size: contain;
      background-position: center;
      background-repeat: no-repeat;
      border: 1px solid var(--border);
      margin-right: 16px;
    }
    
    .order-detail-product {
      display: flex;
      align-items: center;
      margin-bottom: 16px;
    }
    
    .order-detail-product-info {
      flex: 1;
    }

    /* Horizontal Product Slider */
    .product-slider {
      margin: 30px 0;
      position: relative;
    }
    
    .slider-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }
    
    .slider-title {
      font-size: 20px;
      font-weight: 700;
    }
    
    .slider-controls {
      display: flex;
      gap: 8px;
    }
    
    .slider-btn {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: var(--card);
      border: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .slider-btn:hover {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
    }
    
    .slider-container {
      overflow-x: auto;
      scroll-behavior: smooth;
      scrollbar-width: none; /* Firefox */
      -ms-overflow-style: none; /* IE and Edge */
      user-select: none;
    }
    
    .slider-container::-webkit-scrollbar {
      display: none; /* Chrome, Safari and Opera */
    }
    
    .slider-track {
      display: flex;
      gap: 16px;
      padding: 4px;
      user-select: none;
    }
    
    .slider-item {
      flex: 0 0 auto;
      width: 200px;
      background: var(--card);
      border-radius: var(--radius);
      overflow: hidden;
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
      transition: all 0.3s ease;
      cursor: pointer;
      user-select: none;
    }
    
    .slider-item:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-hover);
    }
    
    .slider-item-img {
      height: 150px;
      background-size: contain;
      background-position: center;
      background-repeat: no-repeat;
    }
    
    .slider-item-body {
      padding: 12px;
    }
    
    .slider-item-title {
      font-weight: 600;
      font-size: 14px;
      margin-bottom: 6px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .slider-item-price {
      font-weight: 700;
      color: var(--accent);
      font-size: 16px;
    }

    /* Toast Notification */
    .toast {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--card);
      color: var(--ink);
      padding: 16px 20px;
      border-radius: var(--radius);
      box-shadow: var(--shadow-hover);
      display: flex;
      align-items: center;
      gap: 10px;
      z-index: 1000;
      transform: translateX(-50%) translateY(-100px);
      opacity: 0;
      transition: all 0.3s ease;
      max-width: 90%;
      text-align: center;
    }
    
    .toast.show {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }
    
    .toast.success {
      border-left: 4px solid var(--success);
    }
    
    .toast.error {
      border-left: 4px solid var(--error);
    }
    
    .toast-icon {
      font-size: 20px;
    }
    
    .toast.success .toast-icon {
      color: var(--success);
    }
    
    .toast.error .toast-icon {
      color: var(--error);
    }

    /* Cancellation Modal */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 2000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    
    .modal-overlay.active {
      opacity: 1;
      visibility: visible;
    }
    
    .cancellation-modal {
      background: var(--card);
      border-radius: var(--radius);
      padding: 24px;
      box-shadow: var(--shadow-hover);
      max-width: 500px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
    }
    
    .cancellation-modal h3 {
      margin-top: 0;
      margin-bottom: 16px;
      color: var(--ink);
    }
    
    .cancellation-reason {
      margin-bottom: 12px;
      padding: 12px;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .cancellation-reason:hover {
      border-color: var(--accent);
      background: #f8fafc;
    }
    
    .cancellation-reason.selected {
      border-color: var(--accent);
      background: var(--ring);
    }
    
    .cancellation-reason input {
      margin-right: 8px;
      width: auto;
    }
    
    .cancellation-actions {
      display: flex;
      gap: 12px;
      margin-top: 20px;
      justify-content: flex-end;
    }

    /* Alert Modal - Updated with Cancel and Yes buttons */
    .alert-modal {
      background: var(--card);
      border-radius: var(--radius);
      padding: 24px;
      box-shadow: var(--shadow-hover);
      max-width: 500px;
      width: 90%;
      text-align: center;
    }
    
    .alert-modal h3 {
      margin-top: 0;
      margin-bottom: 16px;
      color: var(--ink);
    }
    
    .alert-modal p {
      margin-bottom: 20px;
      line-height: 1.6;
    }
    
    .alert-modal .alert-icon {
      font-size: 48px;
      color: var(--error);
      margin-bottom: 16px;
    }
    
    /* New styles for alert modal buttons */
    .alert-modal-buttons {
      display: flex;
      gap: 12px;
      justify-content: center;
      margin-top: 20px;
    }

    /* Quantity Input Controls */
    .quantity-control {
      display: flex;
      align-items: center;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      overflow: hidden;
      width: 100%;
    }
    
    .quantity-control button {
      background: #f1f5f9;
      border: none;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 16px;
      transition: all 0.2s ease;
    }
    
    .quantity-control button:hover {
      background: #e2e8f0;
    }
    
    .quantity-control input {
      flex: 1;
      text-align: center;
      border: none;
      border-left: 1px solid var(--border);
      border-right: 1px solid var(--border);
      border-radius: 0;
      padding: 10px;
      margin: 0;
      background: var(--card);
      color: var(--ink);
    }

    /* Delivery Congratulations */
    .delivery-congrats {
      background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
      border: 1px solid #22c55e;
      border-radius: var(--radius);
      padding: 16px;
      margin-top: 16px;
      text-align: center;
      color: #166534;
      font-weight: 600;
    }
    
    .delivery-congrats-icon {
      font-size: 24px;
      margin-bottom: 8px;
    }

    /* Refund Request Section */
    .refund-section {
      background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
      border: 1px solid #f59e0b;
      border-radius: var(--radius);
      padding: 16px;
      margin-top: 16px;
    }
    
    .refund-title {
      font-size: 16px;
      font-weight: 600;
      color: #92400e;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .refund-note {
      color: #92400e;
      font-size: 14px;
      margin-bottom: 12px;
    }
    
    .refund-time-left {
      background: #fef3c7;
      border: 1px solid #f59e0b;
      border-radius: 20px;
      padding: 6px 12px;
      font-size: 12px;
      font-weight: 600;
      color: #92400e;
      display: inline-block;
      margin-bottom: 12px;
    }

    /* Mobile Menu Icon */
    .menu-icon {
      display: none;
      flex-direction: column;
      justify-content: space-between;
      width: 24px;
      height: 18px;
      cursor: pointer;
    }
    
    .menu-icon span {
      height: 2px;
      width: 100%;
      background-color: var(--ink);
      border-radius: 2px;
      transition: all 0.3s ease;
    }
    
    /* Mobile Menu */
    .mobile-menu {
      position: fixed;
      top: 0;
      left: -280px;
      width: 280px;
      height: 100vh;
      background: var(--card);
      box-shadow: var(--shadow-hover);
      z-index: 1000;
      transition: left 0.3s ease;
      overflow-y: auto;
    }
    
    .mobile-menu.active {
      left: 0;
    }
    
    .menu-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px 20px;
      border-bottom: 1px solid var(--border);
    }
    
    .menu-close {
      font-size: 24px;
      cursor: pointer;
      color: var(--muted);
    }
    
    .menu-items {
      padding: 16px 0;
    }
    
    .menu-item {
      display: flex;
      align-items: center;
      padding: 12px 20px;
      color: var(--ink);
      transition: all 0.2s ease;
      cursor: pointer;
    }
    
    .menu-item:hover {
      background: #f1f5f9;
      color: var(--accent);
    }
    
    .menu-item svg {
      margin-right: 12px;
      width: 18px;
      height: 18px;
    }
    
    .menu-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: 999;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    
    .menu-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    /* NEW FEATURES STYLES */

    /* Recently Viewed Products */
    .recently-viewed {
      margin: 40px 0;
      padding-top: 24px;
      border-top: 1px solid var(--border);
    }

    .recently-viewed-title {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 16px;
      color: var(--ink);
    }

    /* Newsletter Section */
    .newsletter-section {
      background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
      border-radius: var(--radius);
      padding: 32px 24px;
      text-align: center;
      margin: 40px 0;
      border: 1px solid var(--border);
    }

    [data-theme="dark"] .newsletter-section {
      background: linear-gradient(135deg, #1e3a8a 0%, #0f172a 100%);
    }

    .newsletter-title {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 8px;
      color: var(--ink);
    }

    .newsletter-desc {
      color: var(--muted);
      margin-bottom: 20px;
      max-width: 500px;
      margin-left: auto;
      margin-right: auto;
    }

    .newsletter-form {
      display: flex;
      max-width: 400px;
      margin: 0 auto;
      gap: 10px;
    }

    .newsletter-input {
      flex: 1;
      padding: 12px 16px;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      font-family: inherit;
      font-size: 14px;
      background: var(--card);
      color: var(--ink);
    }

    .newsletter-btn {
      background: var(--accent);
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: var(--radius);
      cursor: pointer;
      font-weight: 600;
      transition: all 0.2s ease;
    }

    .newsletter-btn:hover {
      background: var(--accent-hover);
    }

    /* Social Sharing */
    .social-sharing {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }

    .share-btn {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 8px 12px;
      border-radius: var(--radius);
      background: #f1f5f9;
      color: var(--ink);
      font-size: 14px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .share-btn:hover {
      background: #e2e8f0;
      transform: translateY(-1px);
    }

    .share-btn.facebook { background: #f0f7ff; color: #1877f2; }
    .share-btn.twitter { background: #f0f9ff; color: #1da1f2; }
    .share-btn.whatsapp { background: #f0fff4; color: #25d366; }

    /* Stock Status */
    .stock-status {
      display: inline-block;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: 600;
      margin-bottom: 12px;
    }

    .in-stock {
      background: #dcfce7;
      color: #166534;
    }

    .low-stock {
      background: #fef3c7;
      color: #92400e;
    }

    .out-of-stock {
      background: #fee2e2;
      color: #991b1b;
    }

    /* Product SKU */
    .product-sku {
      color: var(--muted);
      font-size: 14px;
      margin-bottom: 8px;
    }

    /* Breadcrumb Navigation */
    .breadcrumb {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 20px;
      font-size: 14px;
      color: var(--muted);
    }

    .breadcrumb a {
      color: var(--accent);
    }

    .breadcrumb span {
      color: var(--muted-light);
    }

    /* Loading Spinner */
    .loading-spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 2px solid #f3f3f3;
      border-top: 2px solid var(--accent);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Price Filter */
    .price-filter {
      background: var(--card);
      border-radius: var(--radius);
      padding: 16px;
      margin-bottom: 20px;
      border: 1px solid var(--border);
    }

    .price-filter-title {
      font-weight: 600;
      margin-bottom: 12px;
      font-size: 16px;
    }

    .price-range {
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .price-input {
      flex: 1;
      background: var(--card);
      color: var(--ink);
    }

    /* Wishlist Button Active State - UPDATED TO RED */
    .wishlist-btn.active {
      color: var(--error) !important;
      background: #fee2e2 !important;
      border-color: var(--error) !important;
    }

    .wishlist-btn.active:hover {
      background: #fecaca !important;
    }

    /* Product Detail Page Wishlist Button - UPDATED TO RED */
    #detailWishlistBtn.active {
      background: var(--error) !important;
      color: white !important;
      border-color: var(--error) !important;
    }

    #detailWishlistBtn.active:hover {
      background: #dc2626 !important;
    }

    /* Size and Color Selection */
    .size-color-options {
      display: flex;
      gap: 12px;
      margin-bottom: 16px;
    }

    .size-option, .color-option {
      padding: 8px 12px;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      cursor: pointer;
      transition: all 0.2s ease;
      background: var(--card);
      color: var(--ink);
    }

    .size-option:hover, .color-option:hover {
      border-color: var(--accent);
    }

    .size-option.selected, .color-option.selected {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
    }

    /* Simple Price Range Slider */
    .price-range-slider {
      margin: 16px 0;
    }

    .price-slider {
      width: 100%;
      height: 5px;
      border-radius: 5px;
      background: #ddd;
      outline: none;
      -webkit-appearance: none;
    }

    .price-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: var(--accent);
      cursor: pointer;
    }

    .price-slider::-moz-range-thumb {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: var(--accent);
      cursor: pointer;
      border: none;
    }

    .price-range-values {
      display: flex;
      justify-content: space-between;
      margin-top: 8px;
      font-size: 14px;
      color: var(--muted);
    }

    /* Remove blue overlay from product images */
    .product-img-slider:focus,
    .product-detail-main-image:focus,
    .gallery-main:focus {
      outline: none;
      box-shadow: none;
    }

    /* Product image container fixes */
    .product-img-slider-container,
    .product-detail-gallery,
    .gallery-main {
      background-color: transparent !important;
    }

    /* NEW: Remove blue highlight from product and order pages */
    .card,
    .card-body,
    .product-img-slider-container,
    .gallery-main,
    .product-detail-main-image,
    .product-detail-thumbnail,
    .slider-item,
    .order-card,
    .order-detail-page {
      -webkit-tap-highlight-color: transparent;
      outline: none;
    }

    /* Keep blue highlight only for menu items */
    .menu-item {
      -webkit-tap-highlight-color: rgba(37, 99, 235, 0.1);
    }

    /* Size validation error styling */
    .size-validation-error {
      color: var(--error);
      font-size: 14px;
      margin-top: 8px;
      display: none;
    }

    .size-validation-error.show {
      display: block;
    }

    /* Cancel Order Flow Modal */
    .cancel-confirm-modal {
      background: var(--card);
      border-radius: var(--radius);
      padding: 24px;
      box-shadow: var(--shadow-hover);
      max-width: 500px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
    }

    .cancel-confirm-modal h3 {
      margin-top: 0;
      margin-bottom: 16px;
      color: var(--ink);
    }

    .cancel-confirm-modal .payment-charge-note {
      background: #fef3c7;
      border: 1px solid #f59e0b;
      border-radius: var(--radius);
      padding: 16px;
      margin: 16px 0;
      color: #92400e;
    }

    .cancel-confirm-modal .refund-calculation {
      background: #f8fafc;
      border-radius: var(--radius);
      padding: 16px;
      margin: 16px 0;
    }

    [data-theme="dark"] .cancel-confirm-modal .refund-calculation {
      background: #1e293b;
    }

    .cancel-confirm-modal .refund-calculation p {
      margin: 8px 0;
    }

    .cancel-confirm-actions {
      display: flex;
      gap: 12px;
      margin-top: 20px;
      justify-content: flex-end;
    }

    /* NEW: Login/Signup Modal Styles */
    .auth-modal {
      background: var(--card);
      border-radius: var(--radius);
      padding: 32px;
      box-shadow: var(--shadow-hover);
      max-width: 450px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
      position: relative;
    }
    
    .auth-modal h3 {
      margin-top: 0;
      margin-bottom: 24px;
      color: var(--ink);
      text-align: center;
      font-size: 24px;
    }
    
    .auth-tabs {
      display: flex;
      margin-bottom: 24px;
      border-bottom: 1px solid var(--border);
    }
    
    .auth-tab {
      flex: 1;
      padding: 12px;
      text-align: center;
      cursor: pointer;
      font-weight: 600;
      color: var(--muted);
      transition: all 0.2s ease;
      border-bottom: 2px solid transparent;
    }
    
    .auth-tab.active {
      color: var(--accent);
      border-bottom-color: var(--accent);
    }
    
    .auth-form {
      display: none;
    }
    
    .auth-form.active {
      display: block;
    }
    
    .auth-form-group {
      margin-bottom: 16px;
    }
    
    .auth-form-footer {
      margin-top: 24px;
      text-align: center;
      font-size: 14px;
      color: var(--muted);
    }
    
    .auth-form-footer a {
      color: var(--accent);
      cursor: pointer;
    }
    
    .user-profile {
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      position: relative;
    }
    
    .user-avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: var(--accent);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 14px;
    }
    
    .user-name {
      font-weight: 600;
      color: var(--ink);
    }
    
    /* Account Dropdown Menu */
    .account-dropdown {
      position: absolute;
      top: 100%;
      right: 0;
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow-hover);
      min-width: 200px;
      padding: 8px 0;
      margin-top: 8px;
      z-index: 100;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: all 0.2s ease;
    }
    
    .account-dropdown.active {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }
    
    .account-dropdown-item {
      display: flex;
      align-items: center;
      padding: 12px 16px;
      color: var(--ink);
      transition: all 0.2s ease;
      cursor: pointer;
    }
    
    .account-dropdown-item:hover {
      background: #f1f5f9;
    }
    
    .account-dropdown-item svg {
      margin-right: 12px;
      width: 16px;
      height: 16px;
    }
    
    /* NEW: Close button for auth modal */
    .auth-close {
      position: absolute;
      top: 16px;
      right: 16px;
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: var(--muted);
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: all 0.2s ease;
    }
    
    .auth-close:hover {
      background: #f1f5f9;
      color: var(--ink);
    }
    
    /* NEW: Google Sign-In Button */
    .google-signin-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      width: 100%;
      padding: 12px 16px;
      background: white;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      margin-top: 16px;
    }
    
    .google-signin-btn:hover {
      background: #f8fafc;
      border-color: var(--accent);
    }
    
    .google-signin-btn img {
      width: 18px;
      height: 18px;
    }
    
    .divider {
      display: flex;
      align-items: center;
      margin: 20px 0;
      color: var(--muted);
      font-size: 14px;
    }
    
    .divider::before,
    .divider::after {
      content: '';
      flex: 1;
      border-bottom: 1px solid var(--border);
    }
    
    .divider span {
      padding: 0 12px;
    }

    /* NEW: Image Zoom Modal */
    .zoom-modal {
      background: rgba(0, 0, 0, 0.9);
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    .zoom-content {
      position: relative;
      max-width: 90%;
      max-height: 90%;
    }
    
    .zoom-image {
      max-width: 100%;
      max-height: 90vh;
      object-fit: contain;
    }
    
    .zoom-close {
      position: absolute;
      top: 20px;
      right: 20px;
      background: rgba(255, 255, 255, 0.2);
      color: white;
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 20px;
      transition: all 0.2s ease;
    }
    
    .zoom-close:hover {
      background: rgba(255, 255, 255, 0.3);
    }
    
    .zoom-controls {
      position: absolute;
      bottom: 20px;
      left: 0;
      right: 0;
      display: flex;
      justify-content: center;
      gap: 10px;
    }
    
    .zoom-btn {
      background: rgba(255, 255, 255, 0.2);
      color: white;
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 18px;
      transition: all 0.2s ease;
    }
    
    .zoom-btn:hover {
      background: rgba(255, 255, 255, 0.3);
    }

    /* NEW: Enhanced Product Gallery */
    .product-gallery-zoom {
      position: relative;
      cursor: zoom-in;
    }
    
    .zoom-indicator {
      position: absolute;
      bottom: 10px;
      right: 10px;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .product-gallery-zoom:hover .zoom-indicator {
      opacity: 1;
    }

    /* NEW: Forgot Password Form Styles */
    .forgot-password-form {
      display: none;
    }
    
    .forgot-password-form.active {
      display: block;
    }
    
    .back-to-login {
      color: var(--accent);
      cursor: pointer;
      font-weight: 600;
      margin-top: 16px;
      text-align: center;
    }
    
    .back-to-login:hover {
      color: var(--accent-hover);
    }

    /* === Clean Animated Banners CSS === */
    .hero-messages {
      margin-top: 10px;
      font-size: 16px;
      color: var(--muted);
      font-weight: 600;
      display: flex;
      justify-content: center;
      gap: 24px;
      overflow: hidden;
      position: relative;
    }
    .hero-messages span {
      opacity: 0;
      position: absolute;
      transition: opacity 0.6s ease;
    }
    .hero-messages span.active {
      opacity: 1;
      position: relative;
    }

    .highlight-strip {
      margin-top: 16px;
      padding: 10px 16px;
      border-radius: 8px;
      background: linear-gradient(90deg,#2563eb,#1d4ed8);
      color: white;
      font-weight: 600;
      text-align: center;
      animation: pulseStrip 4s infinite;
      cursor: pointer;
    }
    @keyframes pulseStrip {
      0%,100% { box-shadow: 0 0 0 rgba(37,99,235,0); }
      50% { box-shadow: 0 0 16px rgba(37,99,235,0.35); }
    }

    /* Search Results Grid */
    #homeSearchResults {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
      margin-top: 20px;
    }

    /* Trending Now Section */
    .trending-section {
      margin: 30px 0;
    }

    .trending-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .trending-title {
      font-size: 20px;
      font-weight: 700;
    }

    /* NEW: Banner Carousel Styles */
    .banner-carousel {
      position: relative;
      width: 100%;
      height: 200px;
      border-radius: var(--radius);
      overflow: hidden;
      margin-bottom: 24px;
      box-shadow: var(--shadow);
    }

    .banner-track {
      display: flex;
      width: 100%;
      height: 100%;
      transition: transform 0.5s ease;
    }

    .banner-slide {
      min-width: 100%;
      height: 100%;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
    }

    .banner-controls {
      position: absolute;
      bottom: 15px;
      left: 0;
      right: 0;
      display: flex;
      justify-content: center;
      gap: 8px;
      z-index: 10;
    }

    .banner-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.5);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .banner-dot.active {
      background: rgba(255, 255, 255, 1);
      transform: scale(1.2);
    }

    /* NEW: Category Circles Styles */
    .category-circles {
      margin: 30px 0;
    }

    .category-circles-title {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 16px;
      text-align: center;
    }

    .category-circles-container {
      display: flex;
      gap: 20px;
      overflow-x: auto;
      padding: 10px 0;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }

    .category-circles-container::-webkit-scrollbar {
      display: none;
    }

    .category-circle {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      min-width: 80px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .category-circle:hover {
      transform: translateY(-5px);
    }

    .category-circle-image {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      border: 2px solid var(--border);
      transition: all 0.2s ease;
    }

    .category-circle:hover .category-circle-image {
      border-color: var(--accent);
    }

    .category-circle-name {
      font-size: 12px;
      font-weight: 600;
      text-align: center;
      color: var(--ink);
    }

    /* NEW: Contact WhatsApp Button */
    .whatsapp-contact-button {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: #25D366;
      color: white;
      padding: 12px 20px;
      border-radius: var(--radius);
      font-weight: 600;
      margin-top: 12px;
      transition: all 0.2s ease;
      cursor: pointer;
    }

    .whatsapp-contact-button:hover {
      background: #128C7E;
      transform: translateY(-2px);
    }

    /* NEW: Enhanced Product Image for Mobile */
    .product-detail-main-image.mobile-optimized {
      height: 60vh;
      max-height: 500px;
    }

    /* NEW: Professional Enhancements */
    .professional-badge {
      position: absolute;
      top: 10px;
      right: 10px;
      background: var(--accent);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 10px;
      font-weight: 700;
      z-index: 2;
    }

    .professional-tag {
      display: inline-block;
      background: var(--accent);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 10px;
      font-weight: 600;
      margin-left: 8px;
    }

    .professional-header {
      background: linear-gradient(135deg, var(--accent), var(--accent-hover));
      color: white;
      padding: 16px;
      border-radius: var(--radius);
      margin-bottom: 20px;
      text-align: center;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .header-inner {
        flex-wrap: wrap;
      }
      
      .search-wrap {
        margin-left: 0;
        order: 3;
        width: 100%;
        max-width: 100%;
      }
      
      .row {
        flex-direction: column;
      }
      
      /* Keep 2 columns on mobile */
      .product-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
      }
      
      .steps {
        gap: 6px;
      }
      
      .step-pill {
        font-size: 12px;
        padding: 8px 12px;
      }
      
      .policy-content {
        padding: 16px;
      }
      
      .categories {
        overflow-x: auto;
        padding-bottom: 8px;
        justify-content: flex-start;
      }

      .carousel-control {
        width: 32px;
        height: 32px;
        font-size: 14px;
      }
      
      .product-detail-container {
        flex-direction: column;
      }
      
      .product-detail-main-image {
        height: 60vh;
        max-height: 500px;
      }
      
      .order-details {
        flex-direction: column;
      }
      
      .order-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
      }
      
      .order-actions {
        justify-content: flex-start;
      }
      
      .cancellation-modal {
        padding: 16px;
      }
      
      .cancellation-actions {
        flex-direction: column;
      }
      
      .alert-modal {
        padding: 16px;
      }
      
      .alert-modal-buttons {
        flex-direction: column;
      }
      
      .quantity-control button {
        width: 36px;
        height: 36px;
      }
      
      /* Show menu icon on mobile */
      .menu-icon {
        display: flex;
      }
      
      /* Hide some CTA buttons on mobile to make space */
      .cta .btn:not(:last-child) {
        display: none;
      }
      
      /* Banner carousel mobile */
      .banner-carousel {
        height: 150px;
      }
      
      /* Category circles mobile */
      .category-circles-container {
        gap: 15px;
      }
      
      .category-circle {
        min-width: 70px;
      }
      
      .category-circle-image {
        width: 60px;
        height: 60px;
      }
    }

    @media (max-width: 480px) {
      .container {
        padding: 0 16px;
      }
      
      .hero {
        padding: 20px;
      }
      
      .card-panel {
        padding: 16px;
      }
      
      .product-detail-main-image {
        height: 50vh;
        max-height: 400px;
      }
      
      .product-detail-thumbnail {
        width: 60px;
        height: 60px;
      }
      
      /* Keep 2 columns on very small screens */
      .product-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
      }
      
      /* Banner carousel mobile */
      .banner-carousel {
        height: 120px;
      }
    }

    /* Copyright Section */
    .copyright {
      text-align: center;
      padding: 20px;
      background-color: var(--card);
      color: var(--muted);
      font-size: 14px;
      border-top: 1px solid var(--border);
      transition: var(--transition);
    }
  </style>

</head>
<body>
  <!-- Mobile Menu Overlay -->
  <div class="menu-overlay" id="menuOverlay"></div>
  
  <!-- Mobile Menu -->
  <div class="mobile-menu" id="mobileMenu">
    <div class="menu-header">
      <div class="brand">
        <span class="chip">BUYZO</span>
        <span>Cart</span>
      </div>
      <div class="menu-close" id="menuClose">×</div>
    </div>
    <div class="menu-items">
      <div class="menu-item" onclick="showPage('homePage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
          <polyline points="9 22 9 12 15 12 15 22"></polyline>
        </svg>
        Home
      </div>
      <div class="menu-item" onclick="showPage('productsPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="3" y="3" width="7" height="7"></rect>
          <rect x="14" y="3" width="7" height="7"></rect>
          <rect x="14" y="14" width="7" height="7"></rect>
          <rect x="3" y="14" width="7" height="7"></rect>
        </svg>
        Products
      </div>
      <div class="menu-item" onclick="showMyOrders(); showPage('myOrdersPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="9" cy="21" r="1"></circle>
          <circle cx="20" cy="21" r="1"></circle>
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
        </svg>
        My Orders
      </div>
      <div class="menu-item" onclick="showPage('wishlistPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
        </svg>
        Wishlist
      </div>
      <div class="menu-item" onclick="showPage('cancellationPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="15" y1="9" x2="9" y2="15"></line>
          <line x1="9" y1="9" x2="15" y2="15"></line>
        </svg>
        Refund & Cancellation
      </div>
      <div class="menu-item" onclick="showPage('termsPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
          <polyline points="10 9 9 9 8 9"></polyline>
        </svg>
        Terms & Conditions
      </div>
      <div class="menu-item" onclick="showPage('shippingPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 15a5 5 0 0 1 5-5h8a5 5 0 0 1 5 5v0a5 5 0 0 1-5 5H8a5 5 0 0 1-5-5v0z"></path>
          <path d="M3 15V9a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v6"></path>
          <path d="M9 19h6"></path>
        </svg>
        Shipping Policy
      </div>
      <div class="menu-item" onclick="showPage('privacyPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
        </svg>
        Privacy Policy
      </div>
      <div class="menu-item" onclick="showPage('contactPage'); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
          <polyline points="22,6 12,13 2,6"></polyline>
        </svg>
        Contact Us
      </div>
      
      <!-- Login/Signup at the bottom of mobile menu -->
      <div class="menu-item" id="mobileLoginBtn" onclick="showLoginModal(); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
          <circle cx="12" cy="7" r="4"></circle>
        </svg>
        Login / Sign Up
      </div>
      <div class="menu-item" id="mobileUserProfile" style="display:none;" onclick="toggleUserMenu(); closeMenu();">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
          <circle cx="12" cy="7" r="4"></circle>
        </svg>
        <span id="mobileUserName">User</span>
      </div>
    </div>
  </div>

  <header>
    <div class="header-inner">
      <div class="menu-icon" id="menuIcon">
        <span></span>
        <span></span>
        <span></span>
      </div>
      <div class="brand" aria-label="Buyzo Cart brand" onclick="showPage('homePage')">
        <span class="chip">BUYZO</span>
        <span>Cart</span>
      </div>
      <div class="cta">
        <!-- Theme Toggle Button -->
        <button class="theme-toggle" id="themeToggle" title="Toggle Light/Dark Mode">
          <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
          </svg>
          <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
          </svg>
        </button>
        
        <button class="btn secondary" id="openContactTop" title="Contact">Contact</button>
        <button class="btn secondary" id="openMyOrdersTop" title="My Orders">My Orders
          <span id="ordersNotification" class="notification-badge" style="display:none"></span>
        </button>
        <!-- Login/Signup buttons -->
        <button class="btn secondary" id="openLoginTop" title="Login">Login</button>
        <div class="user-profile" id="userProfile" style="display:none;">
          <div class="user-avatar" id="userAvatar">U</div>
          <div class="user-name" id="userName">User</div>
          <div class="account-dropdown" id="accountDropdown">
            <div class="account-dropdown-item" id="accountEmail">user@example.com</div>
            <div class="account-dropdown-item" onclick="showPage('myOrdersPage')">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="9" cy="21" r="1"></circle>
                <circle cx="20" cy="21" r="1"></circle>
                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
              </svg>
              My Orders
            </div>
            <div class="account-dropdown-item" onclick="showPage('wishlistPage')">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
              </svg>
              Wishlist
            </div>
            <div class="account-dropdown-item" onclick="logout()">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
              </svg>
              Logout
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- Home Page -->
    <section class="page active" id="homePage">
      
      <section class="hero">
        <h1>Welcome to <span style="color:var(--accent)">Buyzo Cart</span></h1>
        <p>Clean, fast checkout. Hand‑picked products. Fully responsive UI.</p>

        <!-- Rotating subtle messages -->
        <div class="hero-messages" id="heroMessages">
          <span class="active">🔥 Big Sale Today</span>
          <span>🚚 Free Shipping over ₹999</span>
          <span>✨ New Arrivals Just Dropped</span>
        </div>

        <!-- Highlight CTA strip -->
        <div class="highlight-strip" onclick="showPage('productsPage')">
          Limited Time Offer: Flat 40% OFF on all Fashion Items — <u>Shop Now →</u>
        </div>
      </section>

      <!-- NEW: Banner Carousel -->
      <div class="banner-carousel" id="bannerCarousel">
        <div class="banner-track" id="bannerTrack"></div>
        <div class="banner-controls" id="bannerControls"></div>
      </div>

      <!-- TRENDING NOW SECTION -->
      <div class="trending-section">
        <div class="trending-header">
          <h2 class="trending-title">Trending Now</h2>
        </div>
        <div class="slider-container">
          <div class="slider-track" id="productSlider"></div>
        </div>
      </div>

      <!-- NEW: Category Circles Section -->
      <div class="category-circles">
        <h2 class="category-circles-title">Shop by Category</h2>
        <div class="category-circles-container" id="categoryCirclesContainer"></div>
      </div>

      <!-- SEARCH BAR -->
      <div class="search-wrap">
        <input id="homeSearchInput" placeholder="Search products (e.g. 'Sneakers', 'T-shirt', 'Earbuds')" />
      </div>

      <!-- Search Results Grid -->
      <div id="homeSearchResults" style="display:none;"></div>

      <div class="steps center">
        <div class="step-pill" id="pill-products">1 • Products</div>
        <div class="step-pill disabled" id="pill-order">2 • Order Details</div>
        <div class="step-pill disabled" id="pill-user">3 • Your Info</div>
        <div class="step-pill disabled" id="pill-pay">4 • Payment</div>
      </div>

      <div class="card-panel" style="display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap">
        <h2 style="margin:0">Featured Products</h2>
      </div>

      <!-- Featured Products Grid -->
      <div class="product-grid" id="homeProductGrid">
        <!-- Product cards will be loaded here -->
      </div>

      <!-- Recently Viewed Products Section -->
      <div class="recently-viewed" id="recentlyViewedSection" style="display:none;">
        <h2 class="recently-viewed-title">Recently Viewed</h2>
        <div class="slider-container">
          <div class="slider-track" id="recentlyViewedSlider"></div>
        </div>
      </div>

      <!-- Newsletter Subscription Section -->
      <div class="newsletter-section">
        <h2 class="newsletter-title">Stay Updated</h2>
        <p class="newsletter-desc">Subscribe to our newsletter for exclusive deals, new arrivals, and special offers delivered to your inbox.</p>
        <div class="newsletter-form">
          <input type="email" class="newsletter-input" placeholder="Enter your email" id="newsletterEmail" />
          <button class="newsletter-btn" id="subscribeBtn">Subscribe</button>
        </div>
      </div>
    </section>

    <!-- Products Page -->
    <section class="page" id="productsPage">
      <div class="card-panel" style="display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap">
        <h2 style="margin:0">All Products</h2>
      </div>

      <!-- Price Filter - Simplified -->
      <div class="price-filter">
        <div class="price-filter-title">Filter by Price</div>
        <div class="price-range-slider">
          <input type="range" min="0" max="5000" value="0" class="price-slider" id="minPriceSlider">
          <input type="range" min="0" max="5000" value="5000" class="price-slider" id="maxPriceSlider">
          <div class="price-range-values">
            <span id="minPriceValue">₹0</span>
            <span id="maxPriceValue">₹5000</span>
          </div>
        </div>
        <div class="price-range" style="margin-top: 12px;">
          <input type="number" class="price-input" id="minPrice" placeholder="Min" min="0" />
          <span>to</span>
          <input type="number" class="price-input" id="maxPrice" placeholder="Max" min="0" />
          <button class="btn secondary" id="applyPriceFilter">Apply</button>
          <button class="btn secondary" id="resetPriceFilter">Reset</button>
        </div>
      </div>

      <!-- Search bar -->
      <div class="search-wrap">
        <input id="searchInput" placeholder="Search products (e.g. 'Sneakers', 'T-shirt', 'Earbuds')" />
      </div>

      <!-- Category Navigation -->
      <div class="categories" id="categoriesContainer">
        <!-- Categories will be loaded from Firebase by admin -->
      </div>

      <div class="product-grid" id="productGrid">
        <!-- Product cards will be loaded here -->
      </div>
    </section>

    <!-- Product Detail Page -->
    <section class="page" id="productDetailPage">
      <div class="product-detail-page">
        <!-- Breadcrumb Navigation -->
        <div class="breadcrumb">
          <a href="#" onclick="showPage('homePage')">Home</a>
          <span>></span>
          <a href="#" onclick="showPage('productsPage')">Products</a>
          <span>></span>
          <span id="breadcrumbProductName">Product Details</span>
        </div>
        
        <div class="back-to-products" onclick="showPage('productsPage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Products
        </div>
        
        <div class="product-detail-container">
          <div class="product-detail-gallery">
            <!-- Enhanced gallery with zoom -->
            <div class="product-gallery-zoom">
              <div class="product-detail-main-image mobile-optimized" id="detailMainImage" onclick="openImageZoom()">
                <button class="detail-carousel-control prev">&#10094;</button>
                <button class="detail-carousel-control next">&#10095;</button>
                <div class="detail-carousel-dots" id="detailCarouselDots"></div>
                <div class="zoom-indicator">Click to zoom</div>
              </div>
            </div>
            <div class="product-detail-thumbnails" id="detailThumbnails"></div>
          </div>
          
          <div class="product-detail-info">
            <h1 class="product-detail-title" id="detailTitle"></h1>
            <!-- Product SKU -->
            <div class="product-sku" id="detailSku"></div>
            <div class="product-detail-price" id="detailPrice"></div>
            <!-- Stock Status -->
            <div class="stock-status in-stock" id="detailStockStatus">In Stock</div>
            <div class="product-detail-desc" id="detailDesc"></div>
            <div class="product-detail-full-desc" id="detailFullDesc"></div>
            
            <!-- NEW: Share Link Section -->
            <div class="product-detail-meta" style="margin-top: 20px;">
              <h4>Share This Product</h4>
              <div style="display: flex; gap: 10px; margin-top: 10px;">
                <input type="text" id="productShareLink" readonly style="flex: 1; padding: 10px; border: 1px solid var(--border); border-radius: var(--radius); background: #f8fafc;">
                <button class="btn secondary" id="copyShareLink">Copy Link</button>
              </div>
            </div>
            
            <!-- Social Sharing Buttons -->
            <div class="social-sharing">
              <button class="share-btn facebook" data-platform="facebook">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                </svg>
                Share
              </button>
              <button class="share-btn twitter" data-platform="twitter">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
                </svg>
                Tweet
              </button>
              <button class="share-btn whatsapp" data-platform="whatsapp">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.150-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
                </svg>
                Share
              </button>
            </div>
            
            <div style="display:flex;gap:12px;flex-wrap:wrap;margin-top:20px;">
              <button class="btn" id="detailOrderBtn">Order Now</button>
              <button class="btn secondary" id="detailWishlistBtn">Add to Wishlist</button>
              <button class="btn secondary" onclick="showPage('productsPage')">Continue Shopping</button>
            </div>
          </div>
        </div>

        <!-- Similar Products Section -->
        <div class="similar-products">
          <h2 class="similar-title">Similar Products</h2>
          <div class="slider-container">
            <div class="slider-track" id="similarProductsSlider"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Order Details Page -->
    <section class="page" id="orderPage">
      <div class="card-panel">
        <h3 style="margin-top:0">Order Details</h3>
        <p style="color:var(--muted)">Choose size/quantity and confirm product before entering contact or payment details.</p>

        <div id="selectedProductCard" class="card" style="margin-bottom:16px">
          <div style="display:flex;gap:16px;flex-direction:column">
            <div id="galleryMain" class="gallery-main">
              <button class="carousel-control prev">&#10094;</button>
              <button class="carousel-control next">&#10095;</button>
              <div class="carousel-dots"></div>
            </div>
          </div>
          <div class="card-body">
            <div class="title" id="spTitle"></div>
            <div class="price" id="spPrice"></div>
            <div class="badge" id="spDesc"></div>
            
            <!-- Product Details Section -->
            <div class="product-details">
              <h4>Product Details</h4>
              <p id="spFullDesc"></p>
            </div>

            <div style="margin-top:auto">
              <!-- Updated: Size/Color Selection -->
              <label>Select size / colour</label>
              <div class="size-color-options">
                <div class="size-option selected" data-value="S">S</div>
                <div class="size-option" data-value="M">M</div>
                <div class="size-option" data-value="L">L</div>
                <div class="size-option" data-value="XL">XL</div>
              </div>
              <div class="size-validation-error" id="sizeValidationError">Please select a size to continue</div>

            <div style="height:12px"></div>
              <label>Quantity</label>
              <!-- Replaced with plus/minus quantity control -->
              <div class="quantity-control">
                <button class="qty-minus">-</button>
                <input type="number" id="qtySelect" min="1" value="1" max="10" readonly>
                <button class="qty-plus">+</button>
              </div>

              <div style="height:16px"></div>
              <div style="display:flex;gap:10px;flex-wrap:wrap">
                <button id="toUserInfo" class="btn" style="flex:1">Continue → Provide Your Info</button>
                <button id="backToProducts" class="btn secondary" style="flex:1">Back to Products</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- User Info Page -->
    <section class="page" id="userPage">
      <div class="card-panel">
        <h3 style="margin-top:0">Your Contact & Delivery Address</h3>
        <p style="color:var(--muted)">We do not use saved addresses. Please provide a fresh delivery address for this order.</p>

        <div style="display:flex;gap:16px;flex-direction:column">
          <div>
            <label>Full Name *</label>
            <input id="fullname" placeholder="Enter full name" />
          </div>
          <div class="row">
            <div class="col"><label>Mobile Number *</label><input id="mobile" placeholder="10-digit mobile number" /></div>
            <div class="col"><label>Pincode *</label><input id="pincode" placeholder="Pincode" /></div>
          </div>
          <div class="row">
            <div class="col"><label>City *</label><input id="city" /></div>
            <div class="col"><label>State *</label><input id="state" /></div>
          </div>
          <div>
            <label>House / Street *</label>
            <input id="house" />
          </div>
          <div style="display:flex;gap:10px;margin-top:16px;flex-wrap:wrap">
            <button id="toPayment" class="btn" style="flex:1">Continue to Payment</button>
            <button id="editOrder" class="btn secondary" style="flex:1">Edit Order Details</button>
            <button id="saveUserInfo" class="btn secondary" style="flex:1">Save Information</button>
          </div>
          <div style="margin-top:16px;color:var(--muted);font-size:14px">
            <strong>Note:</strong> If you prefer to change products, click "Edit Order Details" or use "Products" to go back.
          </div>
        </div>
      </div>
    </section>

    <!-- Payment Page -->
    <section class="page" id="paymentPage">
      <div class="card-panel">
        <h3 style="margin-top:0">Payment Method</h3>
        <div style="display:flex;gap:12px;flex-wrap:wrap;margin-bottom:16px">
          <label style="flex:1;display:flex;align-items:center;gap:8px;padding:12px;border:1px solid var(--border);border-radius:var(--radius);cursor:pointer;">
            <input type="radio" name="pay" value="prepaid" checked /> Prepaid (UPI / Card)
          </label>
          <label style="flex:1;display:flex;align-items:center;gap:8px;padding:12px;border:1px solid var(--border);border-radius:var(--radius);cursor:pointer;">
            <input type="radio" name="pay" value="cod" /> Cash on Delivery (Note: may increase processing time)
          </label>
        </div>
        
        <div class="summary">
          <div style="display:flex;justify-content:space-between;margin-bottom:8px"><div>Product</div><div id="sumProduct">-</div></div>
          <div style="display:flex;justify-content:space-between;margin-bottom:8px"><div>Qty</div><div id="sumQty">-</div></div>
          <div style="display:flex;justify-content:space-between;margin-bottom:8px"><div>Price</div><div id="sumPrice">-</div></div>
          <div style="display:flex;justify-content:space-between;margin-bottom:12px;padding-bottom:8px;border-bottom:1px dashed var(--border)"><div>Delivery</div><div id="sumDel">₹50</div></div>
          <div style="display:flex;justify-content:space-between;font-weight:700;margin-top:8px;font-size:18px"><div>Total</div><div id="sumTotal">-</div></div>
        </div>
        
        <div style="height:16px"></div>
        <div style="display:flex;gap:12px;flex-wrap:wrap">
          <button id="confirmOrder" class="btn" style="flex:1">Confirm & Place Order</button>
          <button id="payBack" class="btn secondary" style="flex:1">Back</button>
        </div>
      </div>
    </section>

    <!-- Order Success (hidden) -->
    <section class="page center" id="successPage">
      <div class="card-panel" style="max-width:520px;margin:32px auto;padding:32px">
        <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="var(--success)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin:0 auto 16px">
          <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
          <polyline points="22 4 12 14.01 9 11.01"></polyline>
        </svg>
        <div style="font-size:24px;font-weight:700;color:var(--success);margin-bottom:8px">Thank You for Your Order!</div>
        <div style="margin-top:10px;color:var(--muted)">Your order has been placed successfully! We will confirm and process your order. Tracking will be shared once supplier ships it.</div>
        <div style="margin-top:24px;display:flex;gap:12px;justify-content:center;flex-wrap:wrap">
          <button id="goHome" class="btn">Back to Home</button>
          <button id="viewOrders" class="btn secondary">View My Orders</button>
        </div>
      </div>
    </section>

    <!-- My Orders Page -->
    <section class="page" id="myOrdersPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        
        <div class="orders-container">
          <h2>My Orders</h2>
          <p style="color:var(--muted);margin-bottom:24px">View and manage your recent orders</p>
          
          <div id="ordersList">
            <!-- Orders will be dynamically inserted here -->
          </div>
          
          <div id="noOrders" class="card-panel center" style="display:none">
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--muted-light)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="9" cy="21" r="1"></circle>
              <circle cx="20" cy="21" r="1"></circle>
              <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
            </svg>
            <h3 style="margin:16px 0 8px;color:var(--muted)">No orders yet</h3>
            <p style="color:var(--muted-light)">You haven't placed any orders yet. Start shopping to see your orders here.</p>
            <button class="btn" style="margin-top:16px" onclick="showPage('productsPage')">Start Shopping</button>
            </div>
        </div>
      </div>
    </section>

    <!-- Order Detail Page -->
    <section class="page" id="orderDetailPage">
      <div class="policy-page">
        <div class="back-button" onclick="showMyOrders(); showPage('myOrdersPage');">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to My Orders
        </div>
        
        <div class="orders-container">
          <h2>Order Details</h2>
          
          <div class="order-detail-page" id="orderDetailContent">
            <!-- Order details will be dynamically inserted here -->
          </div>
        </div>
      </div>
    </section>

    <!-- Wishlist Page -->
    <section class="page" id="wishlistPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        
        <div class="orders-container">
          <h2>My Wishlist</h2>
          <p style="color:var(--muted);margin-bottom:24px">Your favorite products</p>
          
          <div id="wishlistGrid" class="product-grid">
            <!-- Wishlist items will be dynamically inserted here -->
          </div>
          
          <div id="noWishlist" class="card-panel center" style="display:none">
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--muted-light)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
            <h3 style="margin:16px 0 8px;color:var(--muted)">Your wishlist is empty</h3>
            <p style="color:var(--muted-light)">Start adding products to your wishlist to see them here.</p>
            <button class="btn" style="margin-top:16px" onclick="showPage('productsPage')">Start Shopping</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Policy Pages -->
    <section class="page" id="contactPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        <div class="policy-content">
          <h2>Contact Us</h2>
          <p>We're here to help and answer any questions you might have. We look forward to hearing from you.</p>
          
          <h3>Get in Touch</h3>
          <p>If you have any questions about our products, shipping, returns, or anything else, don't hesitate to reach out.</p>
          
          <h3>Customer Support</h3>
          <p>Email: support@buyzocart.com</p>
          <p>Phone: +91 98765 43210</p>
          <p>Business Hours: Monday - Friday, 9:00 AM - 6:00 PM IST</p>
          
          <h3>WhatsApp Support</h3>
          <p>For faster response, you can message us on WhatsApp:</p>
          <div class="whatsapp-contact-button" id="whatsappContact">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.150-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
            </svg>
            Message us on WhatsApp
          </div>
          
          <h3>Response Time</h3>
          <p>We typically respond to all inquiries within 24 hours during business days. For urgent matters, please use our WhatsApp support for the fastest response.</p>
        </div>
      </div>
    </section>

    <section class="page" id="cancellationPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        <div class="policy-content">
          <h2>Refund & Cancellation Policy</h2>
          <p>We want you to be completely satisfied with your purchase. Please read our refund and cancellation policy carefully.</p>
          
          <h3>Cancellation Policy</h3>
          <p>You can cancel your order within 24 hours of placing it, provided it hasn't been shipped yet. Once an order is shipped, cancellation is not possible.</p>
          
          <h3>Refund Policy</h3>
          <p>We offer refunds in the following cases:</p>
          <ul>
            <li>If you cancel your order within the cancellation period</li>
            <li>If the product received is damaged or defective</li>
            <li>If the wrong product was shipped</li>
            <li>If the product doesn't match the description</li>
          </ul>
          
          <h3>Refund Process</h3>
          <p>Once your return is received and inspected, we will send you an email to notify you that we have received your returned item. We will also notify you of the approval or rejection of your refund.</p>
          <p>If approved, your refund will be processed, and a credit will automatically be applied to your original method of payment within 7-10 business days.</p>
          
          <h3>Non-Refundable Items</h3>
          <p>Certain items are non-refundable:</p>
          <ul>
            <li>Gift cards</li>
            <li>Downloadable software products</li>
            <li>Some health and personal care items</li>
            <li>Personalized or custom-made products</li>
          </ul>
          
          <h3>Late or Missing Refunds</h3>
          <p>If you haven't received a refund yet, first check your bank account again. Then contact your credit card company, as it may take some time before your refund is officially posted. Next, contact your bank. There is often some processing time before a refund is posted. If you've done all of this and you still have not received your refund, please contact us at support@buyzocart.com.</p>
        </div>
      </div>
    </section>

    <section class="page" id="termsPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        <div class="policy-content">
          <h2>Terms & Conditions</h2>
          <p>Please read these terms and conditions carefully before using our service.</p>
          
          <h3>Interpretation and Definitions</h3>
          <p>The words of which the initial letter is capitalized have meanings defined under the following conditions. The following definitions shall have the same meaning regardless of whether they appear in singular or in plural.</p>
          
          <h3>Acknowledgement</h3>
          <p>By accessing or using the Service you agree to be bound by these Terms. If you disagree with any part of the Terms then you may not access the Service.</p>
          
          <h3>User Accounts</h3>
          <p>When you create an account with us, you must provide us information that is accurate, complete, and current at all times. Failure to do so constitutes a breach of the Terms, which may result in immediate termination of your account on our Service.</p>
          
          <h3>Intellectual Property</h3>
          <p>The Service and its original content (excluding Content provided by users), features and functionality are and will remain the exclusive property of Buyzo Cart and its licensors.</p>
          
          <h3>Links to Other Web Sites</h3>
          <p>Our Service may contain links to third-party web sites or services that are not owned or controlled by Buyzo Cart.</p>
          <p>Buyzo Cart has no control over, and assumes no responsibility for, the content, privacy policies, or practices of any third party web sites or services. You further acknowledge and agree that Buyzo Cart shall not be responsible or liable, directly or indirectly, for any damage or loss caused or alleged to be caused by or in connection with use of or reliance on any such content, goods or services available on or through any such web sites or services.</p>
          
          <h3>Termination</h3>
          <p>We may terminate or suspend your account immediately, without prior notice or liability, for any reason whatsoever, including without limitation if you breach the Terms.</p>
          
          <h3>Limitation of Liability</h3>
          <p>In no event shall Buyzo Cart, nor its directors, employees, partners, agents, suppliers, or affiliates, be liable for any indirect, incidental, special, consequential or punitive damages, including without limitation, loss of profits, data, use, goodwill, or other intangible losses, resulting from your access to or use of or inability to access or use the Service.</p>
          
          <h3>Governing Law</h3>
          <p>These Terms shall be governed and construed in accordance with the laws of India, without regard to its conflict of law provisions.</p>
          
          <h3>Changes to Terms</h3>
          <p>We reserve the right, at our sole discretion, to modify or replace these Terms at any time. If a revision is material we will try to provide at least 30 days' notice prior to any new terms taking effect. What constitutes a material change will be determined at our sole discretion.</p>
          
          <h3>Contact Us</h3>
          <p>If you have any questions about these Terms, please contact us at support@buyzocart.com.</p>
        </div>
      </div>
    </section>

    <section class="page" id="shippingPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        <div class="policy-content">
          <h2>Shipping Policy</h2>
          <p>We aim to process and ship your orders as quickly as possible. Please review our shipping policy for details on delivery times and charges.</p>
          
          <h3>Processing Time</h3>
          <p>All orders are processed within 1-2 business days. Orders are not shipped or delivered on weekends or holidays.</p>
          <p>If we are experiencing a high volume of orders, shipments may be delayed by a few days. Please allow additional days in transit for delivery. If there will be a significant delay in shipment of your order, we will contact you via email or telephone.</p>
          
          <h3>Shipping Rates and Delivery Estimates</h3>
          <p>Shipping charges for your order will be calculated and displayed at checkout.</p>
          <p>We offer free standard shipping on orders over ₹999. For orders below ₹999, a flat shipping fee of ₹50 applies.</p>
          
          <h3>Shipment Confirmation & Order Tracking</h3>
          <p>You will receive a Shipment Confirmation email once your order has shipped containing your tracking number(s). The tracking number will be active within 24 hours.</p>
          
          <h3>Shipping Restrictions</h3>
          <p>We currently ship to all major cities and towns in India. For remote locations, additional delivery time may be required.</p>
          
          <h3>Damaged or Lost Packages</h3>
          <p>Buyzo Cart is not liable for any products damaged or lost during shipping. If you received your order damaged, please contact the shipment carrier to file a claim.</p>
          <p>Please save all packaging materials and damaged goods before filing a claim.</p>
          
          <h3>International Shipping</h3>
          <p>We currently do not ship outside India.</p>
          
          <h3>Return Policy</h3>
          <p>Please refer to our Return Policy for more information on returning products (if applicable).</p>
        </div>
      </div>
    </section>

    <section class="page" id="privacyPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        <div class="policy-content">
          <h2>Privacy Policy</h2>
          <p>Your privacy is important to us. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you visit our website.</p>
          
          <h3>Information We Collect</h3>
          <p>We may collect information about you in a variety of ways. The information we may collect via the Service includes:</p>
          
          <h4>Personal Data</h4>
          <p>Personally identifiable information, such as your name, shipping address, email address, and telephone number, that you voluntarily give to us when you register with the Service or when you choose to participate in various activities related to the Service.</p>
          
          <h4>Derivative Data</h4>
          <p>Information our servers automatically collect when you access the Service, such as your IP address, your browser type, your operating system, your access times, and the pages you have viewed directly before and after accessing the Service.</p>
          
          <h3>Use of Your Information</h3>
          <p>Having accurate information about you permits us to provide you with a smooth, efficient, and customized experience. Specifically, we may use information collected about you via the Service to:</p>
          <ul>
            <li>Create and manage your account.</li>
            <li>Process your transactions.</li>
            <li>Email you regarding your account or order.</li>
            <li>Enable user-to-user communications.</li>
            <li>Generate a personal profile about you to make future visits to the Service more personalized.</li>
            <li>Increase the efficiency and operation of the Service.</li>
            <li>Monitor and analyze usage and trends to improve your experience with the Service.</li>
            <li>Notify you of updates to the Service.</li>
            <li>Offer new products, services, and/or recommendations to you.</li>
            <li>Perform other business activities as needed.</li>
          </ul>
          
          <h3>Disclosure of Your Information</h3>
          <p>We may share information we have collected about you in certain situations. Your information may be disclosed as follows:</p>
          
          <h4>By Law or to Protect Rights</h4>
          <p>If we believe the release of information about you is necessary to respond to legal process, to investigate or remedy potential violations of our policies, or to protect the rights, property, and safety of others, we may share your information as permitted or required by any applicable law, rule, or regulation.</p>
          
          <h3>Security of Your Information</h3>
          <p>We use administrative, technical, and physical security measures to help protect your personal information. While we have taken reasonable steps to secure the personal information you provide to us, please be aware that despite our efforts, no security measures are perfect or impenetrable, and no method of data transmission can be guaranteed against any interception or other type of misuse.</p>
          
          <h3>Policy for Children</h3>
          <p>We do not knowingly solicit information from or market to children under the age of 13. If you become aware of any data we have collected from children under age 13, please contact us using the contact information provided below.</p>
          
          <h3>Changes to This Privacy Policy</h3>
          <p>We may update this Privacy Policy from time to time in order to reflect, for example, changes to our practices or for other operational, legal, or regulatory reasons.</p>
          
          <h3>Contact Us</h3>
          <p>If you have questions or comments about this Privacy Policy, please contact us at:</p>
          <p>support@buyzocart.com</p>
        </div>
      </div>
    </section>

    <!-- About Us Page -->
    <section class="page" id="aboutPage">
      <div class="policy-page">
        <div class="back-button" onclick="showPage('homePage')">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Home
        </div>
        <div class="policy-content">
          <h2>About Us</h2>
          <p>Welcome to Buyzo Cart, your trusted destination for quality products and exceptional shopping experiences.</p>
          
          <h3>Our Story</h3>
          <p>Founded in 2023, Buyzo Cart began with a simple mission: to make online shopping more accessible, convenient, and enjoyable for everyone. We started as a small team passionate about e-commerce and have grown into a platform that serves thousands of customers across India.</p>
          
          <h3>Our Mission</h3>
          <p>Our mission is to provide high-quality products at competitive prices, delivered with excellent customer service. We believe that everyone deserves access to great products without compromising on quality or service.</p>
          
          <h3>Our Values</h3>
          <ul>
            <li><strong>Customer First:</strong> Our customers are at the heart of everything we do.</li>
            <li><strong>Quality Assurance:</strong> We carefully select each product to ensure it meets our high standards.</li>
            <li><strong>Transparency:</strong> We believe in honest pricing and clear communication.</li>
            <li><strong>Innovation:</strong> We continuously improve our platform to enhance your shopping experience.</li>
          </ul>
          
          <h3>Why Choose Us?</h3>
          <p>At Buyzo Cart, we stand out because of our commitment to:</p>
          <ul>
            <li>Curated product selection</li>
            <li>Competitive pricing</li>
            <li>Fast and reliable delivery</li>
            <li>Responsive customer support</li>
            <li>Secure payment options</li>
            <li>Easy returns and refunds</li>
          </ul>
          
          <h3>Our Team</h3>
          <p>Our diverse team of professionals brings together expertise in e-commerce, technology, customer service, and logistics to create the best possible shopping experience for you.</p>
          
          <h3>Contact Information</h3>
          <p>Have questions or feedback? We'd love to hear from you!</p>
          <p>Email: support@buyzocart.com</p>
          <p>Phone: +91 98765 43210</p>
          <p>Business Hours: Monday - Friday, 9:00 AM - 6:00 PM IST</p>
        </div>
      </div>
    </section>
  </main>

  <!-- About Us Section -->
  <div class="about-us">
    <h3>About Buyzo Cart</h3>
    <p>We are committed to providing quality products with fast delivery and excellent customer service. Shop with confidence knowing we stand behind every product we sell.</p>
  </div>

  <!-- Footer -->
  <footer>
    <div style="display:flex;justify-content:center;gap:24px;flex-wrap:wrap;margin-bottom:16px">
      <a href="#" onclick="showPage('contactPage')">Contact</a>
      <a href="#" onclick="showPage('cancellationPage')">Refund & Cancellation</a>
      <a href="#" onclick="showPage('termsPage')">Terms & Conditions</a>
      <a href="#" onclick="showPage('shippingPage')">Shipping Policy</a>
      <a href="#" onclick="showPage('privacyPage')">Privacy Policy</a>
      <a href="#" onclick="showPage('aboutPage')">About Us</a>
    </div>
    <div style="color:var(--muted-light)">© 2023 Buyzo Cart. All rights reserved.</div>
  </footer>

  <!-- Copyright Section -->
  <div class="copyright">
    <div>© 2023 Buyzo Cart. All Rights Reserved.</div>
  </div>

  <!-- Toast Notification -->
  <div class="toast" id="toast"></div>

  <!-- Cancellation Modal -->
  <div class="modal-overlay" id="cancellationModal">
    <div class="cancellation-modal">
      <h3>Cancel Order</h3>
      <p style="margin-bottom:16px">Please select a reason for cancellation:</p>
      
      <div class="cancellation-reason" onclick="selectCancellationReason(this)">
        <input type="radio" name="cancelReason" value="Changed my mind"> Changed my mind
      </div>
      <div class="cancellation-reason" onclick="selectCancellationReason(this)">
        <input type="radio" name="cancelReason" value="Found better price"> Found better price elsewhere
      </div>
      <div class="cancellation-reason" onclick="selectCancellationReason(this)">
        <input type="radio" name="cancelReason" value="Delivery time too long"> Delivery time is too long
      </div>
      <div class="cancellation-reason" onclick="selectCancellationReason(this)">
        <input type="radio" name="cancelReason" value="Ordered by mistake"> Ordered by mistake
      </div>
      <div class="cancellation-reason" onclick="selectCancellationReason(this)">
        <input type="radio" name="cancelReason" value="Other"> Other reason
      </div>
      
      <div class="cancellation-actions">
        <button class="btn secondary" onclick="closeCancellationModal()">Close</button>
        <button class="btn error" id="confirmCancelBtn" disabled>Confirm Cancellation</button>
      </div>
    </div>
  </div>

  <!-- Cancel Order Confirmation Modal -->
  <div class="modal-overlay" id="cancelConfirmModal">
    <div class="cancel-confirm-modal">
      <h3>Cancel Order Confirmation</h3>
      <p>Are you sure you want to cancel this order?</p>
      
      <div class="payment-charge-note">
        <strong>Note:</strong> A payment gateway charge of ₹10 will be deducted from your refund amount for prepaid orders.
      </div>
      
      <div class="refund-calculation">
        <p><strong>Refund Calculation:</strong></p>
        <p>Order Amount: <span id="refundOrderAmount">₹0</span></p>
        <p>Payment Gateway Charge: ₹10</p>
        <p><strong>Total Refund: <span id="refundTotalAmount">₹0</span></strong></p>
      </div>
      
      <div class="cancel-confirm-actions">
        <button class="btn secondary" onclick="closeCancelConfirmModal()">Cancel</button>
        <button class="btn error" id="finalConfirmCancelBtn">Yes, Cancel Order</button>
      </div>
    </div>
  </div>

  <!-- Alert Modal for Order Cancellation -->
  <div class="modal-overlay" id="alertModal">
    <div class="alert-modal">
      <div class="alert-icon">⚠️</div>
      <h3>Order Cannot Be Cancelled</h3>
      <p id="alertModalMessage">This order has already been shipped and cannot be cancelled.</p>
      <div class="alert-modal-buttons">
        <button class="btn secondary" onclick="closeAlertModal()">Cancel</button>
        <button class="btn" onclick="closeAlertModal()">OK</button>
      </div>
    </div>
  </div>

  <!-- NEW: Login/Signup Modal -->
  <div class="modal-overlay" id="authModal">
    <div class="auth-modal">
      <button class="auth-close" onclick="closeAuthModal()">×</button>
      <h3 id="authModalTitle">Welcome to Buyzo Cart</h3>
      
      <div class="auth-tabs">
        <div class="auth-tab active" onclick="switchAuthTab('login')">Login</div>
        <div class="auth-tab" onclick="switchAuthTab('signup')">Sign Up</div>
      </div>
      
      <!-- Login Form -->
      <form class="auth-form active" id="loginForm">
        <div class="auth-form-group">
          <label>Email Address</label>
          <input type="email" id="loginEmail" placeholder="Enter your email" required />
        </div>
        <div class="auth-form-group">
          <label>Password</label>
          <input type="password" id="loginPassword" placeholder="Enter your password" required />
        </div>
        <button type="submit" class="btn" style="width:100%">Login</button>
        
        <div class="divider"><span>or</span></div>
        
        <button type="button" class="google-signin-btn" onclick="signInWithGoogle()">
          <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google logo">
          Sign in with Google
        </button>
        
        <div class="auth-form-footer">
          <a onclick="switchAuthTab('forgot')">Forgot your password?</a>
        </div>
      </form>
      
      <!-- Sign Up Form -->
      <form class="auth-form" id="signupForm">
        <div class="auth-form-group">
          <label>Full Name</label>
          <input type="text" id="signupName" placeholder="Enter your full name" required />
        </div>
        <div class="auth-form-group">
          <label>Email Address</label>
          <input type="email" id="signupEmail" placeholder="Enter your email" required />
        </div>
        <div class="auth-form-group">
          <label>Password</label>
          <input type="password" id="signupPassword" placeholder="Create a password" required />
        </div>
        <div class="auth-form-group">
          <label>Confirm Password</label>
          <input type="password" id="signupConfirmPassword" placeholder="Confirm your password" required />
        </div>
        <button type="submit" class="btn" style="width:100%">Create Account</button>
        
        <div class="divider"><span>or</span></div>
        
        <button type="button" class="google-signin-btn" onclick="signInWithGoogle()">
          <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google logo">
          Sign up with Google
        </button>
        
        <div class="auth-form-footer">
          Already have an account? <a onclick="switchAuthTab('login')">Login here</a>
        </div>
      </form>
      
      <!-- Forgot Password Form -->
      <form class="auth-form forgot-password-form" id="forgotPasswordForm">
        <div class="auth-form-group">
          <label>Email Address</label>
          <input type="email" id="forgotEmail" placeholder="Enter your email" required />
        </div>
        <button type="submit" class="btn" style="width:100%">Reset Password</button>
        <div class="back-to-login" onclick="switchAuthTab('login')">← Back to Login</div>
      </form>
    </div>
  </div>

  <!-- NEW: Image Zoom Modal -->
  <div class="modal-overlay zoom-modal" id="imageZoomModal">
    <div class="zoom-content">
      <button class="zoom-close" onclick="closeImageZoom()">×</button>
      <img class="zoom-image" id="zoomedImage" src="" alt="Zoomed product image">
      <div class="zoom-controls">
        <button class="zoom-btn" onclick="zoomOut()">-</button>
        <button class="zoom-btn" onclick="resetZoom()">⟲</button>
        <button class="zoom-btn" onclick="zoomIn()">+</button>
      </div>
    </div>
  </div>

  <!-- Firebase and App Scripts -->
  <script>
    // Firebase configuration - FIXED with valid API key
    const firebaseConfig = {
      apiKey: "AIzaSyAeB7VzIxJaNYagUPoKd-kN5HXmLbS2-Vw",
      authDomain: "videomanager-23d98.firebaseapp.com",
      databaseURL: "https://videomanager-23d98-default-rtdb.firebaseio.com",
      projectId: "videomanager-23d98",
      storageBucket: "videomanager-23d98.firebasestorage.app",
      messagingSenderId: "847321523576",
      appId: "1:847321523576:web:bda3f5026e3e163603548d",
      measurementId: "G-YBSJ1KMPV4"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const auth = firebase.auth();
    
    // EmailJS initialization
    emailjs.init("YOUR_EMAILJS_PUBLIC_KEY"); // You'll need to replace this with your actual EmailJS public key

    // Global variables
    let currentUser = null;
    let currentProduct = null;
    let currentOrder = null;
    let currentOrderId = null;
    let selectedSize = 'S';
    let selectedQuantity = 1;
    let currentImageIndex = 0;
    let currentProductImages = [];
    let currentZoomLevel = 1;

    // DOM elements
    const themeToggle = document.getElementById('themeToggle');
    const menuIcon = document.getElementById('menuIcon');
    const mobileMenu = document.getElementById('mobileMenu');
    const menuOverlay = document.getElementById('menuOverlay');
    const menuClose = document.getElementById('menuClose');
    const openLoginTop = document.getElementById('openLoginTop');
    const openMyOrdersTop = document.getElementById('openMyOrdersTop');
    const openContactTop = document.getElementById('openContactTop');
    const userProfile = document.getElementById('userProfile');
    const accountDropdown = document.getElementById('accountDropdown');
    const authModal = document.getElementById('authModal');
    const loginForm = document.getElementById('loginForm');
    const signupForm = document.getElementById('signupForm');
    const forgotPasswordForm = document.getElementById('forgotPasswordForm');
    const toast = document.getElementById('toast');
    const whatsappContact = document.getElementById('whatsappContact');

    // Initialize the app
    document.addEventListener('DOMContentLoaded', function() {
      initializeTheme();
      initializeEventListeners();
      loadProducts();
      loadCategories();
      initializeBannerCarousel();
      initializeCategoryCircles();
      initializeHeroMessages();
      
      // Check if user is logged in
      auth.onAuthStateChanged((user) => {
        if (user) {
          currentUser = user;
          updateUIForUser(user);
        } else {
          currentUser = null;
          updateUIForGuest();
        }
      });
    });

    // Theme functionality
    function initializeTheme() {
      const savedTheme = localStorage.getItem('theme') || 'light';
      document.documentElement.setAttribute('data-theme', savedTheme);
      
      themeToggle.addEventListener('click', () => {
        const currentTheme = document.documentElement.getAttribute('data-theme');
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        document.documentElement.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
      });
    }

    // Initialize event listeners
    function initializeEventListeners() {
      // Mobile menu
      menuIcon.addEventListener('click', openMenu);
      menuClose.addEventListener('click', closeMenu);
      menuOverlay.addEventListener('click', closeMenu);
      
      // Auth buttons
      openLoginTop.addEventListener('click', showLoginModal);
      openMyOrdersTop.addEventListener('click', () => {
        if (currentUser) {
          showMyOrders();
          showPage('myOrdersPage');
        } else {
          showLoginModal();
        }
      });
      openContactTop.addEventListener('click', () => showPage('contactPage'));
      
      // User profile dropdown
      if (userProfile) {
        userProfile.addEventListener('click', toggleUserMenu);
      }
      
      // Auth forms
      loginForm.addEventListener('submit', handleLogin);
      signupForm.addEventListener('submit', handleSignup);
      forgotPasswordForm.addEventListener('submit', handleForgotPassword);
      
      // WhatsApp contact
      whatsappContact.addEventListener('click', () => {
        window.open('https://wa.me/919876543210?text=Hi%20Buyzo%20Cart%20team,%20I%20need%20help%20with...', '_blank');
      });
      
      // Close dropdown when clicking outside
      document.addEventListener('click', (e) => {
        if (userProfile && !userProfile.contains(e.target)) {
          accountDropdown.classList.remove('active');
        }
      });
    }

    // Mobile menu functions
    function openMenu() {
      mobileMenu.classList.add('active');
      menuOverlay.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeMenu() {
      mobileMenu.classList.remove('active');
      menuOverlay.classList.remove('active');
      document.body.style.overflow = '';
    }

    // Auth functions
    function showLoginModal() {
      authModal.classList.add('active');
      switchAuthTab('login');
    }

    function closeAuthModal() {
      authModal.classList.remove('active');
    }

    function switchAuthTab(tab) {
      // Update tabs
      document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
      
      if (tab === 'login') {
        document.querySelector('.auth-tab:nth-child(1)').classList.add('active');
        loginForm.classList.add('active');
        document.getElementById('authModalTitle').textContent = 'Login to Your Account';
      } else if (tab === 'signup') {
        document.querySelector('.auth-tab:nth-child(2)').classList.add('active');
        signupForm.classList.add('active');
        document.getElementById('authModalTitle').textContent = 'Create Your Account';
      } else if (tab === 'forgot') {
        forgotPasswordForm.classList.add('active');
        document.getElementById('authModalTitle').textContent = 'Reset Your Password';
      }
    }

    function toggleUserMenu() {
      accountDropdown.classList.toggle('active');
    }

    async function handleLogin(e) {
      e.preventDefault();
      const email = document.getElementById('loginEmail').value;
      const password = document.getElementById('loginPassword').value;
      
      try {
        const result = await auth.signInWithEmailAndPassword(email, password);
        showToast('Login successful!', 'success');
        closeAuthModal();
      } catch (error) {
        showToast(error.message, 'error');
      }
    }

    async function handleSignup(e) {
      e.preventDefault();
      const name = document.getElementById('signupName').value;
      const email = document.getElementById('signupEmail').value;
      const password = document.getElementById('signupPassword').value;
      const confirmPassword = document.getElementById('signupConfirmPassword').value;
      
      if (password !== confirmPassword) {
        showToast('Passwords do not match', 'error');
        return;
      }
      
      try {
        const result = await auth.createUserWithEmailAndPassword(email, password);
        // Save user profile
        await result.user.updateProfile({
          displayName: name
        });
        
        // Save to Firestore
        await db.collection('users').doc(result.user.uid).set({
          name: name,
          email: email,
          createdAt: firebase.firestore.FieldValue.serverTimestamp()
        });
        
        showToast('Account created successfully!', 'success');
        closeAuthModal();
      } catch (error) {
        showToast(error.message, 'error');
      }
    }

    async function handleForgotPassword(e) {
      e.preventDefault();
      const email = document.getElementById('forgotEmail').value;
      
      try {
        await auth.sendPasswordResetEmail(email);
        showToast('Password reset email sent!', 'success');
        switchAuthTab('login');
      } catch (error) {
        showToast(error.message, 'error');
      }
    }

    async function signInWithGoogle() {
      const provider = new firebase.auth.GoogleAuthProvider();
      
      try {
        const result = await auth.signInWithPopup(provider);
        const user = result.user;
        
        // Check if user exists in Firestore
        const userDoc = await db.collection('users').doc(user.uid).get();
        
        if (!userDoc.exists) {
          // Create new user document
          await db.collection('users').doc(user.uid).set({
            name: user.displayName,
            email: user.email,
            createdAt: firebase.firestore.FieldValue.serverTimestamp()
          });
        }
        
        showToast('Signed in with Google!', 'success');
        closeAuthModal();
      } catch (error) {
        showToast(error.message, 'error');
      }
    }

    async function logout() {
      try {
        await auth.signOut();
        showToast('Logged out successfully', 'success');
        accountDropdown.classList.remove('active');
      } catch (error) {
        showToast(error.message, 'error');
      }
    }

    function updateUIForUser(user) {
      // Update desktop UI
      document.getElementById('openLoginTop').style.display = 'none';
      userProfile.style.display = 'flex';
      document.getElementById('userName').textContent = user.displayName || 'User';
      document.getElementById('userAvatar').textContent = (user.displayName || 'U').charAt(0).toUpperCase();
      document.getElementById('accountEmail').textContent = user.email;
      
      // Update mobile UI
      document.getElementById('mobileLoginBtn').style.display = 'none';
      document.getElementById('mobileUserProfile').style.display = 'flex';
      document.getElementById('mobileUserName').textContent = user.displayName || 'User';
      
      // Load user-specific data
      loadUserOrders();
      loadUserWishlist();
    }

    function updateUIForGuest() {
      // Update desktop UI
      document.getElementById('openLoginTop').style.display = 'block';
      userProfile.style.display = 'none';
      
      // Update mobile UI
      document.getElementById('mobileLoginBtn').style.display = 'flex';
      document.getElementById('mobileUserProfile').style.display = 'none';
      
      // Clear user-specific data
      document.getElementById('ordersList').innerHTML = '';
      document.getElementById('wishlistGrid').innerHTML = '';
      document.getElementById('noOrders').style.display = 'block';
      document.getElementById('noWishlist').style.display = 'block';
    }

    // Toast notification
    function showToast(message, type = 'info') {
      toast.textContent = message;
      toast.className = 'toast';
      toast.classList.add(type);
      toast.classList.add('show');
      
      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }

    // Page navigation
    function showPage(pageId) {
      document.querySelectorAll('.page').forEach(page => {
        page.classList.remove('active');
      });
      document.getElementById(pageId).classList.add('active');
      window.scrollTo(0, 0);
      
      // Close mobile menu if open
      closeMenu();
    }

    // Product and category loading functions
    async function loadProducts() {
      try {
        const snapshot = await db.collection('products').get();
        const products = [];
        snapshot.forEach(doc => {
          products.push({ id: doc.id, ...doc.data() });
        });
        
        renderProducts(products, 'homeProductGrid');
        renderProducts(products, 'productGrid');
        initializeProductSlider(products);
      } catch (error) {
        console.error('Error loading products:', error);
        showToast('Error loading products', 'error');
      }
    }

    async function loadCategories() {
      try {
        const snapshot = await db.collection('categories').get();
        const categoriesContainer = document.getElementById('categoriesContainer');
        categoriesContainer.innerHTML = '';
        
        // Add "All" category
        const allCategory = document.createElement('div');
        allCategory.className = 'category-pill active';
        allCategory.textContent = 'All';
        allCategory.onclick = () => filterProductsByCategory('all');
        categoriesContainer.appendChild(allCategory);
        
        snapshot.forEach(doc => {
          const category = doc.data();
          const categoryElement = document.createElement('div');
          categoryElement.className = 'category-pill';
          categoryElement.textContent = category.name;
          categoryElement.onclick = () => filterProductsByCategory(category.name);
          categoriesContainer.appendChild(categoryElement);
        });
      } catch (error) {
        console.error('Error loading categories:', error);
      }
    }

    function renderProducts(products, containerId) {
      const container = document.getElementById(containerId);
      container.innerHTML = '';
      
      products.forEach(product => {
        const productCard = createProductCard(product);
        container.appendChild(productCard);
      });
    }

    function createProductCard(product) {
      const card = document.createElement('div');
      card.className = 'product-card';
      card.onclick = () => showProductDetail(product);
      
      // Add to recently viewed
      addToRecentlyViewed(product);
      
      const discountBadge = product.discount ? `<div class="product-card-badge">${product.discount}% OFF</div>` : '';
      const originalPrice = product.originalPrice ? `<div class="product-card-original-price">₹${product.originalPrice}</div>` : '';
      
      card.innerHTML = `
        <div class="product-card-image" style="background-image: url('${product.image}')">
          ${discountBadge}
        </div>
        <div class="product-card-body">
          <div class="product-card-title">${product.name}</div>
          <div class="product-card-rating">
            <div class="product-card-stars">★★★★★</div>
            <div class="product-card-review-count">(${product.reviews || 0})</div>
          </div>
          <div class="product-card-price">
            <div class="product-card-current-price">₹${product.price}</div>
            ${originalPrice}
          </div>
          <div class="product-card-actions">
            <button class="action-btn wishlist-btn" onclick="event.stopPropagation(); toggleWishlist('${product.id}')">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
              </svg>
            </button>
            <button class="action-btn share-btn" onclick="event.stopPropagation(); shareProduct('${product.id}')">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="18" cy="5" r="3"></circle>
                <circle cx="6" cy="12" r="3"></circle>
                <circle cx="18" cy="19" r="3"></circle>
                <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
              </svg>
            </button>
          </div>
        </div>
      `;
      
      return card;
    }

    // Product detail functions
    function showProductDetail(product) {
      currentProduct = product;
      currentProductImages = product.images || [product.image];
      currentImageIndex = 0;
      
      // Update product details
      document.getElementById('detailTitle').textContent = product.name;
      document.getElementById('detailSku').textContent = `SKU: ${product.sku || 'N/A'}`;
      document.getElementById('detailPrice').textContent = `₹${product.price}`;
      document.getElementById('detailDesc').textContent = product.description;
      document.getElementById('detailFullDesc').textContent = product.fullDescription || product.description;
      
      // Update stock status
      const stockStatus = document.getElementById('detailStockStatus');
      if (product.stock > 10) {
        stockStatus.textContent = 'In Stock';
        stockStatus.className = 'stock-status in-stock';
      } else if (product.stock > 0) {
        stockStatus.textContent = `Only ${product.stock} left!`;
        stockStatus.className = 'stock-status low-stock';
      } else {
        stockStatus.textContent = 'Out of Stock';
        stockStatus.className = 'stock-status out-of-stock';
      }
      
      // Update main image
      updateDetailMainImage();
      
      // Update thumbnails
      updateDetailThumbnails();
      
      // Update share link
      document.getElementById('productShareLink').value = `${window.location.origin}?product=${product.id}`;
      
      // Check if product is in wishlist
      updateWishlistButton();
      
      // Load similar products
      loadSimilarProducts(product.category);
      
      // Show product detail page
      showPage('productDetailPage');
    }

    function updateDetailMainImage() {
      const mainImage = document.getElementById('detailMainImage');
      if (currentProductImages.length > 0) {
        mainImage.style.backgroundImage = `url('${currentProductImages[currentImageIndex]}')`;
      }
      
      // Update carousel dots
      updateDetailCarouselDots();
    }

    function updateDetailThumbnails() {
      const thumbnailsContainer = document.getElementById('detailThumbnails');
      thumbnailsContainer.innerHTML = '';
      
      currentProductImages.forEach((image, index) => {
        const thumbnail = document.createElement('div');
        thumbnail.className = `product-detail-thumbnail ${index === currentImageIndex ? 'active' : ''}`;
        thumbnail.style.backgroundImage = `url('${image}')`;
        thumbnail.onclick = () => {
          currentImageIndex = index;
          updateDetailMainImage();
          updateDetailThumbnails();
        };
        thumbnailsContainer.appendChild(thumbnail);
      });
    }

    function updateDetailCarouselDots() {
      const dotsContainer = document.getElementById('detailCarouselDots');
      dotsContainer.innerHTML = '';
      
      currentProductImages.forEach((_, index) => {
        const dot = document.createElement('div');
        dot.className = `detail-carousel-dot ${index === currentImageIndex ? 'active' : ''}`;
        dot.onclick = () => {
          currentImageIndex = index;
          updateDetailMainImage();
          updateDetailThumbnails();
        };
        dotsContainer.appendChild(dot);
      });
    }

    // Image zoom functionality
    function openImageZoom() {
      const zoomModal = document.getElementById('imageZoomModal');
      const zoomedImage = document.getElementById('zoomedImage');
      
      zoomedImage.src = currentProductImages[currentImageIndex];
      zoomedImage.style.transform = `scale(${currentZoomLevel})`;
      zoomModal.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeImageZoom() {
      const zoomModal = document.getElementById('imageZoomModal');
      zoomModal.classList.remove('active');
      document.body.style.overflow = '';
      resetZoom();
    }

    function zoomIn() {
      currentZoomLevel += 0.2;
      document.getElementById('zoomedImage').style.transform = `scale(${currentZoomLevel})`;
    }

    function zoomOut() {
      if (currentZoomLevel > 0.4) {
        currentZoomLevel -= 0.2;
        document.getElementById('zoomedImage').style.transform = `scale(${currentZoomLevel})`;
      }
    }

    function resetZoom() {
      currentZoomLevel = 1;
      document.getElementById('zoomedImage').style.transform = `scale(${currentZoomLevel})`;
    }

    // Order and checkout functions
    function startOrder(product) {
      currentProduct = product;
      currentProductImages = product.images || [product.image];
      currentImageIndex = 0;
      selectedSize = 'S';
      selectedQuantity = 1;
      
      // Update order page
      document.getElementById('spTitle').textContent = product.name;
      document.getElementById('spPrice').textContent = `₹${product.price}`;
      document.getElementById('spDesc').textContent = product.description;
      document.getElementById('spFullDesc').textContent = product.fullDescription || product.description;
      
      // Update gallery
      updateOrderGallery();
      
      // Reset size selection
      document.querySelectorAll('.size-option').forEach(option => {
        option.classList.remove('selected');
        if (option.getAttribute('data-value') === 'S') {
          option.classList.add('selected');
        }
      });
      
      // Reset quantity
      document.getElementById('qtySelect').value = 1;
      
      // Show order page
      showPage('orderPage');
      updateStepPills('order');
    }

    function updateOrderGallery() {
      const galleryMain = document.getElementById('galleryMain');
      if (currentProductImages.length > 0) {
        galleryMain.style.backgroundImage = `url('${currentProductImages[currentImageIndex]}')`;
      }
      
      // Update carousel dots
      updateOrderCarouselDots();
    }

    function updateOrderCarouselDots() {
      const dotsContainer = document.querySelector('#galleryMain .carousel-dots');
      dotsContainer.innerHTML = '';
      
      currentProductImages.forEach((_, index) => {
        const dot = document.createElement('div');
        dot.className = `carousel-dot ${index === currentImageIndex ? 'active' : ''}`;
        dot.onclick = () => {
          currentImageIndex = index;
          updateOrderGallery();
        };
        dotsContainer.appendChild(dot);
      });
    }

    function updateStepPills(step) {
      const steps = ['products', 'order', 'user', 'pay'];
      const currentIndex = steps.indexOf(step);
      
      steps.forEach((s, index) => {
        const pill = document.getElementById(`pill-${s}`);
        if (index <= currentIndex) {
          pill.classList.remove('disabled');
        } else {
          pill.classList.add('disabled');
        }
      });
    }

    // Wishlist functions
    async function toggleWishlist(productId) {
      if (!currentUser) {
        showLoginModal();
        return;
      }
      
      try {
        const wishlistRef = db.collection('wishlist').doc(currentUser.uid);
        const doc = await wishlistRef.get();
        
        if (doc.exists) {
          const wishlist = doc.data().items || [];
          const index = wishlist.findIndex(item => item.id === productId);
          
          if (index > -1) {
            // Remove from wishlist
            wishlist.splice(index, 1);
            showToast('Removed from wishlist', 'success');
          } else {
            // Add to wishlist
            const product = await db.collection('products').doc(productId).get();
            wishlist.push({ id: productId, ...product.data() });
            showToast('Added to wishlist', 'success');
          }
          
          await wishlistRef.set({ items: wishlist });
        } else {
          // Create new wishlist
          const product = await db.collection('products').doc(productId).get();
          await wishlistRef.set({
            items: [{ id: productId, ...product.data() }]
          });
          showToast('Added to wishlist', 'success');
        }
        
        // Update wishlist button
        updateWishlistButton();
        
        // Reload wishlist page if active
        if (document.getElementById('wishlistPage').classList.contains('active')) {
          loadUserWishlist();
        }
      } catch (error) {
        console.error('Error updating wishlist:', error);
        showToast('Error updating wishlist', 'error');
      }
    }

    async function updateWishlistButton() {
      if (!currentUser || !currentProduct) return;
      
      try {
        const wishlistRef = db.collection('wishlist').doc(currentUser.uid);
        const doc = await wishlistRef.get();
        
        const wishlistBtn = document.getElementById('detailWishlistBtn');
        const wishlistIcon = document.querySelector('.wishlist-btn');
        
        if (doc.exists) {
          const wishlist = doc.data().items || [];
          const isInWishlist = wishlist.some(item => item.id === currentProduct.id);
          
          if (isInWishlist) {
            wishlistBtn.classList.add('active');
            wishlistBtn.textContent = 'Remove from Wishlist';
            if (wishlistIcon) {
              wishlistIcon.classList.add('active');
            }
          } else {
            wishlistBtn.classList.remove('active');
            wishlistBtn.textContent = 'Add to Wishlist';
            if (wishlistIcon) {
              wishlistIcon.classList.remove('active');
            }
          }
        }
      } catch (error) {
        console.error('Error checking wishlist:', error);
      }
    }

    async function loadUserWishlist() {
      if (!currentUser) return;
      
      try {
        const wishlistRef = db.collection('wishlist').doc(currentUser.uid);
        const doc = await wishlistRef.get();
        
        const wishlistGrid = document.getElementById('wishlistGrid');
        const noWishlist = document.getElementById('noWishlist');
        
        if (doc.exists && doc.data().items && doc.data().items.length > 0) {
          const wishlist = doc.data().items;
          wishlistGrid.innerHTML = '';
          
          wishlist.forEach(product => {
            const productCard = createProductCard(product);
            wishlistGrid.appendChild(productCard);
          });
          
          noWishlist.style.display = 'none';
        } else {
          wishlistGrid.innerHTML = '';
          noWishlist.style.display = 'block';
        }
      } catch (error) {
        console.error('Error loading wishlist:', error);
        showToast('Error loading wishlist', 'error');
      }
    }

    // Order management functions
    async function loadUserOrders() {
      if (!currentUser) return;
      
      try {
        const ordersSnapshot = await db.collection('orders')
          .where('userId', '==', currentUser.uid)
          .orderBy('createdAt', 'desc')
          .get();
        
        const ordersList = document.getElementById('ordersList');
        const noOrders = document.getElementById('noOrders');
        
        if (!ordersSnapshot.empty) {
          ordersList.innerHTML = '';
          
          ordersSnapshot.forEach(doc => {
            const order = { id: doc.id, ...doc.data() };
            const orderCard = createOrderCard(order);
            ordersList.appendChild(orderCard);
          });
          
          noOrders.style.display = 'none';
          
          // Update notification badge
          const notificationBadge = document.getElementById('ordersNotification');
          if (notificationBadge) {
            notificationBadge.textContent = ordersSnapshot.size;
            notificationBadge.style.display = 'flex';
          }
        } else {
          ordersList.innerHTML = '';
          noOrders.style.display = 'block';
          
          // Hide notification badge
          const notificationBadge = document.getElementById('ordersNotification');
          if (notificationBadge) {
            notificationBadge.style.display = 'none';
          }
        }
      } catch (error) {
        console.error('Error loading orders:', error);
        showToast('Error loading orders', 'error');
      }
    }

    function createOrderCard(order) {
      const card = document.createElement('div');
      card.className = 'order-card';
      card.onclick = () => showOrderDetail(order);
      
      const statusClass = `status-${order.status.toLowerCase()}`;
      const statusText = order.status.charAt(0).toUpperCase() + order.status.slice(1);
      
      card.innerHTML = `
        <div class="order-header">
          <div>
            <div class="order-id">Order #${order.id.slice(-8)}</div>
            <div class="order-date">Placed on ${new Date(order.createdAt?.toDate()).toLocaleDateString()}</div>
            ${order.estimatedDelivery ? `<div class="order-estimated">Estimated delivery: ${order.estimatedDelivery}</div>` : ''}
          </div>
          <div class="order-status ${statusClass}">${statusText}</div>
        </div>
        <div class="order-details">
          <div class="order-product-image" style="background-image: url('${order.productImage}')"></div>
          <div class="order-product-info">
            <div class="order-product-title">${order.productName}</div>
            <div class="order-product-price">₹${order.totalAmount}</div>
            <div class="order-product-meta">Size: ${order.size} | Qty: ${order.quantity}</div>
          </div>
        </div>
        <div class="order-actions">
          ${order.status === 'confirmed' ? `<button class="btn secondary" onclick="event.stopPropagation(); cancelOrder('${order.id}')">Cancel Order</button>` : ''}
          <button class="btn" onclick="event.stopPropagation(); showOrderDetail('${order.id}')">View Details</button>
        </div>
      `;
      
      return card;
    }

    function showOrderDetail(order) {
      currentOrder = order;
      currentOrderId = typeof order === 'string' ? order : order.id;
      
      // In a real app, you would fetch the full order details from Firestore
      // For now, we'll use the order object passed in
      const orderDetailContent = document.getElementById('orderDetailContent');
      
      if (typeof order === 'string') {
        // If only order ID is passed, we need to fetch the order details
        // This would be implemented in a real app
        orderDetailContent.innerHTML = '<p>Loading order details...</p>';
      } else {
        // Display order details
        const statusClass = `status-${order.status.toLowerCase()}`;
        const statusText = order.status.charAt(0).toUpperCase() + order.status.slice(1);
        
        orderDetailContent.innerHTML = `
          <div class="order-detail-section">
            <div class="order-detail-label">Order ID</div>
            <div class="order-detail-value">${order.id.slice(-8)}</div>
          </div>
          <div class="order-detail-section">
            <div class="order-detail-label">Order Status</div>
            <div class="order-detail-value"><span class="order-status ${statusClass}">${statusText}</span></div>
          </div>
          <div class="order-detail-section">
            <div class="order-detail-label">Order Date</div>
            <div class="order-detail-value">${new Date(order.createdAt?.toDate()).toLocaleDateString()}</div>
          </div>
          <div class="order-detail-section">
            <div class="order-detail-label">Product</div>
            <div class="order-detail-product">
              <div class="order-detail-image" style="background-image: url('${order.productImage}')"></div>
              <div class="order-detail-product-info">
                <div class="order-product-title">${order.productName}</div>
                <div class="order-product-price">₹${order.totalAmount}</div>
                <div class="order-product-meta">Size: ${order.size} | Qty: ${order.quantity}</div>
              </div>
            </div>
          </div>
          <div class="order-detail-section">
            <div class="order-detail-label">Delivery Address</div>
            <div class="order-detail-value">
              ${order.shippingAddress?.fullName || ''}<br>
              ${order.shippingAddress?.house || ''}<br>
              ${order.shippingAddress?.city || ''}, ${order.shippingAddress?.state || ''} - ${order.shippingAddress?.pincode || ''}<br>
              Phone: ${order.shippingAddress?.mobile || ''}
            </div>
          </div>
          <div class="order-detail-section">
            <div class="order-detail-label">Payment Method</div>
            <div class="order-detail-value">${order.paymentMethod === 'cod' ? 'Cash on Delivery' : 'Prepaid (UPI/Card)'}</div>
          </div>
          <div class="order-detail-section">
            <div class="order-detail-label">Order Summary</div>
            <div class="order-detail-value">
              <div style="display:flex;justify-content:space-between;margin-bottom:8px"><div>Product Price</div><div>₹${order.productPrice || order.totalAmount - 50}</div></div>
              <div style="display:flex;justify-content:space-between;margin-bottom:8px"><div>Shipping</div><div>₹50</div></div>
              <div style="display:flex;justify-content:space-between;font-weight:700;margin-top:8px;font-size:18px;border-top:1px dashed var(--border);padding-top:8px"><div>Total</div><div>₹${order.totalAmount}</div></div>
            </div>
          </div>
          ${order.status === 'confirmed' ? `
          <div class="order-detail-section">
            <button class="btn error" onclick="cancelOrder('${order.id}')">Cancel Order</button>
          </div>
          ` : ''}
        `;
      }
      
      showPage('orderDetailPage');
    }

    function showMyOrders() {
      if (!currentUser) {
        showLoginModal();
        return;
      }
      
      loadUserOrders();
    }

    // Banner carousel
    function initializeBannerCarousel() {
      const banners = [
        {
          image: 'https://images.unsplash.com/photo-1607082350899-7e105aa886ae?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80',
          title: 'Summer Sale',
          subtitle: 'Up to 50% off on selected items'
        },
        {
          image: 'https://images.unsplash.com/photo-1441986300917-64674bd600d8?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80',
          title: 'New Arrivals',
          subtitle: 'Check out our latest collection'
        },
        {
          image: 'https://images.unsplash.com/photo-1555529669-e69e7aa0ba9a?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80',
          title: 'Free Shipping',
          subtitle: 'On orders above ₹999'
        }
      ];
      
      const bannerTrack = document.getElementById('bannerTrack');
      const bannerControls = document.getElementById('bannerControls');
      
      banners.forEach((banner, index) => {
        // Create banner slide
        const slide = document.createElement('div');
        slide.className = 'banner-slide';
        slide.style.backgroundImage = `url('${banner.image}')`;
        bannerTrack.appendChild(slide);
        
        // Create banner dot
        const dot = document.createElement('div');
        dot.className = `banner-dot ${index === 0 ? 'active' : ''}`;
        dot.onclick = () => showBannerSlide(index);
        bannerControls.appendChild(dot);
      });
      
      // Auto-rotate banners
      let currentBannerIndex = 0;
      setInterval(() => {
        currentBannerIndex = (currentBannerIndex + 1) % banners.length;
        showBannerSlide(currentBannerIndex);
      }, 5000);
    }

    function showBannerSlide(index) {
      const bannerTrack = document.getElementById('bannerTrack');
      const dots = document.querySelectorAll('.banner-dot');
      
      bannerTrack.style.transform = `translateX(-${index * 100}%)`;
      
      dots.forEach((dot, i) => {
        dot.classList.toggle('active', i === index);
      });
    }

    // Category circles
    function initializeCategoryCircles() {
      const categories = [
        { name: 'Electronics', image: 'https://images.unsplash.com/photo-1498049794561-7780e7231661?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80' },
        { name: 'Fashion', image: 'https://images.unsplash.com/photo-1445205170230-053b83016050?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80' },
        { name: 'Home', image: 'https://images.unsplash.com/photo-1484101403633-562f891dc89a?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80' },
        { name: 'Beauty', image: 'https://images.unsplash.com/photo-1596462502278-27bfdc403348?ixlib=rb-4.0.3&auto=format&crop&w=200&q=80' },
        { name: 'Sports', image: 'https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80' },
        { name: 'Books', image: 'https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80' }
      ];
      
      const container = document.getElementById('categoryCirclesContainer');
      
      categories.forEach(category => {
        const circle = document.createElement('div');
        circle.className = 'category-circle';
        circle.onclick = () => filterProductsByCategory(category.name);
        
        circle.innerHTML = `
          <div class="category-circle-image" style="background-image: url('${category.image}')"></div>
          <div class="category-circle-name">${category.name}</div>
        `;
        
        container.appendChild(circle);
      });
    }

    // Product slider
    function initializeProductSlider(products) {
      const sliderTrack = document.getElementById('productSlider');
      
      // Take first 6 products for the slider
      const sliderProducts = products.slice(0, 6);
      
      sliderProducts.forEach(product => {
        const sliderItem = document.createElement('div');
        sliderItem.className = 'slider-item';
        sliderItem.onclick = () => showProductDetail(product);
        
        const discountBadge = product.discount ? `<div class="product-card-badge">${product.discount}% OFF</div>` : '';
        
        sliderItem.innerHTML = `
          <div class="slider-item-img" style="background-image: url('${product.image}')">
            ${discountBadge}
          </div>
          <div class="slider-item-body">
            <div class="slider-item-title">${product.name}</div>
            <div class="slider-item-price">₹${product.price}</div>
          </div>
        `;
        
        sliderTrack.appendChild(sliderItem);
      });
    }

    // Recently viewed products
    function addToRecentlyViewed(product) {
      if (!currentUser) return;
      
      try {
        const recentlyViewedRef = db.collection('recentlyViewed').doc(currentUser.uid);
        
        // Get current recently viewed
        recentlyViewedRef.get().then(doc => {
          let recentlyViewed = doc.exists ? doc.data().items || [] : [];
          
          // Remove if already exists
          recentlyViewed = recentlyViewed.filter(item => item.id !== product.id);
          
          // Add to beginning
          recentlyViewed.unshift({
            id: product.id,
            name: product.name,
            price: product.price,
            image: product.image,
            viewedAt: new Date()
          });
          
          // Keep only last 10 items
          if (recentlyViewed.length > 10) {
            recentlyViewed = recentlyViewed.slice(0, 10);
          }
          
          // Save to Firestore
          recentlyViewedRef.set({ items: recentlyViewed });
          
          // Update UI
          updateRecentlyViewedUI(recentlyViewed);
        });
      } catch (error) {
        console.error('Error updating recently viewed:', error);
      }
    }

    function updateRecentlyViewedUI(recentlyViewed) {
      const section = document.getElementById('recentlyViewedSection');
      const slider = document.getElementById('recentlyViewedSlider');
      
      if (recentlyViewed.length > 0) {
        section.style.display = 'block';
        slider.innerHTML = '';
        
        recentlyViewed.forEach(product => {
          const sliderItem = document.createElement('div');
          sliderItem.className = 'slider-item';
          sliderItem.onclick = () => {
            // We need to fetch the full product details here
            // For now, we'll just show a toast
            showToast(`Loading ${product.name}...`, 'info');
          };
          
          sliderItem.innerHTML = `
            <div class="slider-item-img" style="background-image: url('${product.image}')"></div>
            <div class="slider-item-body">
              <div class="slider-item-title">${product.name}</div>
              <div class="slider-item-price">₹${product.price}</div>
            </div>
          `;
          
          slider.appendChild(sliderItem);
        });
      } else {
        section.style.display = 'none';
      }
    }

    // Similar products
    function loadSimilarProducts(category) {
      // In a real app, you would fetch products from the same category
      // For now, we'll use a placeholder
      const similarSlider = document.getElementById('similarProductsSlider');
      similarSlider.innerHTML = '<div style="padding:20px;text-align:center;color:var(--muted)">Loading similar products...</div>';
    }

    // Hero messages rotation
    function initializeHeroMessages() {
      const messages = document.querySelectorAll('#heroMessages span');
      let currentIndex = 0;
      
      setInterval(() => {
        messages.forEach(msg => msg.classList.remove('active'));
        currentIndex = (currentIndex + 1) % messages.length;
        messages[currentIndex].classList.add('active');
      }, 3000);
    }

    // Product sharing
    function shareProduct(productId) {
      const product = currentProduct; // In a real app, you'd fetch the product by ID
      
      if (navigator.share) {
        navigator.share({
          title: product.name,
          text: product.description,
          url: `${window.location.origin}?product=${productId}`
        })
        .then(() => showToast('Product shared successfully', 'success'))
        .catch(error => console.error('Error sharing:', error));
      } else {
        // Fallback: copy to clipboard
        const shareUrl = `${window.location.origin}?product=${productId}`;
        navigator.clipboard.writeText(shareUrl)
          .then(() => showToast('Product link copied to clipboard', 'success'))
          .catch(error => showToast('Error copying link', 'error'));
      }
    }

    // Product filtering
    function filterProductsByCategory(category) {
      // Update active category
      document.querySelectorAll('.category-pill').forEach(pill => {
        pill.classList.remove('active');
      });
      
      if (category === 'all') {
        document.querySelectorAll('.category-pill')[0].classList.add('active');
      } else {
        document.querySelectorAll('.category-pill').forEach(pill => {
          if (pill.textContent === category) {
            pill.classList.add('active');
          }
        });
      }
      
      // In a real app, you would filter products by category
      // For now, we'll just show a toast
      showToast(`Showing ${category === 'all' ? 'all' : category} products`, 'info');
    }

    // Cancellation functions
    function cancelOrder(orderId) {
      currentOrderId = orderId;
      
      // Show cancellation modal
      document.getElementById('cancellationModal').classList.add('active');
    }

    function selectCancellationReason(element) {
      document.querySelectorAll('.cancellation-reason').forEach(reason => {
        reason.classList.remove('selected');
      });
      
      element.classList.add('selected');
      element.querySelector('input').checked = true;
      
      document.getElementById('confirmCancelBtn').disabled = false;
    }

    function closeCancellationModal() {
      document.getElementById('cancellationModal').classList.remove('active');
    }

    function confirmCancellation() {
      const selectedReason = document.querySelector('input[name="cancelReason"]:checked');
      
      if (!selectedReason) {
        showToast('Please select a cancellation reason', 'error');
        return;
      }
      
      // Show confirmation modal with refund details
      document.getElementById('cancellationModal').classList.remove('active');
      document.getElementById('cancelConfirmModal').classList.add('active');
      
      // In a real app, you would calculate the actual refund amount
      document.getElementById('refundOrderAmount').textContent = '₹500';
      document.getElementById('refundTotalAmount').textContent = '₹490';
    }

    function closeCancelConfirmModal() {
      document.getElementById('cancelConfirmModal').classList.remove('active');
    }

    function finalConfirmCancellation() {
      // In a real app, you would update the order status in Firestore
      showToast('Order cancellation requested successfully', 'success');
      closeCancelConfirmModal();
      
      // Reload orders
      loadUserOrders();
      
      // If on order detail page, go back to orders list
      if (document.getElementById('orderDetailPage').classList.contains('active')) {
        showPage('myOrdersPage');
      }
    }

    function closeAlertModal() {
      document.getElementById('alertModal').classList.remove('active');
    }

    // Initialize the rest of the app functionality
    // This would include all the existing functionality from the previous code
    // For brevity, I'm including the most essential parts

    // Initialize quantity controls
    document.addEventListener('click', function(e) {
      if (e.target.classList.contains('qty-minus')) {
        const input = e.target.parentNode.querySelector('input');
        if (input.value > 1) {
          input.value = parseInt(input.value) - 1;
          selectedQuantity = input.value;
        }
      }
      
      if (e.target.classList.contains('qty-plus')) {
        const input = e.target.parentNode.querySelector('input');
        if (input.value < 10) {
          input.value = parseInt(input.value) + 1;
          selectedQuantity = input.value;
        }
      }
      
      if (e.target.classList.contains('size-option')) {
        document.querySelectorAll('.size-option').forEach(option => {
          option.classList.remove('selected');
        });
        e.target.classList.add('selected');
        selectedSize = e.target.getAttribute('data-value');
        
        // Hide validation error if shown
        document.getElementById('sizeValidationError').classList.remove('show');
      }
    });

    // Initialize carousel controls
    document.addEventListener('click', function(e) {
      if (e.target.classList.contains('carousel-control')) {
        const gallery = e.target.closest('.gallery-main');
        const isNext = e.target.classList.contains('next');
        
        if (isNext) {
          currentImageIndex = (currentImageIndex + 1) % currentProductImages.length;
        } else {
          currentImageIndex = (currentImageIndex - 1 + currentProductImages.length) % currentProductImages.length;
        }
        
        updateOrderGallery();
      }
      
      if (e.target.classList.contains('detail-carousel-control')) {
        const isNext = e.target.classList.contains('next');
        
        if (isNext) {
          currentImageIndex = (currentImageIndex + 1) % currentProductImages.length;
        } else {
          currentImageIndex = (currentImageIndex - 1 + currentProductImages.length) % currentProductImages.length;
        }
        
        updateDetailMainImage();
        updateDetailThumbnails();
      }
    });

    // Initialize navigation buttons
    document.addEventListener('click', function(e) {
      if (e.target.id === 'detailOrderBtn') {
        startOrder(currentProduct);
      }
      
      if (e.target.id === 'toUserInfo') {
        // Validate size selection
        if (!selectedSize) {
          document.getElementById('sizeValidationError').classList.add('show');
          return;
        }
        
        showPage('userPage');
        updateStepPills('user');
      }
      
      if (e.target.id === 'backToProducts') {
        showPage('productsPage');
      }
      
      if (e.target.id === 'toPayment') {
        showPage('paymentPage');
        updateStepPills('pay');
        updateOrderSummary();
      }
      
      if (e.target.id === 'editOrder') {
        showPage('orderPage');
        updateStepPills('order');
      }
      
      if (e.target.id === 'confirmOrder') {
        placeOrder();
      }
      
      if (e.target.id === 'payBack') {
        showPage('userPage');
        updateStepPills('user');
      }
      
      if (e.target.id === 'goHome') {
        showPage('homePage');
      }
      
      if (e.target.id === 'viewOrders') {
        showMyOrders();
        showPage('myOrdersPage');
      }
      
      if (e.target.id === 'copyShareLink') {
        const shareLink = document.getElementById('productShareLink');
        shareLink.select();
        document.execCommand('copy');
        showToast('Product link copied to clipboard', 'success');
      }
    });

    // Social sharing
    document.addEventListener('click', function(e) {
      if (e.target.closest('.share-btn')) {
        const platform = e.target.closest('.share-btn').getAttribute('data-platform');
        shareOnPlatform(platform);
      }
    });

    function shareOnPlatform(platform) {
      const product = currentProduct;
      const shareUrl = `${window.location.origin}?product=${product.id}`;
      const shareText = `Check out ${product.name} on Buyzo Cart!`;
      
      let shareWindowUrl = '';
      
      switch (platform) {
        case 'facebook':
          shareWindowUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(shareUrl)}`;
          break;
        case 'twitter':
          shareWindowUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}&url=${encodeURIComponent(shareUrl)}`;
          break;
        case 'whatsapp':
          shareWindowUrl = `https://wa.me/?text=${encodeURIComponent(shareText + ' ' + shareUrl)}`;
          break;
      }
      
      if (shareWindowUrl) {
        window.open(shareWindowUrl, '_blank', 'width=600,height=400');
      }
    }

    function updateOrderSummary() {
      if (!currentProduct) return;
      
      const productPrice = currentProduct.price * selectedQuantity;
      const deliveryCharge = 50;
      const totalAmount = productPrice + deliveryCharge;
      
      document.getElementById('sumProduct').textContent = currentProduct.name;
      document.getElementById('sumQty').textContent = selectedQuantity;
      document.getElementById('sumPrice').textContent = `₹${productPrice}`;
      document.getElementById('sumDel').textContent = `₹${deliveryCharge}`;
      document.getElementById('sumTotal').textContent = `₹${totalAmount}`;
    }

    async function placeOrder() {
      if (!currentUser) {
        showLoginModal();
        return;
      }
      
      // Get user info from form
      const fullName = document.getElementById('fullname').value;
      const mobile = document.getElementById('mobile').value;
      const pincode = document.getElementById('pincode').value;
      const city = document.getElementById('city').value;
      const state = document.getElementById('state').value;
      const house = document.getElementById('house').value;
      const paymentMethod = document.querySelector('input[name="pay"]:checked').value;
      
      // Validate form
      if (!fullName || !mobile || !pincode || !city || !state || !house) {
        showToast('Please fill in all required fields', 'error');
        return;
      }
      
      try {
        // Calculate order total
        const productPrice = currentProduct.price * selectedQuantity;
        const deliveryCharge = 50;
        const totalAmount = productPrice + deliveryCharge;
        
        // Create order object
        const order = {
          userId: currentUser.uid,
          productId: currentProduct.id,
          productName: currentProduct.name,
          productImage: currentProduct.image,
          productPrice: currentProduct.price,
          size: selectedSize,
          quantity: selectedQuantity,
          totalAmount: totalAmount,
          shippingAddress: {
            fullName,
            mobile,
            pincode,
            city,
            state,
            house
          },
          paymentMethod,
          status: 'confirmed',
          createdAt: firebase.firestore.FieldValue.serverTimestamp(),
          estimatedDelivery: getEstimatedDeliveryDate()
        };
        
        // Save to Firestore
        const orderRef = await db.collection('orders').add(order);
        
        // Show success page
        showPage('successPage');
        
        // Send confirmation email (if EmailJS is configured)
        sendOrderConfirmationEmail(order, orderRef.id);
        
        // Reset form
        resetOrderForm();
        
      } catch (error) {
        console.error('Error placing order:', error);
        showToast('Error placing order. Please try again.', 'error');
      }
    }

    function getEstimatedDeliveryDate() {
      const deliveryDate = new Date();
      deliveryDate.setDate(deliveryDate.getDate() + 7); // 7 days from now
      return deliveryDate.toLocaleDateString();
    }

    function resetOrderForm() {
      document.getElementById('fullname').value = '';
      document.getElementById('mobile').value = '';
      document.getElementById('pincode').value = '';
      document.getElementById('city').value = '';
      document.getElementById('state').value = '';
      document.getElementById('house').value = '';
    }

    function sendOrderConfirmationEmail(order, orderId) {
      // This would require proper EmailJS configuration
      // For now, it's just a placeholder
      console.log('Order confirmation email would be sent for order:', orderId);
    }

    // Search functionality
    document.getElementById('homeSearchInput').addEventListener('input', function(e) {
      const searchTerm = e.target.value.toLowerCase();
      const resultsContainer = document.getElementById('homeSearchResults');
      
      if (searchTerm.length > 2) {
        // In a real app, you would search in Firestore
        // For now, we'll just show a message
        resultsContainer.innerHTML = `<div style="padding:20px;text-align:center;color:var(--muted)">Searching for "${searchTerm}"...</div>`;
        resultsContainer.style.display = 'grid';
      } else {
        resultsContainer.style.display = 'none';
      }
    });

    document.getElementById('searchInput').addEventListener('input', function(e) {
      const searchTerm = e.target.value.toLowerCase();
      
      if (searchTerm.length > 2) {
        // In a real app, you would filter products based on search term
        showToast(`Searching for "${searchTerm}"...`, 'info');
      }
    });

    // Newsletter subscription
    document.getElementById('subscribeBtn').addEventListener('click', function() {
      const email = document.getElementById('newsletterEmail').value;
      
      if (!email) {
        showToast('Please enter your email address', 'error');
        return;
      }
      
      if (!validateEmail(email)) {
        showToast('Please enter a valid email address', 'error');
        return;
      }
      
      // In a real app, you would save to Firestore or send to an email service
      showToast('Thank you for subscribing to our newsletter!', 'success');
      document.getElementById('newsletterEmail').value = '';
    });

    function validateEmail(email) {
      const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return re.test(email);
    }

    // Price filter
    document.getElementById('applyPriceFilter').addEventListener('click', function() {
      const minPrice = document.getElementById('minPrice').value || 0;
      const maxPrice = document.getElementById('maxPrice').value || 5000;
      
      // In a real app, you would filter products by price range
      showToast(`Filtering products between ₹${minPrice} and ₹${maxPrice}`, 'info');
    });

    document.getElementById('resetPriceFilter').addEventListener('click', function() {
      document.getElementById('minPrice').value = '';
      document.getElementById('maxPrice').value = '';
      document.getElementById('minPriceSlider').value = 0;
      document.getElementById('maxPriceSlider').value = 5000;
      document.getElementById('minPriceValue').textContent = '₹0';
      document.getElementById('maxPriceValue').textContent = '₹5000';
      
      showToast('Price filter reset', 'info');
    });

    // Update price values when sliders change
    document.getElementById('minPriceSlider').addEventListener('input', function(e) {
      document.getElementById('minPriceValue').textContent = `₹${e.target.value}`;
      document.getElementById('minPrice').value = e.target.value;
    });

    document.getElementById('maxPriceSlider').addEventListener('input', function(e) {
      document.getElementById('maxPriceValue').textContent = `₹${e.target.value}`;
      document.getElementById('maxPrice').value = e.target.value;
    });

    // Initialize with some sample data if Firestore is empty
    function initializeSampleData() {
      // This function would create sample products and categories
      // In a real app, you would have an admin panel to manage products
      console.log('Initializing sample data...');
    }

    // Call initializeSampleData if needed
    // initializeSampleData();

    // Export functions to global scope for onclick handlers
    window.showPage = showPage;
    window.showProductDetail = showProductDetail;
    window.startOrder = startOrder;
    window.showMyOrders = showMyOrders;
    window.showOrderDetail = showOrderDetail;
    window.toggleWishlist = toggleWishlist;
    window.shareProduct = shareProduct;
    window.cancelOrder = cancelOrder;
    window.confirmCancellation = confirmCancellation;
    window.finalConfirmCancellation = finalConfirmCancellation;
    window.closeCancellationModal = closeCancellationModal;
    window.closeCancelConfirmModal = closeCancelConfirmModal;
    window.closeAlertModal = closeAlertModal;
    window.selectCancellationReason = selectCancellationReason;
    window.showLoginModal = showLoginModal;
    window.closeAuthModal = closeAuthModal;
    window.switchAuthTab = switchAuthTab;
    window.signInWithGoogle = signInWithGoogle;
    window.logout = logout;
    window.toggleUserMenu = toggleUserMenu;
    window.openImageZoom = openImageZoom;
    window.closeImageZoom = closeImageZoom;
    window.zoomIn = zoomIn;
    window.zoomOut = zoomOut;
    window.resetZoom = resetZoom;
    window.filterProductsByCategory = filterProductsByCategory;
  </script>
</body>
</html>